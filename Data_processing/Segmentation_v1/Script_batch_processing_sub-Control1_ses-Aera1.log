Processing subject in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/sub-Control1_M1982_MPRAGE_Aera1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/sub-Control1_M1982_MPRAGE_Aera1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-47-34_deepseg-sc_7rctemb8)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-48-52_optic-detect-centerline_nvv3iepj)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-48-52_optic-detect-centerline_nvv3iepj
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-47-34_deepseg-sc_7rctemb8
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/sub-Control1_M1982_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/sub-Control1_M1982_MPRAGE_Aera1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-15_create-mask_hamabe4_)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.97656244, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-15_create-mask_hamabe4_

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/sub-Control1_M1982_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/sub-Control1_M1982_MPRAGE_Aera1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_crop.nii.gz
--

Bounding box: x=[99, 139], y=[70, 115], z=[0, 43]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/sub-Control1_M1982_MPRAGE_Aera1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-21_smooth-spinalcord_xfefyzfo)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-21_smooth-spinalcord_xfefyzfo/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-21_smooth-spinalcord_xfefyzfo/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-21_straighten-spinalcord_h5gttigv)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 63.98430240086004
Size of spinal cord in z direction: 63.69568485830537
Ratio length/size: 1.0045311945887185
Safe zone boundaries (curved space): [-100.9789748333806, -37.283289975075235]
Safe zone boundaries (straight space): [-101.12328360465794, -37.1389812037979]
Pad input volume to account for spinal cord length...
Time to generate centerline: 6.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-21_straighten-spinalcord_h5gttigv
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-21_straighten-spinalcord_h5gttigv/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-21_straighten-spinalcord_h5gttigv/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-21_straighten-spinalcord_h5gttigv/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-21_straighten-spinalcord_h5gttigv
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-21_smooth-spinalcord_xfefyzfo

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-49-21_smooth-spinalcord_xfefyzfo

Finished! Elapsed time: 36s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/sub-Control1_M1982_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/sub-Control1_M1982_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-50-01_deepseg-sc_8tvihfz4)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-07_optic-detect-centerline_h08yi24n)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-07_optic-detect-centerline_h08yi24n
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #43[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-50-01_deepseg-sc_8tvihfz4
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/sub-Control1_M1982_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/sub-Control1_M1982_MPRAGE_Aera2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-32_create-mask_e9zit1hn)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.97656244, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-32_create-mask_e9zit1hn

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/sub-Control1_M1982_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/sub-Control1_M1982_MPRAGE_Aera2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_crop.nii.gz
--

Bounding box: x=[99, 139], y=[69, 115], z=[0, 43]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/sub-Control1_M1982_MPRAGE_Aera2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-37_smooth-spinalcord_2lt5x3wj)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-37_smooth-spinalcord_2lt5x3wj/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-37_smooth-spinalcord_2lt5x3wj/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-38_straighten-spinalcord_lmfpb6pu)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.04 mm
Error on approximation = 0.02 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 64.11035198030041
Size of spinal cord in z direction: 63.74505616497912
Ratio length/size: 1.005730574844516
Safe zone boundaries (curved space): [-101.02230711183026, -37.27725094685114]
Safe zone boundaries (straight space): [-101.20495501949091, -37.094603039190496]
Pad input volume to account for spinal cord length...
Time to generate centerline: 4.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-38_straighten-spinalcord_lmfpb6pu
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-38_straighten-spinalcord_lmfpb6pu/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-38_straighten-spinalcord_lmfpb6pu/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-38_straighten-spinalcord_lmfpb6pu/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-38_straighten-spinalcord_lmfpb6pu
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-37_smooth-spinalcord_2lt5x3wj

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-51-37_smooth-spinalcord_2lt5x3wj

Finished! Elapsed time: 35s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Aera2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/sub-Control1_M1982_MPRAGE_Avanto1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/sub-Control1_M1982_MPRAGE_Avanto1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-52-16_deepseg-sc_qhyugbf5)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-52-45_optic-detect-centerline_kvu_8zar)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-52-45_optic-detect-centerline_kvu_8zar
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:4[0m
[33mFilling a hole in the segmentation around z_slice #:7[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 5[0m
[33m
No properties for slice: 6[0m
[33m
No properties for slice: 8[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-52-16_deepseg-sc_qhyugbf5
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/sub-Control1_M1982_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/sub-Control1_M1982_MPRAGE_Avanto1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-12_create-mask_hiqysw0i)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-12_create-mask_hiqysw0i

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/sub-Control1_M1982_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/sub-Control1_M1982_MPRAGE_Avanto1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 39], y=[217, 256], z=[1, 10]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/sub-Control1_M1982_MPRAGE_Avanto1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-18_smooth-spinalcord_olicmos2)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-18_smooth-spinalcord_olicmos2/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-18_smooth-spinalcord_olicmos2/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-19_straighten-spinalcord_br0godp0)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 2.05 mm
Error on approximation = 2.0 mm
Error on approximation = 1.24 mm
[33mNURBS instability -> wrong reconstruction[0m
Create the straight space and the safe zone
Length of spinal cord: 25.180375931805322
Size of spinal cord in z direction: 14.027707530188351
Ratio length/size: 1.7950456892272564
Safe zone boundaries (curved space): [-80.27280623718119, -66.24509870699283]
Safe zone boundaries (straight space): [-85.84914043798967, -60.66876450618435]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-19_straighten-spinalcord_br0godp0
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-19_straighten-spinalcord_br0godp0/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-19_straighten-spinalcord_br0godp0/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-19_straighten-spinalcord_br0godp0/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-19_straighten-spinalcord_br0godp0
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-18_smooth-spinalcord_olicmos2

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-53-18_smooth-spinalcord_olicmos2

Finished! Elapsed time: 38s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/sub-Control1_M1982_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/sub-Control1_M1982_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-54-00_deepseg-sc_1iywif0e)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-55-15_optic-detect-centerline_dlybdu8u)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-55-15_optic-detect-centerline_dlybdu8u
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-54-00_deepseg-sc_1iywif0e
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/sub-Control1_M1982_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/sub-Control1_M1982_MPRAGE_Avanto2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-55-52_create-mask_e8dugi8e)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-55-52_create-mask_e8dugi8e

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/sub-Control1_M1982_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/sub-Control1_M1982_MPRAGE_Avanto2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_crop.nii.gz
--

Bounding box: x=[108, 151], y=[66, 116], z=[0, 50]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/sub-Control1_M1982_MPRAGE_Avanto2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-55-59_smooth-spinalcord_3oyy8abw)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-55-59_smooth-spinalcord_3oyy8abw/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-55-59_smooth-spinalcord_3oyy8abw/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-56-00_straighten-spinalcord_xhkd_4yb)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.07 mm
Error on approximation = 0.03 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 75.49672595436446
Size of spinal cord in z direction: 74.08407819891255
Ratio length/size: 1.01906816943391
Safe zone boundaries (curved space): [-111.39241027362688, -37.30833207471433]
Safe zone boundaries (straight space): [-112.09873415135283, -36.60200819698837]
Pad input volume to account for spinal cord length...
Time to generate centerline: 32.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-56-00_straighten-spinalcord_xhkd_4yb
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-56-00_straighten-spinalcord_xhkd_4yb/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-56-00_straighten-spinalcord_xhkd_4yb/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-56-00_straighten-spinalcord_xhkd_4yb/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-56-00_straighten-spinalcord_xhkd_4yb
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-55-59_smooth-spinalcord_3oyy8abw

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_smooth.nii.gz already exists. Will overwrite it.[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-55-59_smooth-spinalcord_3oyy8abw

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_seg.nii.gz
--


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Avanto2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/sub-Control1_M1982_MPRAGE_Trio1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/sub-Control1_M1982_MPRAGE_Trio1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-56-43_deepseg-sc__z_ykczo)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-05_optic-detect-centerline_9rs0nff5)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-05_optic-detect-centerline_9rs0nff5
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #5[0m
[33mFilling a hole in the segmentation around z_slice #:5[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 6[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-56-43_deepseg-sc__z_ykczo
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/sub-Control1_M1982_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/sub-Control1_M1982_MPRAGE_Trio1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-35_create-mask_yytqpz6s)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726563, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-35_create-mask_yytqpz6s

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/sub-Control1_M1982_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/sub-Control1_M1982_MPRAGE_Trio1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 37], y=[219, 256], z=[1, 8]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/sub-Control1_M1982_MPRAGE_Trio1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-45_smooth-spinalcord_rq09sjtb)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-45_smooth-spinalcord_rq09sjtb/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-45_smooth-spinalcord_rq09sjtb/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-45_straighten-spinalcord_w_n0fjjt)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 3.81 mm
Error on approximation = 2.18 mm
Create the straight space and the safe zone
Length of spinal cord: 22.920916189597712
Size of spinal cord in z direction: 10.515063443068328
Ratio length/size: 2.1798172035478767
Safe zone boundaries (curved space): [-66.17973649346297, -55.66467305039464]
Safe zone boundaries (straight space): [-72.38266286672766, -49.46174667712995]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-45_straighten-spinalcord_w_n0fjjt
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-45_straighten-spinalcord_w_n0fjjt/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-45_straighten-spinalcord_w_n0fjjt/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-45_straighten-spinalcord_w_n0fjjt/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-45_straighten-spinalcord_w_n0fjjt
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-45_smooth-spinalcord_rq09sjtb

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-57-45_smooth-spinalcord_rq09sjtb

Finished! Elapsed time: 39s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/sub-Control1_M1982_MPRAGE_Trio2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/sub-Control1_M1982_MPRAGE_Trio2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-58-27_deepseg-sc_n8xl6qut)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-58-48_optic-detect-centerline_e5e2olzu)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-58-48_optic-detect-centerline_e5e2olzu
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 3[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-58-27_deepseg-sc_n8xl6qut
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/sub-Control1_M1982_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/sub-Control1_M1982_MPRAGE_Trio2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-17_create-mask_00w1w0yy)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726563, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-17_create-mask_00w1w0yy

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/sub-Control1_M1982_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/sub-Control1_M1982_MPRAGE_Trio2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 42], y=[221, 256], z=[1, 9]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/sub-Control1_M1982_MPRAGE_Trio2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-23_smooth-spinalcord_hxf1oo_z)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-23_smooth-spinalcord_hxf1oo_z/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-23_smooth-spinalcord_hxf1oo_z/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-24_straighten-spinalcord_puudzfbm)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 12.95 mm
Error on approximation = 3.09 mm
Error on approximation = 4.58 mm
Create the straight space and the safe zone
Length of spinal cord: 26.80274555725618
Size of spinal cord in z direction: 10.608505923850728
Ratio length/size: 2.526533495823999
Safe zone boundaries (curved space): [-64.30368333212849, -53.69517740827776]
Safe zone boundaries (straight space): [-72.40080314883122, -45.59805759157503]
Pad input volume to account for spinal cord length...
Time to generate centerline: 3.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-24_straighten-spinalcord_puudzfbm
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-24_straighten-spinalcord_puudzfbm/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-24_straighten-spinalcord_puudzfbm/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-24_straighten-spinalcord_puudzfbm/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-24_straighten-spinalcord_puudzfbm
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-23_smooth-spinalcord_hxf1oo_z

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_11-59-23_smooth-spinalcord_hxf1oo_z

Finished! Elapsed time: 43s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_seg.nii.gz
--


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control1/ses-Trio2/anat/anat_flat.nii.gz: No such file or directory
Processing subject in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/sub-Control2_F1988_MPRAGE_Aera1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/sub-Control2_F1988_MPRAGE_Aera1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-00-09_deepseg-sc_s12u8vu2)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-02_optic-detect-centerline_gapvtovb)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-02_optic-detect-centerline_gapvtovb
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #53[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 5[0m
[33mFound isolated voxels on slice 2, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-00-09_deepseg-sc_s12u8vu2
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/sub-Control2_F1988_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/sub-Control2_F1988_MPRAGE_Aera1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-36_create-mask_wb3v9o0e)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-36_create-mask_wb3v9o0e

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/sub-Control2_F1988_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/sub-Control2_F1988_MPRAGE_Aera1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_crop.nii.gz
--

Bounding box: x=[94, 137], y=[50, 118], z=[2, 53]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/sub-Control2_F1988_MPRAGE_Aera1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-44_smooth-spinalcord_2t2nc7rv)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-44_smooth-spinalcord_2t2nc7rv/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-44_smooth-spinalcord_2t2nc7rv/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-44_straighten-spinalcord_7nb_ycnw)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.88 mm
Error on approximation = 0.3 mm
Error on approximation = 0.31 mm
Error on approximation = 0.22 mm
Error on approximation = 0.23 mm
Error on approximation = 0.21 mm
Error on approximation = 0.24 mm
Error on approximation = 0.2 mm
Error on approximation = 0.19 mm
Error on approximation = 0.18 mm
Error on approximation = 0.16 mm
Error on approximation = 0.16 mm
Error on approximation = 0.14 mm
Error on approximation = 0.15 mm
Error on approximation = 0.14 mm
Create the straight space and the safe zone
Length of spinal cord: 86.44268516312606
Size of spinal cord in z direction: 79.82812630378463
Ratio length/size: 1.0828600039310685
Safe zone boundaries (curved space): [-143.63109647195031, -63.802970168165686]
Safe zone boundaries (straight space): [-146.93837590162104, -60.49569073849497]
Pad input volume to account for spinal cord length...
Time to generate centerline: 9.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-44_straighten-spinalcord_7nb_ycnw
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-44_straighten-spinalcord_7nb_ycnw/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-44_straighten-spinalcord_7nb_ycnw/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-44_straighten-spinalcord_7nb_ycnw/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-44_straighten-spinalcord_7nb_ycnw
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-44_smooth-spinalcord_2t2nc7rv

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-01-44_smooth-spinalcord_2t2nc7rv

Finished! Elapsed time: 39s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/sub-Control2_F1988_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/sub-Control2_F1988_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-02-26_deepseg-sc_2gi7l3sb)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-10_optic-detect-centerline_i8fb4cvc)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-10_optic-detect-centerline_i8fb4cvc
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:16[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 17[0m
[33mFound isolated voxels on slice 0, Removing them[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-02-26_deepseg-sc_2gi7l3sb

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/sub-Control2_F1988_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/sub-Control2_F1988_MPRAGE_Aera2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-49_create-mask_ps6d0_hu)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-49_create-mask_ps6d0_hu

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/sub-Control2_F1988_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/sub-Control2_F1988_MPRAGE_Aera2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_crop.nii.gz
--

Bounding box: x=[93, 137], y=[47, 118], z=[1, 53]
Cropping the image...

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/sub-Control2_F1988_MPRAGE_Aera2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-57_smooth-spinalcord_l14e3j2v)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-57_smooth-spinalcord_l14e3j2v/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-57_smooth-spinalcord_l14e3j2v/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-58_straighten-spinalcord_p6i1p6bu)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 1.21 mm
Error on approximation = 0.31 mm
Error on approximation = 0.29 mm
Error on approximation = 0.18 mm
Error on approximation = 0.13 mm
Error on approximation = 0.13 mm
Error on approximation = 0.11 mm
Error on approximation = 0.1 mm
Error on approximation = 0.1 mm
Create the straight space and the safe zone
Length of spinal cord: 88.47555231241152
Size of spinal cord in z direction: 81.95480575887815
Ratio length/size: 1.0795651517095686
Safe zone boundaries (curved space): [-145.67134489639528, -63.71653913751713]
Safe zone boundaries (straight space): [-148.93171817316195, -60.456165860750446]
Pad input volume to account for spinal cord length...
Time to generate centerline: 4.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-58_straighten-spinalcord_p6i1p6bu
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-58_straighten-spinalcord_p6i1p6bu/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-58_straighten-spinalcord_p6i1p6bu/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-58_straighten-spinalcord_p6i1p6bu/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-58_straighten-spinalcord_p6i1p6bu
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-57_smooth-spinalcord_l14e3j2v

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-03-57_smooth-spinalcord_l14e3j2v

Finished! Elapsed time: 38s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Aera2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/sub-Control2_F1988_MPRAGE_Avanto1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/sub-Control2_F1988_MPRAGE_Avanto1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-04-39_deepseg-sc_4tpcuuxz)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-05-37_optic-detect-centerline__qzck_vx)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-05-37_optic-detect-centerline__qzck_vx
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-04-39_deepseg-sc_4tpcuuxz

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/sub-Control2_F1988_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/sub-Control2_F1988_MPRAGE_Avanto1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-15_create-mask_rpbyoddi)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.9726562, 0.97265625, 1.4999999, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-15_create-mask_rpbyoddi

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/sub-Control2_F1988_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/sub-Control2_F1988_MPRAGE_Avanto1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_crop.nii.gz
--

Bounding box: x=[105, 146], y=[44, 111], z=[0, 55]
Cropping the image...

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/sub-Control2_F1988_MPRAGE_Avanto1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-28_smooth-spinalcord_mzqmces4)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-28_smooth-spinalcord_mzqmces4/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-28_smooth-spinalcord_mzqmces4/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-28_straighten-spinalcord_8ng1g04n)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.7 mm
Error on approximation = 0.24 mm
Error on approximation = 0.2 mm
Error on approximation = 0.18 mm
Error on approximation = 0.13 mm
Error on approximation = 0.12 mm
Error on approximation = 0.12 mm
Error on approximation = 0.11 mm
Create the straight space and the safe zone
Length of spinal cord: 88.87607486776797
Size of spinal cord in z direction: 85.18728799174859
Ratio length/size: 1.043302081366608
Safe zone boundaries (curved space): [-132.1751591406231, -46.987871148874504]
Safe zone boundaries (straight space): [-134.01955257863278, -45.143477710864815]
Pad input volume to account for spinal cord length...
Time to generate centerline: 7.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-28_straighten-spinalcord_8ng1g04n
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-28_straighten-spinalcord_8ng1g04n/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-28_straighten-spinalcord_8ng1g04n/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-28_straighten-spinalcord_8ng1g04n/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-28_straighten-spinalcord_8ng1g04n
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-28_smooth-spinalcord_mzqmces4

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-06-28_smooth-spinalcord_mzqmces4

Finished! Elapsed time: 42s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_seg.nii.gz
--


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/sub-Control2_F1988_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/sub-Control2_F1988_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-07-14_deepseg-sc_bme_m1n5)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-08-09_optic-detect-centerline_twjpsfph)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-08-09_optic-detect-centerline_twjpsfph
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 1, Removing them[0m
[33mFound isolated voxels on slice 1, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-07-14_deepseg-sc_bme_m1n5
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/sub-Control2_F1988_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/sub-Control2_F1988_MPRAGE_Avanto2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-08-51_create-mask_pgyjm8sx)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.9726562, 0.97265625, 1.4999999, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-08-51_create-mask_pgyjm8sx

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/sub-Control2_F1988_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/sub-Control2_F1988_MPRAGE_Avanto2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_crop.nii.gz
--

Bounding box: x=[106, 149], y=[47, 112], z=[2, 55]
Cropping the image...

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/sub-Control2_F1988_MPRAGE_Avanto2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-00_smooth-spinalcord_0refmosp)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-00_smooth-spinalcord_0refmosp/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-00_smooth-spinalcord_0refmosp/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-00_straighten-spinalcord_ioczd3fb)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 3.43 mm
Error on approximation = 1.07 mm
Error on approximation = 0.62 mm
Error on approximation = 0.36 mm
Error on approximation = 0.28 mm
Error on approximation = 0.23 mm
Error on approximation = 0.2 mm
Error on approximation = 0.18 mm
Error on approximation = 0.17 mm
Error on approximation = 0.17 mm
Error on approximation = 0.17 mm
Error on approximation = 0.17 mm
Error on approximation = 0.19 mm
Error on approximation = 0.19 mm
Error on approximation = 0.2 mm
Error on approximation = 0.2 mm
Error on approximation = 0.18 mm
Error on approximation = 0.18 mm
Error on approximation = 0.18 mm
Create the straight space and the safe zone
Length of spinal cord: 86.45681298389377
Size of spinal cord in z direction: 81.64255944712144
Ratio length/size: 1.0589674499351094
Safe zone boundaries (curved space): [-128.5919076319378, -46.94934818481636]
Safe zone boundaries (straight space): [-130.99903440032398, -44.542221416430195]
Pad input volume to account for spinal cord length...
Time to generate centerline: 10.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-00_straighten-spinalcord_ioczd3fb
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-00_straighten-spinalcord_ioczd3fb/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-00_straighten-spinalcord_ioczd3fb/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-00_straighten-spinalcord_ioczd3fb/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-00_straighten-spinalcord_ioczd3fb
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-00_smooth-spinalcord_0refmosp

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-00_smooth-spinalcord_0refmosp

Finished! Elapsed time: 45s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Avanto2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/sub-Control2_F1988_MPRAGE_Trio1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/sub-Control2_F1988_MPRAGE_Trio1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-50_deepseg-sc_wc21fm4w)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-10_optic-detect-centerline_1e3hzw5m)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-10_optic-detect-centerline_1e3hzw5m
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #0[0m
[33mRemoving small objects above slice #0[0m
[33mFilling a hole in the segmentation around z_slice #:0[0m
[33mFilling a hole in the segmentation around z_slice #:2[0m
[33mFilling a hole in the segmentation around z_slice #:7[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 1[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 4[0m
[33m
No properties for slice: 5[0m
[33m
No properties for slice: 6[0m
[33m
No properties for slice: 8[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-09-50_deepseg-sc_wc21fm4w
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/sub-Control2_F1988_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/sub-Control2_F1988_MPRAGE_Trio1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-31_create-mask_w_6iak9g)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726563, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-31_create-mask_w_6iak9g

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/sub-Control2_F1988_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/sub-Control2_F1988_MPRAGE_Trio1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 39], y=[220, 256], z=[0, 10]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/sub-Control2_F1988_MPRAGE_Trio1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-37_smooth-spinalcord_ygk4vlbz)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-37_smooth-spinalcord_ygk4vlbz/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-37_smooth-spinalcord_ygk4vlbz/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-37_straighten-spinalcord_oe9v7ovj)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 1.45 mm
Error on approximation = 1.6 mm
Error on approximation = 0.75 mm
Error on approximation = 2.69 mm
Error on approximation = 0.61 mm
Create the straight space and the safe zone
Length of spinal cord: 25.242008518409648
Size of spinal cord in z direction: 12.213069375085794
Ratio length/size: 2.0668030077600643
Safe zone boundaries (curved space): [-72.81184674226321, -60.59877736717742]
Safe zone boundaries (straight space): [-79.32631631392515, -54.0843077955155]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-37_straighten-spinalcord_oe9v7ovj
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-37_straighten-spinalcord_oe9v7ovj/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-37_straighten-spinalcord_oe9v7ovj/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-37_straighten-spinalcord_oe9v7ovj/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-37_straighten-spinalcord_oe9v7ovj
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-37_smooth-spinalcord_ygk4vlbz

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-10-37_smooth-spinalcord_ygk4vlbz

Finished! Elapsed time: 46s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/sub-Control2_F1988_MPRAGE_Trio2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/sub-Control2_F1988_MPRAGE_Trio2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-11-32_deepseg-sc_1pdwevnl)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-11-56_optic-detect-centerline_ua92w6pq)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-11-56_optic-detect-centerline_ua92w6pq
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:0[0m
[33mFilling a hole in the segmentation around z_slice #:2[0m
[33mFilling a hole in the segmentation around z_slice #:7[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 1[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 4[0m
[33m
No properties for slice: 5[0m
[33m
No properties for slice: 6[0m
[33m
No properties for slice: 8[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-11-32_deepseg-sc_1pdwevnl
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/sub-Control2_F1988_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/sub-Control2_F1988_MPRAGE_Trio2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-12-16_create-mask_0vlv1j5e)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-12-16_create-mask_0vlv1j5e

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/sub-Control2_F1988_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/sub-Control2_F1988_MPRAGE_Trio2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 41], y=[217, 256], z=[0, 10]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/sub-Control2_F1988_MPRAGE_Trio2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-12-21_smooth-spinalcord_66d5v4_o)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-12-21_smooth-spinalcord_66d5v4_o/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-12-21_smooth-spinalcord_66d5v4_o/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-12-22_straighten-spinalcord_h4s72icx)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 8.26 mm
Error on approximation = 3.31 mm
Error on approximation = 2.93 mm
Error on approximation = 2.85 mm
Error on approximation = 3.14 mm
Create the straight space and the safe zone
Length of spinal cord: 37.221776598499986
Size of spinal cord in z direction: 15.286590816602875
Ratio length/size: 2.4349298705682076
Safe zone boundaries (curved space): [-74.44203836201274, -59.155447545409864]
Safe zone boundaries (straight space): [-85.4096312529613, -48.18785465446131]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-12-22_straighten-spinalcord_h4s72icx
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-12-22_straighten-spinalcord_h4s72icx/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-12-22_straighten-spinalcord_h4s72icx/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-12-22_straighten-spinalcord_h4s72icx/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-12-22_straighten-spinalcord_h4s72icx
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-12-21_smooth-spinalcord_66d5v4_o

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 288, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 272, in main
    generate_output_file(os.path.join(path_tmp, "anat_rpi_straight_smooth_curved_nonzero.nii"), fname_out)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 1484, in generate_output_file
    os.remove(os.path.join(path_out, file_out + ext_out))
FileNotFoundError: [Errno 2] No such file or directory: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_smooth.nii.gz'

--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control2/ses-Trio2/anat/anat_flat.nii.gz: No such file or directory
Processing subject in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/sub-Control3_F1984_MPRAGE_Aera1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/sub-Control3_F1984_MPRAGE_Aera1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-13-34_deepseg-sc_r82outlk)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-15_optic-detect-centerline_1pusz0j3)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-15_optic-detect-centerline_1pusz0j3
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-13-34_deepseg-sc_r82outlk
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/sub-Control3_F1984_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/sub-Control3_F1984_MPRAGE_Aera1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-34_create-mask_q5q2pa7v)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.97656244, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-34_create-mask_q5q2pa7v

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/sub-Control3_F1984_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/sub-Control3_F1984_MPRAGE_Aera1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_crop.nii.gz
--

Bounding box: x=[101, 138], y=[70, 114], z=[0, 49]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/sub-Control3_F1984_MPRAGE_Aera1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-40_smooth-spinalcord_hnroszdx)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-40_smooth-spinalcord_hnroszdx/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-40_smooth-spinalcord_hnroszdx/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-40_straighten-spinalcord_412n1_6n)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.06 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 72.5089076522564
Size of spinal cord in z direction: 72.29578397847823
Ratio length/size: 1.0029479405582158
Safe zone boundaries (curved space): [-120.66754878269604, -48.37176480421782]
Safe zone boundaries (straight space): [-120.77411061958512, -48.26520296732874]
Pad input volume to account for spinal cord length...
Time to generate centerline: 4.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-40_straighten-spinalcord_412n1_6n
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-40_straighten-spinalcord_412n1_6n/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-40_straighten-spinalcord_412n1_6n/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-40_straighten-spinalcord_412n1_6n/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-40_straighten-spinalcord_412n1_6n
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-40_smooth-spinalcord_hnroszdx

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-14-40_smooth-spinalcord_hnroszdx

Finished! Elapsed time: 43s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/sub-Control3_F1984_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/sub-Control3_F1984_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-15-41_deepseg-sc_b6hepdxy)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-16-42_optic-detect-centerline_j0vq3hiy)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-16-42_optic-detect-centerline_j0vq3hiy
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #49[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-15-41_deepseg-sc_b6hepdxy
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/sub-Control3_F1984_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/sub-Control3_F1984_MPRAGE_Aera2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-01_create-mask_bw7tumib)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.97656244, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-01_create-mask_bw7tumib

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/sub-Control3_F1984_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/sub-Control3_F1984_MPRAGE_Aera2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_crop.nii.gz
--

Bounding box: x=[100, 138], y=[70, 114], z=[0, 50]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/sub-Control3_F1984_MPRAGE_Aera2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-06_smooth-spinalcord_l5aq30hc)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-06_smooth-spinalcord_l5aq30hc/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-06_smooth-spinalcord_l5aq30hc/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-06_straighten-spinalcord_nneri_nh)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.07 mm
Error on approximation = 0.02 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Error on approximation = 0.01 mm
Error on approximation = 0.01 mm
Create the straight space and the safe zone
Length of spinal cord: 74.04907864670054
Size of spinal cord in z direction: 73.8203295844472
Ratio length/size: 1.0030987271872265
Safe zone boundaries (curved space): [-120.69713962141572, -46.87681003696852]
Safe zone boundaries (straight space): [-120.81151415254239, -46.76243550584185]
Pad input volume to account for spinal cord length...
Time to generate centerline: 4.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-06_straighten-spinalcord_nneri_nh
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-06_straighten-spinalcord_nneri_nh/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-06_straighten-spinalcord_nneri_nh/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-06_straighten-spinalcord_nneri_nh/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-06_straighten-spinalcord_nneri_nh
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-06_smooth-spinalcord_l5aq30hc

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-17-06_smooth-spinalcord_l5aq30hc

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Aera2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/sub-Control3_F1984_MPRAGE_Avanto1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/sub-Control3_F1984_MPRAGE_Avanto1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-18-12_deepseg-sc_bv8rgvon)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-22_optic-detect-centerline_dx2hrs3e)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-22_optic-detect-centerline_dx2hrs3e
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #48[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-18-12_deepseg-sc_bv8rgvon
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/sub-Control3_F1984_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/sub-Control3_F1984_MPRAGE_Avanto1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-44_create-mask_ga35yuwh)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.4999999, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-44_create-mask_ga35yuwh

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/sub-Control3_F1984_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/sub-Control3_F1984_MPRAGE_Avanto1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_crop.nii.gz
--

Bounding box: x=[108, 146], y=[74, 116], z=[0, 49]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/sub-Control3_F1984_MPRAGE_Avanto1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-50_smooth-spinalcord_am7xu_2g)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-50_smooth-spinalcord_am7xu_2g/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-50_smooth-spinalcord_am7xu_2g/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-51_straighten-spinalcord_a74hcq_7)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.24 mm
Error on approximation = 0.09 mm
Error on approximation = 0.07 mm
Error on approximation = 0.05 mm
Error on approximation = 0.05 mm
Error on approximation = 0.06 mm
Error on approximation = 0.06 mm
Error on approximation = 0.06 mm
Error on approximation = 0.05 mm
Create the straight space and the safe zone
Length of spinal cord: 72.71792577230511
Size of spinal cord in z direction: 72.01024419429926
Ratio length/size: 1.0098275125424705
Safe zone boundaries (curved space): [-97.19344297428096, -25.183198779981694]
Safe zone boundaries (straight space): [-97.54728376328387, -24.829357990978778]
Pad input volume to account for spinal cord length...
Time to generate centerline: 5.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-51_straighten-spinalcord_a74hcq_7
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-51_straighten-spinalcord_a74hcq_7/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-51_straighten-spinalcord_a74hcq_7/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-51_straighten-spinalcord_a74hcq_7/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-51_straighten-spinalcord_a74hcq_7
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-50_smooth-spinalcord_am7xu_2g

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-20-50_smooth-spinalcord_am7xu_2g

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/sub-Control3_F1984_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/sub-Control3_F1984_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-21-34_deepseg-sc_taget39n)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-23-32_optic-detect-centerline_x85_ehum)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-23-32_optic-detect-centerline_x85_ehum
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #49[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-21-34_deepseg-sc_taget39n
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/sub-Control3_F1984_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/sub-Control3_F1984_MPRAGE_Avanto2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-23-55_create-mask_mjloopw2)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.4999999, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-23-55_create-mask_mjloopw2

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/sub-Control3_F1984_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/sub-Control3_F1984_MPRAGE_Avanto2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_crop.nii.gz
--

Bounding box: x=[109, 147], y=[73, 114], z=[1, 49]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/sub-Control3_F1984_MPRAGE_Avanto2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-24-02_smooth-spinalcord_nerohfr2)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-24-02_smooth-spinalcord_nerohfr2/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-24-02_smooth-spinalcord_nerohfr2/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-24-03_straighten-spinalcord_n11w6cv2)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.33 mm
Error on approximation = 0.11 mm
Error on approximation = 0.07 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 71.09125961912999
Size of spinal cord in z direction: 70.50812431323575
Ratio length/size: 1.0082704697022378
Safe zone boundaries (curved space): [-95.69523222934234, -25.187107916106584]
Safe zone boundaries (straight space): [-95.98679988228946, -24.895540263159468]
Pad input volume to account for spinal cord length...
Time to generate centerline: 4.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-24-03_straighten-spinalcord_n11w6cv2
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-24-03_straighten-spinalcord_n11w6cv2/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-24-03_straighten-spinalcord_n11w6cv2/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-24-03_straighten-spinalcord_n11w6cv2/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-24-03_straighten-spinalcord_n11w6cv2
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-24-02_smooth-spinalcord_nerohfr2

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-24-02_smooth-spinalcord_nerohfr2

Finished! Elapsed time: 41s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Avanto2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-24-47_deepseg-sc_2vdb9bss)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-10_optic-detect-centerline_fgulbn1n)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-10_optic-detect-centerline_fgulbn1n
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Spinal cord could not be detected for /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz
    EmptyArrayError: 'Spinal cord not detected. Please make sure that there is sufficient contrast between the spinal cord and CSF to ensure good results.'

--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-27_create-mask_qsndtl1g)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-27_create-mask_qsndtl1g

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 43], y=[216, 256], z=[0, 10]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-32_smooth-spinalcord_mckvz1di)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-32_smooth-spinalcord_mckvz1di/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-32_smooth-spinalcord_mckvz1di/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-33_straighten-spinalcord_0nn250rr)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 9.65 mm
Error on approximation = 6.62 mm
Error on approximation = 7.61 mm
Error on approximation = 8.88 mm
Error on approximation = 9.6 mm
Create the straight space and the safe zone
Length of spinal cord: 26.918015386481102
Size of spinal cord in z direction: 13.92259651242638
Ratio length/size: 1.9334048331039313
Safe zone boundaries (curved space): [-111.36342086498327, -97.44082435255689]
Safe zone boundaries (straight space): [-117.86113030201064, -90.94311491552953]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-33_straighten-spinalcord_0nn250rr
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-33_straighten-spinalcord_0nn250rr/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-33_straighten-spinalcord_0nn250rr/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-33_straighten-spinalcord_0nn250rr/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-33_straighten-spinalcord_0nn250rr
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-32_smooth-spinalcord_mckvz1di

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-25-32_smooth-spinalcord_mckvz1di

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/sub-Control3_F1984_MPRAGE_Trio2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/sub-Control3_F1984_MPRAGE_Trio2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-26-17_deepseg-sc_2jcl1xg0)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-26-51_optic-detect-centerline_c05ksmem)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-26-51_optic-detect-centerline_c05ksmem
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:2[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 4[0m
[33m
No properties for slice: 5[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-26-17_deepseg-sc_2jcl1xg0
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/sub-Control3_F1984_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/sub-Control3_F1984_MPRAGE_Trio2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-10_create-mask_za5a707f)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-10_create-mask_za5a707f

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/sub-Control3_F1984_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/sub-Control3_F1984_MPRAGE_Trio2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 41], y=[218, 256], z=[0, 10]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/sub-Control3_F1984_MPRAGE_Trio2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-16_smooth-spinalcord_tcnx45xq)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-16_smooth-spinalcord_tcnx45xq/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-16_smooth-spinalcord_tcnx45xq/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-16_straighten-spinalcord_vho0eo29)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 20.56 mm
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
Create the straight space and the safe zone
Length of spinal cord: 24.230684399726435
Size of spinal cord in z direction: 13.879183769617853
Ratio length/size: 1.7458292073895927
Safe zone boundaries (curved space): [-111.19107866452383, -97.31189489490598]
Safe zone boundaries (straight space): [-116.36682897957813, -92.13614457985169]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-16_straighten-spinalcord_vho0eo29
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-16_straighten-spinalcord_vho0eo29/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-16_straighten-spinalcord_vho0eo29/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-16_straighten-spinalcord_vho0eo29/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-16_straighten-spinalcord_vho0eo29
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-16_smooth-spinalcord_tcnx45xq

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-27-16_smooth-spinalcord_tcnx45xq

Finished! Elapsed time: 38s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-Control3/ses-Trio2/anat/anat_flat.nii.gz: No such file or directory
Processing subject in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/sub-MS1_M1980_FLAIR_Aera.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/sub-MS1_M1980_FLAIR_Aera.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-28-02_deepseg-sc_g90_xhdg)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-27_optic-detect-centerline_wjttqfzj)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-27_optic-detect-centerline_wjttqfzj
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-28-02_deepseg-sc_g90_xhdg
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/sub-MS1_M1980_FLAIR_Aera.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/sub-MS1_M1980_FLAIR_Aera.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-50_create-mask_bbf2bxou)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-50_create-mask_bbf2bxou

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/sub-MS1_M1980_FLAIR_Aera.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/sub-MS1_M1980_FLAIR_Aera.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_crop.nii.gz
--

Bounding box: x=[102, 150], y=[0, 86], z=[73, 107]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/sub-MS1_M1980_FLAIR_Aera.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-56_smooth-spinalcord_iqcta7d5)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-56_smooth-spinalcord_iqcta7d5/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-56_smooth-spinalcord_iqcta7d5/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-56_straighten-spinalcord_tk7l8ifc)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.28 mm
Error on approximation = 0.1 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 87.71394646944267
Size of spinal cord in z direction: 86.23635910744663
Ratio length/size: 1.0171341575327297
Safe zone boundaries (curved space): [-161.55026166017362, -75.31390255272699]
Safe zone boundaries (straight space): [-162.28905534117163, -74.57510887172896]
Pad input volume to account for spinal cord length...
Time to generate centerline: 13.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-56_straighten-spinalcord_tk7l8ifc
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-56_straighten-spinalcord_tk7l8ifc/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-56_straighten-spinalcord_tk7l8ifc/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-56_straighten-spinalcord_tk7l8ifc/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-56_straighten-spinalcord_tk7l8ifc
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-56_smooth-spinalcord_iqcta7d5

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-29-56_smooth-spinalcord_iqcta7d5

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/sub-MS1_M1980_MPRAGE_Aera1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/sub-MS1_M1980_MPRAGE_Aera1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-30-53_deepseg-sc_r8xqb524)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-34_optic-detect-centerline_ecyo_uvp)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-34_optic-detect-centerline_ecyo_uvp
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #43[0m
[33mRemoving small objects above slice #43[0m
[33mRemoving small objects above slice #43[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-30-53_deepseg-sc_r8xqb524
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/sub-MS1_M1980_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/sub-MS1_M1980_MPRAGE_Aera1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-53_create-mask_o3z5obi8)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.97656244, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-53_create-mask_o3z5obi8

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/sub-MS1_M1980_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/sub-MS1_M1980_MPRAGE_Aera1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_crop.nii.gz
--

Bounding box: x=[95, 134], y=[82, 126], z=[0, 43]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/sub-MS1_M1980_MPRAGE_Aera1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-59_smooth-spinalcord_wpaliael)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-59_smooth-spinalcord_wpaliael/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-59_smooth-spinalcord_wpaliael/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-59_straighten-spinalcord_c9nla91d)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.1 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 63.66007177121774
Size of spinal cord in z direction: 62.03473014601386
Ratio length/size: 1.026200510929575
Safe zone boundaries (curved space): [-139.88961604489327, -77.85488589887942]
Safe zone boundaries (straight space): [-140.7022868574952, -77.04221508627748]
Pad input volume to account for spinal cord length...
Time to generate centerline: 4.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-59_straighten-spinalcord_c9nla91d
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-59_straighten-spinalcord_c9nla91d/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-59_straighten-spinalcord_c9nla91d/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-59_straighten-spinalcord_c9nla91d/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-59_straighten-spinalcord_c9nla91d
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-59_smooth-spinalcord_wpaliael

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-32-59_smooth-spinalcord_wpaliael

Finished! Elapsed time: 37s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/sub-MS1_M1980_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/sub-MS1_M1980_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-33-53_deepseg-sc_ifz41355)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-08_optic-detect-centerline_2sh9nk1v)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mTo avoid intensity overflow due to convertion to +uint16+, intensity will be rescaled to the maximum quantization scale[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-08_optic-detect-centerline_2sh9nk1v
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #35[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-33-53_deepseg-sc_ifz41355
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/sub-MS1_M1980_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/sub-MS1_M1980_MPRAGE_Aera2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-26_create-mask_mst0h6kz)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.97656244, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-26_create-mask_mst0h6kz

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/sub-MS1_M1980_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/sub-MS1_M1980_MPRAGE_Aera2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_crop.nii.gz
--

Bounding box: x=[93, 132], y=[82, 126], z=[0, 35]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/sub-MS1_M1980_MPRAGE_Aera2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-31_smooth-spinalcord_k9ojag3v)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-31_smooth-spinalcord_k9ojag3v/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-31_smooth-spinalcord_k9ojag3v/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-32_straighten-spinalcord_3hcys4tp)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.15 mm
Error on approximation = 0.09 mm
Error on approximation = 0.08 mm
Error on approximation = 0.09 mm
Error on approximation = 0.08 mm
Create the straight space and the safe zone
Length of spinal cord: 51.621825380540066
Size of spinal cord in z direction: 50.20254083874772
Ratio length/size: 1.0282711695081557
Safe zone boundaries (curved space): [-130.9073250291003, -80.70478419035257]
Safe zone boundaries (straight space): [-131.61696729999647, -79.9951419194564]
Pad input volume to account for spinal cord length...
Time to generate centerline: 2.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-32_straighten-spinalcord_3hcys4tp
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-32_straighten-spinalcord_3hcys4tp/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-32_straighten-spinalcord_3hcys4tp/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-32_straighten-spinalcord_3hcys4tp/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-32_straighten-spinalcord_3hcys4tp
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-31_smooth-spinalcord_k9ojag3v

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-35-31_smooth-spinalcord_k9ojag3v

Finished! Elapsed time: 36s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Aera2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/sub-MS1_M1980_FLAIR_Avanto.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/sub-MS1_M1980_FLAIR_Avanto.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-36-24_deepseg-sc_hfgk2es3)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-15_optic-detect-centerline_gx19mtrj)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-15_optic-detect-centerline_gx19mtrj
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-36-24_deepseg-sc_hfgk2es3
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/sub-MS1_M1980_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/sub-MS1_M1980_FLAIR_Avanto.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-38_create-mask_zav3bgs_)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-38_create-mask_zav3bgs_

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/sub-MS1_M1980_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/sub-MS1_M1980_FLAIR_Avanto.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_crop.nii.gz
--

Bounding box: x=[119, 160], y=[0, 93], z=[71, 110]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/sub-MS1_M1980_FLAIR_Avanto.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-44_smooth-spinalcord_cs174wx6)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-44_smooth-spinalcord_cs174wx6/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-44_smooth-spinalcord_cs174wx6/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-44_straighten-spinalcord_1lefthbf)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.58 mm
Error on approximation = 0.24 mm
Error on approximation = 0.14 mm
Error on approximation = 0.12 mm
Error on approximation = 0.11 mm
Error on approximation = 0.11 mm
Error on approximation = 0.11 mm
Error on approximation = 0.11 mm
Create the straight space and the safe zone
Length of spinal cord: 94.37284463420905
Size of spinal cord in z direction: 93.48793247725234
Ratio length/size: 1.00946552280608
Safe zone boundaries (curved space): [-141.84255211937054, -48.354619642118195]
Safe zone boundaries (straight space): [-142.2850081978489, -47.912163563639844]
Pad input volume to account for spinal cord length...
Time to generate centerline: 9.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-44_straighten-spinalcord_1lefthbf
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-44_straighten-spinalcord_1lefthbf/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-44_straighten-spinalcord_1lefthbf/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-44_straighten-spinalcord_1lefthbf/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-44_straighten-spinalcord_1lefthbf
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-44_smooth-spinalcord_cs174wx6

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-37-44_smooth-spinalcord_cs174wx6

Finished! Elapsed time: 39s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/sub-MS1_M1980_MPRAGE_Avanto1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/sub-MS1_M1980_MPRAGE_Avanto1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-38-37_deepseg-sc_77p02r48)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-39-56_optic-detect-centerline_tjak2hn2)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-39-56_optic-detect-centerline_tjak2hn2
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-38-37_deepseg-sc_77p02r48
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/sub-MS1_M1980_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/sub-MS1_M1980_MPRAGE_Avanto1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-15_create-mask_3uaco_wf)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-15_create-mask_3uaco_wf

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/sub-MS1_M1980_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/sub-MS1_M1980_MPRAGE_Avanto1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_crop.nii.gz
--

Bounding box: x=[112, 152], y=[80, 122], z=[0, 40]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/sub-MS1_M1980_MPRAGE_Avanto1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-20_smooth-spinalcord_aqzvjg91)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-20_smooth-spinalcord_aqzvjg91/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-20_smooth-spinalcord_aqzvjg91/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-21_straighten-spinalcord_rkb17kp1)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.19 mm
Error on approximation = 0.08 mm
Error on approximation = 0.06 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 59.03542923349815
Size of spinal cord in z direction: 58.38103293402001
Ratio length/size: 1.0112090565478298
Safe zone boundaries (curved space): [-107.34574651110204, -48.96471357708202]
Safe zone boundaries (straight space): [-107.67294466084111, -48.63751542734295]
Pad input volume to account for spinal cord length...
Time to generate centerline: 3.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-21_straighten-spinalcord_rkb17kp1
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-21_straighten-spinalcord_rkb17kp1/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-21_straighten-spinalcord_rkb17kp1/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-21_straighten-spinalcord_rkb17kp1/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-21_straighten-spinalcord_rkb17kp1
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-20_smooth-spinalcord_aqzvjg91

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-40-20_smooth-spinalcord_aqzvjg91

Finished! Elapsed time: 39s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/sub-MS1_M1980_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/sub-MS1_M1980_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-41-23_deepseg-sc_4xc4t475)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-42-42_optic-detect-centerline_wf7rgol0)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-42-42_optic-detect-centerline_wf7rgol0
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #39[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-41-23_deepseg-sc_4xc4t475
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/sub-MS1_M1980_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/sub-MS1_M1980_MPRAGE_Avanto2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-00_create-mask_nwqum8rb)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-00_create-mask_nwqum8rb

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/sub-MS1_M1980_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/sub-MS1_M1980_MPRAGE_Avanto2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_crop.nii.gz
--

Bounding box: x=[112, 150], y=[81, 126], z=[0, 39]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/sub-MS1_M1980_MPRAGE_Avanto2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-06_smooth-spinalcord_msmgyv2l)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-06_smooth-spinalcord_msmgyv2l/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-06_smooth-spinalcord_msmgyv2l/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-07_straighten-spinalcord_zi4yxo3d)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.09 mm
Error on approximation = 0.06 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 57.80831480578457
Size of spinal cord in z direction: 56.96636090442067
Ratio length/size: 1.0147798435426927
Safe zone boundaries (curved space): [-107.41198576976997, -50.4456248653493]
Safe zone boundaries (straight space): [-107.83296272045192, -50.024647914667355]
Pad input volume to account for spinal cord length...
Time to generate centerline: 5.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-07_straighten-spinalcord_zi4yxo3d
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-07_straighten-spinalcord_zi4yxo3d/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-07_straighten-spinalcord_zi4yxo3d/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-07_straighten-spinalcord_zi4yxo3d/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-07_straighten-spinalcord_zi4yxo3d
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-06_smooth-spinalcord_msmgyv2l

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-06_smooth-spinalcord_msmgyv2l

Finished! Elapsed time: 38s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Avanto2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/sub-MS1_M1980_FLAIR_Trio.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/sub-MS1_M1980_FLAIR_Trio.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-48_deepseg-sc_q02j9cgj)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-45-24_optic-detect-centerline_ivivu2l2)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mTo avoid intensity overflow due to convertion to +uint16+, intensity will be rescaled to the maximum quantization scale[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-45-24_optic-detect-centerline_ivivu2l2
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #171[0m
[33mRemoving small objects above slice #171[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-43-48_deepseg-sc_q02j9cgj

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/sub-MS1_M1980_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/sub-MS1_M1980_FLAIR_Trio.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-46-47_create-mask_pu76_wiu)

Orientation:
  AIL

Dimensions:
(160, 512, 512, 1, 1.0, 0.48828122, 0.48828125, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-46-47_create-mask_pu76_wiu

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/sub-MS1_M1980_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/sub-MS1_M1980_FLAIR_Trio.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_crop.nii.gz
--

Bounding box: x=[247, 349], y=[0, 172], z=[59, 96]
Cropping the image...

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/sub-MS1_M1980_FLAIR_Trio.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-47-02_smooth-spinalcord_uysh7_03)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-47-02_smooth-spinalcord_uysh7_03/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-47-02_smooth-spinalcord_uysh7_03/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-47-05_straighten-spinalcord_wbozqy4o)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.68 mm
Error on approximation = 0.23 mm
Error on approximation = 0.18 mm
Error on approximation = 0.15 mm
Error on approximation = 0.14 mm
Error on approximation = 0.12 mm
Error on approximation = 0.11 mm
Error on approximation = 0.09 mm
Error on approximation = 0.08 mm
Error on approximation = 0.07 mm
Error on approximation = 0.07 mm
Create the straight space and the safe zone
Length of spinal cord: 85.16093236996383
Size of spinal cord in z direction: 83.50362652756834
Ratio length/size: 1.01984711217121
Safe zone boundaries (curved space): [-117.4299830706652, -33.92635654309686]
Safe zone boundaries (straight space): [-118.25863599186295, -33.09770362189912]
Pad input volume to account for spinal cord length...
Time to generate centerline: 16.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-47-05_straighten-spinalcord_wbozqy4o
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-47-05_straighten-spinalcord_wbozqy4o/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-47-05_straighten-spinalcord_wbozqy4o/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-47-05_straighten-spinalcord_wbozqy4o/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-47-05_straighten-spinalcord_wbozqy4o
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-47-02_smooth-spinalcord_uysh7_03

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-47-02_smooth-spinalcord_uysh7_03

Finished! Elapsed time: 168s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_seg.nii.gz
--


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/sub-MS1_M1980_MPRAGE_Trio1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/sub-MS1_M1980_MPRAGE_Trio1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-49-54_deepseg-sc_rdeqfkh2)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-19_optic-detect-centerline_elobfb0u)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-19_optic-detect-centerline_elobfb0u
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:2[0m
[33mFilling a hole in the segmentation around z_slice #:6[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 4[0m
[33m
No properties for slice: 7[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-49-54_deepseg-sc_rdeqfkh2

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/sub-MS1_M1980_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/sub-MS1_M1980_MPRAGE_Trio1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-49_create-mask_nl215m0g)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.9726563, 0.9726563, 1.5000001, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-49_create-mask_nl215m0g

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/sub-MS1_M1980_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/sub-MS1_M1980_MPRAGE_Trio1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 34], y=[223, 256], z=[1, 10]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/sub-MS1_M1980_MPRAGE_Trio1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-55_smooth-spinalcord_zdmhfzdb)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-55_smooth-spinalcord_zdmhfzdb/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-55_smooth-spinalcord_zdmhfzdb/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-56_straighten-spinalcord_xy7z2io9)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 4.54 mm
Error on approximation = 1.84 mm
[33mNURBS instability -> wrong reconstruction[0m
Error on approximation = 1.85 mm
Create the straight space and the safe zone
Length of spinal cord: 19.771631605272695
Size of spinal cord in z direction: 12.12798567047139
Ratio length/size: 1.6302485954787753
Safe zone boundaries (curved space): [-99.0565622036811, -86.92857653320971]
Safe zone boundaries (straight space): [-102.87838517108175, -83.10675356580906]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-56_straighten-spinalcord_xy7z2io9
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-56_straighten-spinalcord_xy7z2io9/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-56_straighten-spinalcord_xy7z2io9/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-56_straighten-spinalcord_xy7z2io9/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-56_straighten-spinalcord_xy7z2io9
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-55_smooth-spinalcord_zdmhfzdb

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-50-55_smooth-spinalcord_zdmhfzdb

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/sub-MS1_M1980_MPRAGE_Trio2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/sub-MS1_M1980_MPRAGE_Trio2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-51-39_deepseg-sc_nfud1dj0)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-04_optic-detect-centerline_75cny79i)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-04_optic-detect-centerline_75cny79i
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:0[0m
[33mFilling a hole in the segmentation around z_slice #:5[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 1[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 6[0m
[33m
No properties for slice: 7[0m
[33m
No properties for slice: 8[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-51-39_deepseg-sc_nfud1dj0
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/sub-MS1_M1980_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/sub-MS1_M1980_MPRAGE_Trio2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-31_create-mask_61tl17zf)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-31_create-mask_61tl17zf

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/sub-MS1_M1980_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/sub-MS1_M1980_MPRAGE_Trio2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 43], y=[221, 256], z=[0, 10]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/sub-MS1_M1980_MPRAGE_Trio2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-38_smooth-spinalcord_1182u4e2)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-38_smooth-spinalcord_1182u4e2/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-38_smooth-spinalcord_1182u4e2/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-39_straighten-spinalcord_51t5l_tb)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 6.78 mm
Error on approximation = 1.29 mm
Error on approximation = 2.13 mm
Error on approximation = 1.31 mm
Error on approximation = 1.1 mm
Create the straight space and the safe zone
Length of spinal cord: 26.051624494270264
Size of spinal cord in z direction: 13.43663698836393
Ratio length/size: 1.938850064702266
Safe zone boundaries (curved space): [-88.60666150735183, -75.1700245189879]
Safe zone boundaries (straight space): [-94.914155260305, -68.86253076603472]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-39_straighten-spinalcord_51t5l_tb
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-39_straighten-spinalcord_51t5l_tb/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-39_straighten-spinalcord_51t5l_tb/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-39_straighten-spinalcord_51t5l_tb/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-39_straighten-spinalcord_51t5l_tb
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-38_smooth-spinalcord_1182u4e2

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-52-38_smooth-spinalcord_1182u4e2

Finished! Elapsed time: 42s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS1/ses-Trio2/anat/anat_flat.nii.gz: No such file or directory
Processing subject in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/sub-MS2_M1974_FLAIR_Aera.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/sub-MS2_M1974_FLAIR_Aera.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-53-23_deepseg-sc_3d7e1ujk)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-55-32_optic-detect-centerline_roq7os5s)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-55-32_optic-detect-centerline_roq7os5s
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #70[0m
[33mRemoving small objects above slice #70[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-53-23_deepseg-sc_3d7e1ujk
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/sub-MS2_M1974_FLAIR_Aera.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/sub-MS2_M1974_FLAIR_Aera.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-00_create-mask_68kl8_y3)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 0.99999994, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-00_create-mask_68kl8_y3

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/sub-MS2_M1974_FLAIR_Aera.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/sub-MS2_M1974_FLAIR_Aera.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_crop.nii.gz
--

Bounding box: x=[114, 156], y=[0, 71], z=[74, 112]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/sub-MS2_M1974_FLAIR_Aera.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-07_smooth-spinalcord_1poujb3v)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-07_smooth-spinalcord_1poujb3v/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-07_smooth-spinalcord_1poujb3v/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-07_straighten-spinalcord_vmg8wvr3)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.09 mm
Error on approximation = 0.06 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 71.83740126654565
Size of spinal cord in z direction: 70.99590470464469
Ratio length/size: 1.0118527479211898
Safe zone boundaries (curved space): [-134.48966546747369, -63.493760762829]
Safe zone boundaries (straight space): [-134.91041374842416, -63.073012481878514]
Pad input volume to account for spinal cord length...
Time to generate centerline: 107.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-07_straighten-spinalcord_vmg8wvr3
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-07_straighten-spinalcord_vmg8wvr3/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-07_straighten-spinalcord_vmg8wvr3/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-07_straighten-spinalcord_vmg8wvr3/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-07_straighten-spinalcord_vmg8wvr3
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-07_smooth-spinalcord_1poujb3v

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-07_smooth-spinalcord_1poujb3v

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/sub-MS2_M1974_MPRAGE_Aera1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/sub-MS2_M1974_MPRAGE_Aera1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-51_deepseg-sc_d4vc49p2)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-57-52_optic-detect-centerline_ccifqzbu)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-57-52_optic-detect-centerline_ccifqzbu
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #50[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-56-51_deepseg-sc_d4vc49p2
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/sub-MS2_M1974_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/sub-MS2_M1974_MPRAGE_Aera1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-20_create-mask_csqcy0y8)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-20_create-mask_csqcy0y8

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/sub-MS2_M1974_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/sub-MS2_M1974_MPRAGE_Aera1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_crop.nii.gz
--

Bounding box: x=[90, 133], y=[68, 107], z=[0, 50]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/sub-MS2_M1974_MPRAGE_Aera1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-27_smooth-spinalcord_lwx_xehg)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-27_smooth-spinalcord_lwx_xehg/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-27_smooth-spinalcord_lwx_xehg/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-28_straighten-spinalcord_zpnk3d2i)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.28 mm
Error on approximation = 0.09 mm
Error on approximation = 0.05 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 74.08921239901741
Size of spinal cord in z direction: 73.08054382497288
Ratio length/size: 1.0138021492623301
Safe zone boundaries (curved space): [-133.96017658292743, -60.87963275795455]
Safe zone boundaries (straight space): [-134.4645108699497, -60.375298470932286]
Pad input volume to account for spinal cord length...
Time to generate centerline: 5.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-28_straighten-spinalcord_zpnk3d2i
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-28_straighten-spinalcord_zpnk3d2i/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-28_straighten-spinalcord_zpnk3d2i/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-28_straighten-spinalcord_zpnk3d2i/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-28_straighten-spinalcord_zpnk3d2i
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-27_smooth-spinalcord_lwx_xehg

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-58-27_smooth-spinalcord_lwx_xehg

Finished! Elapsed time: 36s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/sub-MS2_M1974_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/sub-MS2_M1974_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-59-06_deepseg-sc_5abgjskn)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-20_optic-detect-centerline_1b0b72py)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-20_optic-detect-centerline_1b0b72py
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #49[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_12-59-06_deepseg-sc_5abgjskn
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/sub-MS2_M1974_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/sub-MS2_M1974_MPRAGE_Aera2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-42_create-mask_4chrf988)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-42_create-mask_4chrf988

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/sub-MS2_M1974_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/sub-MS2_M1974_MPRAGE_Aera2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_crop.nii.gz
--

Bounding box: x=[90, 132], y=[70, 107], z=[0, 49]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/sub-MS2_M1974_MPRAGE_Aera2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-49_smooth-spinalcord_tn9t83yt)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-49_smooth-spinalcord_tn9t83yt/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-49_smooth-spinalcord_tn9t83yt/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-49_straighten-spinalcord_mv18n_60)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.06 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Error on approximation = 0.01 mm
Create the straight space and the safe zone
Length of spinal cord: 72.30836676961027
Size of spinal cord in z direction: 71.34715352773489
Ratio length/size: 1.0134723418433467
Safe zone boundaries (curved space): [-133.6999179732254, -62.35276444549052]
Safe zone boundaries (straight space): [-134.1805245941631, -61.87215782455283]
Pad input volume to account for spinal cord length...
Time to generate centerline: 5.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-49_straighten-spinalcord_mv18n_60
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-49_straighten-spinalcord_mv18n_60/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-49_straighten-spinalcord_mv18n_60/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-49_straighten-spinalcord_mv18n_60/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-49_straighten-spinalcord_mv18n_60
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-49_smooth-spinalcord_tn9t83yt

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-00-49_smooth-spinalcord_tn9t83yt

Finished! Elapsed time: 35s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Aera2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/sub-MS2_M1974_FLAIR_Avanto.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/sub-MS2_M1974_FLAIR_Avanto.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-01-27_deepseg-sc_fml4epdu)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-03-43_optic-detect-centerline_a4vioyi6)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-03-43_optic-detect-centerline_a4vioyi6
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #93[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-01-27_deepseg-sc_fml4epdu
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/sub-MS2_M1974_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/sub-MS2_M1974_FLAIR_Avanto.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-06_create-mask_thjz_6tg)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-06_create-mask_thjz_6tg

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/sub-MS2_M1974_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/sub-MS2_M1974_FLAIR_Avanto.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_crop.nii.gz
--

Bounding box: x=[120, 160], y=[0, 93], z=[71, 113]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/sub-MS2_M1974_FLAIR_Avanto.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-12_smooth-spinalcord_5rta6t2v)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-12_smooth-spinalcord_5rta6t2v/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-12_smooth-spinalcord_5rta6t2v/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-12_straighten-spinalcord_hfgsyxf4)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.22 mm
Error on approximation = 0.12 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 94.18419866206091
Size of spinal cord in z direction: 93.66139285567186
Ratio length/size: 1.00558187093368
Safe zone boundaries (curved space): [-122.41791724131443, -28.756524385642564]
Safe zone boundaries (straight space): [-122.67932014450895, -28.49512148244804]
Pad input volume to account for spinal cord length...
Time to generate centerline: 8.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-12_straighten-spinalcord_hfgsyxf4
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-12_straighten-spinalcord_hfgsyxf4/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-12_straighten-spinalcord_hfgsyxf4/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-12_straighten-spinalcord_hfgsyxf4/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-12_straighten-spinalcord_hfgsyxf4
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-12_smooth-spinalcord_5rta6t2v

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-04-12_smooth-spinalcord_5rta6t2v

Finished! Elapsed time: 39s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/sub-MS2_M1974_MPRAGE_Avanto1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/sub-MS2_M1974_MPRAGE_Avanto1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-05-11_deepseg-sc_tf8c4z9n)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-05-56_optic-detect-centerline_q23u6usm)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-05-56_optic-detect-centerline_q23u6usm
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 1, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-05-11_deepseg-sc_tf8c4z9n
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/sub-MS2_M1974_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/sub-MS2_M1974_MPRAGE_Avanto1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-17_create-mask_wretwb24)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726563, 1.5000001, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-17_create-mask_wretwb24

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/sub-MS2_M1974_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/sub-MS2_M1974_MPRAGE_Avanto1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_crop.nii.gz
--

Bounding box: x=[105, 149], y=[75, 113], z=[1, 52]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/sub-MS2_M1974_MPRAGE_Avanto1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-24_smooth-spinalcord_mlgy71dy)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-24_smooth-spinalcord_mlgy71dy/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-24_smooth-spinalcord_mlgy71dy/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-25_straighten-spinalcord_u85ppzc3)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.09 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 75.60061779977603
Size of spinal cord in z direction: 75.14467459753573
Ratio length/size: 1.0060675384474318
Safe zone boundaries (curved space): [-102.19149492347232, -27.046820325936594]
Safe zone boundaries (straight space): [-102.41946652459248, -26.81884872481644]
Pad input volume to account for spinal cord length...
Time to generate centerline: 8.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-25_straighten-spinalcord_u85ppzc3
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-25_straighten-spinalcord_u85ppzc3/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-25_straighten-spinalcord_u85ppzc3/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-25_straighten-spinalcord_u85ppzc3/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-25_straighten-spinalcord_u85ppzc3
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-24_smooth-spinalcord_mlgy71dy

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-06-24_smooth-spinalcord_mlgy71dy

Finished! Elapsed time: 41s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/sub-MS2_M1974_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/sub-MS2_M1974_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-07-33_deepseg-sc_k08v7f2o)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-23_optic-detect-centerline_iiix3bkj)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-23_optic-detect-centerline_iiix3bkj
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-07-33_deepseg-sc_k08v7f2o
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/sub-MS2_M1974_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/sub-MS2_M1974_MPRAGE_Avanto2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-42_create-mask_r7siahc0)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-42_create-mask_r7siahc0

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/sub-MS2_M1974_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/sub-MS2_M1974_MPRAGE_Avanto2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_crop.nii.gz
--

Bounding box: x=[105, 148], y=[76, 114], z=[1, 51]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/sub-MS2_M1974_MPRAGE_Avanto2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-48_smooth-spinalcord_mmqouv1x)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-48_smooth-spinalcord_mmqouv1x/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-48_smooth-spinalcord_mmqouv1x/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-49_straighten-spinalcord_4whay8_m)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.68 mm
Error on approximation = 0.23 mm
Error on approximation = 0.13 mm
Error on approximation = 0.07 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 74.32882963786888
Size of spinal cord in z direction: 73.43166907287528
Ratio length/size: 1.012217624579706
Safe zone boundaries (curved space): [-101.93831288502939, -28.50664381215411]
Safe zone boundaries (straight space): [-102.38689316752618, -28.05806352965731]
Pad input volume to account for spinal cord length...
Time to generate centerline: 4.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-49_straighten-spinalcord_4whay8_m
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-49_straighten-spinalcord_4whay8_m/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-49_straighten-spinalcord_4whay8_m/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-49_straighten-spinalcord_4whay8_m/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-49_straighten-spinalcord_4whay8_m
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-48_smooth-spinalcord_mmqouv1x

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-08-48_smooth-spinalcord_mmqouv1x

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Avanto2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/sub-MS2_M1974_FLAIR_Trio.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/sub-MS2_M1974_FLAIR_Trio.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-09-48_deepseg-sc_tbirghu6)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-11-23_optic-detect-centerline_najqygoj)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-11-23_optic-detect-centerline_najqygoj
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-09-48_deepseg-sc_tbirghu6
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/sub-MS2_M1974_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/sub-MS2_M1974_FLAIR_Trio.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-29_create-mask_ps336la3)

Orientation:
  AIL

Dimensions:
(160, 512, 512, 1, 0.99999994, 0.48828122, 0.48828122, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-29_create-mask_ps336la3

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/sub-MS2_M1974_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/sub-MS2_M1974_FLAIR_Trio.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_crop.nii.gz
--

Bounding box: x=[241, 345], y=[0, 164], z=[61, 103]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/sub-MS2_M1974_FLAIR_Trio.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-43_smooth-spinalcord__g77sr_h)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-43_smooth-spinalcord__g77sr_h/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-43_smooth-spinalcord__g77sr_h/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-47_straighten-spinalcord_fp8fxjgj)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.7 mm
Error on approximation = 0.42 mm
Error on approximation = 0.27 mm
Error on approximation = 0.18 mm
Error on approximation = 0.16 mm
Error on approximation = 0.17 mm
Error on approximation = 0.2 mm
Error on approximation = 0.22 mm
Error on approximation = 0.23 mm
Error on approximation = 0.23 mm
Error on approximation = 0.21 mm
Error on approximation = 0.19 mm
Error on approximation = 0.17 mm
Error on approximation = 0.15 mm
Error on approximation = 0.13 mm
Error on approximation = 0.13 mm
Error on approximation = 0.12 mm
Error on approximation = 0.12 mm
Error on approximation = 0.11 mm
Create the straight space and the safe zone
Length of spinal cord: 85.34013085302747
Size of spinal cord in z direction: 79.60213492376977
Ratio length/size: 1.0720834426708863
Safe zone boundaries (curved space): [-112.26751851327911, -32.66538358950935]
Safe zone boundaries (straight space): [-115.13651647790797, -29.796385624880493]
Pad input volume to account for spinal cord length...
Time to generate centerline: 25.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-47_straighten-spinalcord_fp8fxjgj
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-47_straighten-spinalcord_fp8fxjgj/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-47_straighten-spinalcord_fp8fxjgj/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-47_straighten-spinalcord_fp8fxjgj/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-47_straighten-spinalcord_fp8fxjgj
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-43_smooth-spinalcord__g77sr_h

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-12-43_smooth-spinalcord__g77sr_h

Finished! Elapsed time: 168s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/sub-MS2_M1974_MPRAGE_Trio1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/sub-MS2_M1974_MPRAGE_Trio1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-15-36_deepseg-sc_6625dqov)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-16-02_optic-detect-centerline_vrse5wgx)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-16-02_optic-detect-centerline_vrse5wgx
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 6[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-15-36_deepseg-sc_6625dqov
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/sub-MS2_M1974_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/sub-MS2_M1974_MPRAGE_Trio1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-16-23_create-mask_cu8ljrob)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-16-23_create-mask_cu8ljrob

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/sub-MS2_M1974_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/sub-MS2_M1974_MPRAGE_Trio1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 34], y=[217, 256], z=[4, 8]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/sub-MS2_M1974_MPRAGE_Trio1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-16-30_smooth-spinalcord_eo_b7mae)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-16-30_smooth-spinalcord_eo_b7mae/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-16-30_smooth-spinalcord_eo_b7mae/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-16-31_straighten-spinalcord_xgdzlc1w)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 288, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 217, in main
    sct_straighten_spinalcord.main([
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_straighten_spinalcord.py", line 261, in main
    fname_straight = sc_straight.straighten()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/straightening.py", line 155, in straighten
    _, arr_ctl_phys, arr_ctl_der_phys, _ = get_centerline(img_ctl, self.param_centerline,
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/centerline/core.py", line 168, in get_centerline
    z_centerline_deriv, error = b_spline_nurbs(x_mean_interp, y_mean_interp, z_ref, nbControl=None,
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/centerline/nurbs.py", line 991, in b_spline_nurbs
    nurbs = NURBS(degree, point_number, data, False, nbControl, verbose, all_slices=all_slices, twodim=twodim)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/centerline/nurbs.py", line 103, in __init__
    raise ArithmeticError('There are too few points to compute. The number of points of the curve must '
ArithmeticError: There are too few points to compute. The number of points of the curve must be strictly superior to degre + 2, in this case: 5. Either change degree to a lower value, or add points to the curve.

--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/sub-MS2_M1974_MPRAGE_Trio2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/sub-MS2_M1974_MPRAGE_Trio2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-16-35_deepseg-sc_kcn9amk8)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-02_optic-detect-centerline_rj5q7kiv)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-02_optic-detect-centerline_rj5q7kiv
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #8[0m
[33mRemoving small objects above slice #8[0m
[33mFilling a hole in the segmentation around z_slice #:0[0m
[33mFilling a hole in the segmentation around z_slice #:5[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 1[0m
[33m
No properties for slice: 6[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-16-35_deepseg-sc_kcn9amk8
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/sub-MS2_M1974_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/sub-MS2_M1974_MPRAGE_Trio2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-27_create-mask_dremiwm6)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.9726563, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-27_create-mask_dremiwm6

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/sub-MS2_M1974_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/sub-MS2_M1974_MPRAGE_Trio2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 42], y=[217, 256], z=[0, 9]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/sub-MS2_M1974_MPRAGE_Trio2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-33_smooth-spinalcord_bcc_m7am)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-33_smooth-spinalcord_bcc_m7am/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-33_smooth-spinalcord_bcc_m7am/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-34_straighten-spinalcord_g8_2qkmy)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 25.56 mm
Error on approximation = 3.66 mm
Error on approximation = 12.64 mm
Error on approximation = 4.08 mm
Create the straight space and the safe zone
Length of spinal cord: 41.20875386053059
Size of spinal cord in z direction: 13.030488213650585
Ratio length/size: 3.1624873285531074
Safe zone boundaries (curved space): [-65.69040187448263, -52.659913660832046]
Safe zone boundaries (straight space): [-79.77953469792263, -38.57078083739204]
Pad input volume to account for spinal cord length...
Time to generate centerline: 2.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-34_straighten-spinalcord_g8_2qkmy
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-34_straighten-spinalcord_g8_2qkmy/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-34_straighten-spinalcord_g8_2qkmy/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-34_straighten-spinalcord_g8_2qkmy/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-34_straighten-spinalcord_g8_2qkmy
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-33_smooth-spinalcord_bcc_m7am

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-17-33_smooth-spinalcord_bcc_m7am

Finished! Elapsed time: 41s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS2/ses-Trio2/anat/anat_flat.nii.gz: No such file or directory
Processing subject in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/sub-MS3_M1961_FLAIR_Aera.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/sub-MS3_M1961_FLAIR_Aera.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-18-18_deepseg-sc_jtko_k70)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-21-38_optic-detect-centerline_7orp0wx0)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-21-38_optic-detect-centerline_7orp0wx0
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #68[0m
[33mRemoving small objects above slice #68[0m
[33mRemoving small objects above slice #68[0m
[33mRemoving small objects above slice #68[0m
[33mRemoving small objects above slice #68[0m
[33mRemoving small objects above slice #68[0m
[33mRemoving small objects above slice #68[0m
[33mRemoving small objects above slice #68[0m
[33mRemoving small objects above slice #68[0m
[33mRemoving small objects above slice #68[0m
[33mRemoving small objects above slice #68[0m
[33mRemoving small objects above slice #68[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-18-18_deepseg-sc_jtko_k70
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/sub-MS3_M1961_FLAIR_Aera.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/sub-MS3_M1961_FLAIR_Aera.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-06_create-mask_bwgnug5w)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-06_create-mask_bwgnug5w

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/sub-MS3_M1961_FLAIR_Aera.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/sub-MS3_M1961_FLAIR_Aera.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_crop.nii.gz
--

Bounding box: x=[104, 151], y=[0, 69], z=[69, 105]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/sub-MS3_M1961_FLAIR_Aera.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-12_smooth-spinalcord_n4tbl5j9)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-12_smooth-spinalcord_n4tbl5j9/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-12_smooth-spinalcord_n4tbl5j9/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-12_straighten-spinalcord_xa0rq5_m)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.31 mm
Error on approximation = 0.2 mm
Error on approximation = 0.16 mm
Error on approximation = 0.1 mm
Error on approximation = 0.07 mm
Error on approximation = 0.07 mm
Error on approximation = 0.07 mm
Error on approximation = 0.07 mm
Error on approximation = 0.08 mm
Error on approximation = 0.08 mm
Error on approximation = 0.16 mm
Error on approximation = 0.15 mm
Error on approximation = 0.14 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 72.93336360716819
Size of spinal cord in z direction: 69.0625
Ratio length/size: 1.0560487038142001
Safe zone boundaries (curved space): [-159.8318328857422, -90.76933288574219]
Safe zone boundaries (straight space): [-161.76726468932628, -88.83390108215809]
Pad input volume to account for spinal cord length...
Time to generate centerline: 6.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-12_straighten-spinalcord_xa0rq5_m
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-12_straighten-spinalcord_xa0rq5_m/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-12_straighten-spinalcord_xa0rq5_m/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-12_straighten-spinalcord_xa0rq5_m/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-12_straighten-spinalcord_xa0rq5_m
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-12_smooth-spinalcord_n4tbl5j9

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-12_smooth-spinalcord_n4tbl5j9

Finished! Elapsed time: 43s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/sub-MS3_M1961_MPRAGE_Aera1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/sub-MS3_M1961_MPRAGE_Aera1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-58_deepseg-sc_zok_g5no)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-19_optic-detect-centerline_yjl7dr4n)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-19_optic-detect-centerline_yjl7dr4n
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #7[0m
[33mRemoving small objects above slice #7[0m
[33mFilling a hole in the segmentation around z_slice #:3[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 4[0m
[33m
No properties for slice: 5[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-22-58_deepseg-sc_zok_g5no
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/sub-MS3_M1961_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/sub-MS3_M1961_MPRAGE_Aera1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-42_create-mask_0i247u22)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-42_create-mask_0i247u22

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/sub-MS3_M1961_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/sub-MS3_M1961_MPRAGE_Aera1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 31], y=[221, 256], z=[1, 8]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/sub-MS3_M1961_MPRAGE_Aera1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-47_smooth-spinalcord_7u81o93f)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-47_smooth-spinalcord_7u81o93f/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-47_smooth-spinalcord_7u81o93f/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-48_straighten-spinalcord_g86q59c9)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.64 mm
Error on approximation = 1.43 mm
Create the straight space and the safe zone
Length of spinal cord: 12.207178968948194
Size of spinal cord in z direction: 6.2802856608048785
Ratio length/size: 1.943729891959043
Safe zone boundaries (curved space): [-110.36195485742152, -104.08166919661664]
Safe zone boundaries (straight space): [-113.32540151149318, -101.11822254254498]
Pad input volume to account for spinal cord length...
Time to generate centerline: 10.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-48_straighten-spinalcord_g86q59c9
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-48_straighten-spinalcord_g86q59c9/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-48_straighten-spinalcord_g86q59c9/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-48_straighten-spinalcord_g86q59c9/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-48_straighten-spinalcord_g86q59c9
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-47_smooth-spinalcord_7u81o93f

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-23-47_smooth-spinalcord_7u81o93f

Finished! Elapsed time: 34s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/sub-MS3_M1961_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/sub-MS3_M1961_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-24-25_deepseg-sc_qwhkxw9e)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-24-49_optic-detect-centerline_3towelhp)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-24-49_optic-detect-centerline_3towelhp
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:1[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 4[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-24-25_deepseg-sc_qwhkxw9e
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/sub-MS3_M1961_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/sub-MS3_M1961_MPRAGE_Aera2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-12_create-mask_omxrcww7)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-12_create-mask_omxrcww7

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/sub-MS3_M1961_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/sub-MS3_M1961_MPRAGE_Aera2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_crop.nii.gz
--

Bounding box: x=[90, 131], y=[61, 100], z=[0, 6]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/sub-MS3_M1961_MPRAGE_Aera2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-19_smooth-spinalcord__wucuz3o)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-19_smooth-spinalcord__wucuz3o/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-19_smooth-spinalcord__wucuz3o/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-19_straighten-spinalcord_s9ko5xto)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.27 mm
Create the straight space and the safe zone
Length of spinal cord: 9.70413249391352
Size of spinal cord in z direction: 7.754393630683268
Ratio length/size: 1.2514366636632106
Safe zone boundaries (curved space): [-166.42764650364035, -158.67325287295708]
Safe zone boundaries (straight space): [-167.40251593525548, -157.69838344134195]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-19_straighten-spinalcord_s9ko5xto
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-19_straighten-spinalcord_s9ko5xto/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-19_straighten-spinalcord_s9ko5xto/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-19_straighten-spinalcord_s9ko5xto/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-19_straighten-spinalcord_s9ko5xto
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-19_smooth-spinalcord__wucuz3o

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-19_smooth-spinalcord__wucuz3o

Finished! Elapsed time: 33s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Aera2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/sub-MS3_M1961_FLAIR_Avanto.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/sub-MS3_M1961_FLAIR_Avanto.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-55_deepseg-sc_9melcr9k)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-29-24_optic-detect-centerline_j4ydnlxr)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-29-24_optic-detect-centerline_j4ydnlxr
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #85[0m
[33mRemoving small objects above slice #85[0m
[33mRemoving small objects above slice #85[0m
[33mRemoving small objects above slice #85[0m
[33mRemoving small objects above slice #85[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-25-55_deepseg-sc_9melcr9k
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/sub-MS3_M1961_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/sub-MS3_M1961_FLAIR_Avanto.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-29-59_create-mask_5zufixtv)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-29-59_create-mask_5zufixtv

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/sub-MS3_M1961_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/sub-MS3_M1961_FLAIR_Avanto.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_crop.nii.gz
--

Bounding box: x=[110, 157], y=[0, 85], z=[71, 109]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/sub-MS3_M1961_FLAIR_Avanto.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-09_smooth-spinalcord_brkwo0nm)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-09_smooth-spinalcord_brkwo0nm/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-09_smooth-spinalcord_brkwo0nm/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-09_straighten-spinalcord_2fy3yh9c)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 2.82 mm
Error on approximation = 0.54 mm
Error on approximation = 0.38 mm
Error on approximation = 0.21 mm
Error on approximation = 0.2 mm
Error on approximation = 0.21 mm
Error on approximation = 0.21 mm
Error on approximation = 0.2 mm
Error on approximation = 0.18 mm
Error on approximation = 0.18 mm
Error on approximation = 0.18 mm
Create the straight space and the safe zone
Length of spinal cord: 89.87684832989271
Size of spinal cord in z direction: 85.29957243844886
Ratio length/size: 1.053661182120775
Safe zone boundaries (curved space): [-130.90751020266404, -45.60793776421518]
Safe zone boundaries (straight space): [-133.19614814838596, -43.319299818493256]
Pad input volume to account for spinal cord length...
Time to generate centerline: 8.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-09_straighten-spinalcord_2fy3yh9c
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-09_straighten-spinalcord_2fy3yh9c/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-09_straighten-spinalcord_2fy3yh9c/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-09_straighten-spinalcord_2fy3yh9c/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-09_straighten-spinalcord_2fy3yh9c
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-09_smooth-spinalcord_brkwo0nm

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-09_smooth-spinalcord_brkwo0nm

Finished! Elapsed time: 42s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/sub-MS3_M1961_MPRAGE_Avanto1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/sub-MS3_M1961_MPRAGE_Avanto1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-56_deepseg-sc_b9ufvvtb)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-06_optic-detect-centerline_7iim39pd)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-06_optic-detect-centerline_7iim39pd
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 2, Removing them[0m
[33mFound isolated voxels on slice 2, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-30-56_deepseg-sc_b9ufvvtb
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/sub-MS3_M1961_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/sub-MS3_M1961_MPRAGE_Avanto1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-39_create-mask_ccelt6s_)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-39_create-mask_ccelt6s_

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/sub-MS3_M1961_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/sub-MS3_M1961_MPRAGE_Avanto1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_crop.nii.gz
--

Bounding box: x=[112, 156], y=[49, 102], z=[3, 50]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/sub-MS3_M1961_MPRAGE_Avanto1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-47_smooth-spinalcord_87qn22e0)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-47_smooth-spinalcord_87qn22e0/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-47_smooth-spinalcord_87qn22e0/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-47_straighten-spinalcord_rqvy2giw)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.35 mm
Error on approximation = 0.22 mm
Error on approximation = 0.14 mm
Error on approximation = 0.12 mm
Error on approximation = 0.11 mm
Error on approximation = 0.11 mm
Create the straight space and the safe zone
Length of spinal cord: 72.41458366285276
Size of spinal cord in z direction: 70.8516825361296
Ratio length/size: 1.022058772223598
Safe zone boundaries (curved space): [-115.99389679210908, -45.14221425597948]
Safe zone boundaries (straight space): [-116.77534735547067, -44.3607636926179]
Pad input volume to account for spinal cord length...
Time to generate centerline: 8.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-47_straighten-spinalcord_rqvy2giw
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-47_straighten-spinalcord_rqvy2giw/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-47_straighten-spinalcord_rqvy2giw/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-47_straighten-spinalcord_rqvy2giw/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-47_straighten-spinalcord_rqvy2giw
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-47_smooth-spinalcord_87qn22e0

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-32-47_smooth-spinalcord_87qn22e0

Finished! Elapsed time: 44s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/sub-MS3_M1961_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/sub-MS3_M1961_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-33-34_deepseg-sc_3c19ba92)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-01_optic-detect-centerline_060mivf8)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-01_optic-detect-centerline_060mivf8
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:4[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 4[0m
[33m
No properties for slice: 5[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-33-34_deepseg-sc_3c19ba92
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/sub-MS3_M1961_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/sub-MS3_M1961_MPRAGE_Avanto2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-29_create-mask_qjo5elpu)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-29_create-mask_qjo5elpu

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/sub-MS3_M1961_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/sub-MS3_M1961_MPRAGE_Avanto2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 32], y=[217, 256], z=[2, 9]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/sub-MS3_M1961_MPRAGE_Avanto2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-36_smooth-spinalcord_9c8p1hn4)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-36_smooth-spinalcord_9c8p1hn4/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-36_smooth-spinalcord_9c8p1hn4/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-37_straighten-spinalcord_amtnbcpi)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 7.81 mm
Error on approximation = 3.84 mm
Create the straight space and the safe zone
Length of spinal cord: 21.390950750195607
Size of spinal cord in z direction: 9.140290293612992
Ratio length/size: 2.3402922733365563
Safe zone boundaries (curved space): [-75.68276720149899, -66.542476907886]
Safe zone boundaries (straight space): [-81.8080974297903, -60.417146679594694]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-37_straighten-spinalcord_amtnbcpi
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-37_straighten-spinalcord_amtnbcpi/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-37_straighten-spinalcord_amtnbcpi/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-37_straighten-spinalcord_amtnbcpi/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-37_straighten-spinalcord_amtnbcpi
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-36_smooth-spinalcord_9c8p1hn4

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-34-36_smooth-spinalcord_9c8p1hn4

Finished! Elapsed time: 38s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Avanto2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/sub-MS3_M1961_FLAIR_Trio.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/sub-MS3_M1961_FLAIR_Trio.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-35-18_deepseg-sc_vy0r0l11)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-42-03_optic-detect-centerline_x40sdpb3)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-42-03_optic-detect-centerline_x40sdpb3
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mRemoving small objects above slice #137[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 6[0m
/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/fromnumeric.py:3432: RuntimeWarning: Mean of empty slice.
  return _methods._mean(a, axis=axis, dtype=dtype,
/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/_methods.py:190: RuntimeWarning: invalid value encountered in double_scalars
  ret = ret.dtype.type(ret / rcount)
[33mFound isolated voxels on slice 5, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-35-18_deepseg-sc_vy0r0l11
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/sub-MS3_M1961_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/sub-MS3_M1961_FLAIR_Trio.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-16_create-mask_bzf91e3h)

Orientation:
  AIL

Dimensions:
(160, 512, 512, 1, 1.0, 0.48828125, 0.48828125, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-16_create-mask_bzf91e3h

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/sub-MS3_M1961_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/sub-MS3_M1961_FLAIR_Trio.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_crop.nii.gz
--

Bounding box: x=[241, 341], y=[5, 137], z=[53, 95]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/sub-MS3_M1961_FLAIR_Trio.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-32_smooth-spinalcord_11vq3ut8)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-32_smooth-spinalcord_11vq3ut8/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-32_smooth-spinalcord_11vq3ut8/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-35_straighten-spinalcord_vsjmw60r)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 1.67 mm
Error on approximation = 1.24 mm
Error on approximation = 1.12 mm
Error on approximation = 0.87 mm
Error on approximation = 0.77 mm
Error on approximation = 0.75 mm
Error on approximation = 0.66 mm
Error on approximation = 0.53 mm
Error on approximation = 0.42 mm
Error on approximation = 0.34 mm
Error on approximation = 0.29 mm
Error on approximation = 0.26 mm
Error on approximation = 0.25 mm
Error on approximation = 0.26 mm
Error on approximation = 0.28 mm
Error on approximation = 0.28 mm
Error on approximation = 0.3 mm
Error on approximation = 0.27 mm
Error on approximation = 0.24 mm
Error on approximation = 0.2 mm
Error on approximation = 0.19 mm
Error on approximation = 0.18 mm
Error on approximation = 0.17 mm
Error on approximation = 0.15 mm
Error on approximation = 0.15 mm
Error on approximation = 0.15 mm
Error on approximation = 0.14 mm
Create the straight space and the safe zone
Length of spinal cord: 73.98671690853995
Size of spinal cord in z direction: 63.58884778450111
Ratio length/size: 1.163517180862855
Safe zone boundaries (curved space): [-121.40409634138535, -57.81524855688424]
Safe zone boundaries (straight space): [-126.60303090340477, -52.61631399486483]
Pad input volume to account for spinal cord length...
Time to generate centerline: 11.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-35_straighten-spinalcord_vsjmw60r
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-35_straighten-spinalcord_vsjmw60r/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-35_straighten-spinalcord_vsjmw60r/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-35_straighten-spinalcord_vsjmw60r/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-35_straighten-spinalcord_vsjmw60r
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-32_smooth-spinalcord_11vq3ut8

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-43-32_smooth-spinalcord_11vq3ut8

Finished! Elapsed time: 178s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_crop.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_crop.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_seg.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-46-34_deepseg-sc_81z616eb)
Reorient the image to RPI, if necessary...
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/resampling.py", line 107, in resample_nib
    R[i, i] = img.shape[i] / float(shape_r[i])
ZeroDivisionError: float division by zero

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_deepseg_sc.py", line 211, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_deepseg_sc.py", line 190, in main
    deep_segmentation_spinalcord(im_image.copy(), contrast_type, ctr_algo=ctr_algo,
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/deepseg_/sc.py", line 442, in deep_segmentation_spinalcord
    resampling.resample_nib(im_image, new_size=[0.5, 0.5, im_image.dim[6]], new_size_type='mm',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/resampling.py", line 109, in resample_nib
    raise ZeroDivisionError("Destination size is zero for dimension {}. You are trying to resample to an "
ZeroDivisionError: Destination size is zero for dimension 0. You are trying to resample to an unrealistic dimension. Check your NIFTI pixdim values to make sure they are not corrupted.

--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_crop.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-46-37_create-mask_9isdmsav)

Orientation:
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
  RPI
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m

Dimensions:
(0, 1, 1, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'float64', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-46-37_create-mask_9isdmsav

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_crop.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_crop.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/cropping.py", line 116, in get_bbox_from_mask
    min(data_nonzero[0]), max(data_nonzero[0]),
ValueError: min() arg is an empty sequence
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-46-42_smooth-spinalcord_l9c6rwft)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-46-42_smooth-spinalcord_l9c6rwft/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-46-42_smooth-spinalcord_l9c6rwft/centerline.nii.gz
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-46-42_straighten-spinalcord_hl9qxb_v)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 5.35 mm
Error on approximation = 1.33 mm
Error on approximation = 4.74 mm
Error on approximation = 28.84 mm
Create the straight space and the safe zone
Length of spinal cord: 28.107442406908532
Size of spinal cord in z direction: 13.191738473936198
Ratio length/size: 2.1306852362516353
Safe zone boundaries (curved space): [-95.78329788030612, -82.59155940636992]
Safe zone boundaries (straight space): [-103.2411498467923, -75.13370743988375]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 2 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-46-42_straighten-spinalcord_hl9qxb_v
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 288, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 217, in main
    sct_straighten_spinalcord.main([
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_straighten_spinalcord.py", line 261, in main
    fname_straight = sc_straight.straighten()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/straightening.py", line 523, in straighten
    sct_apply_transfo.main(['-i', 'data.nii',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_apply_transfo.py", line 353, in main
    transform.apply()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_apply_transfo.py", line 214, in apply
    run_proc(['isct_antsApplyTransforms',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/utils/sys.py", line 349, in run_proc
    raise RuntimeError(output)
RuntimeError: ** ERROR: nifti_convert_nhdr2nim: bad dim[1]
Exception caught during reference file reading

itk::ExceptionObject (0x7fe65c904100)
Location: "unknown"
File: /Users/runner/work/build_ANTs/build_ANTs/antsbin/ITKv5/Modules/IO/NIFTI/src/itkNiftiImageIO.cxx
Line: 1025
Description: itk::ERROR: NiftiImageIO(0x7fe65ca04b10): data.nii is not recognized as a NIFTI file

file data.nii
libc++abi: terminating with uncaught exception of type itk::ExceptionObject: /Users/runner/work/build_ANTs/build_ANTs/antsbin/ITKv5/Modules/Core/Common/src/itkProcessObject.cxx:1340:
itk::ERROR: ResampleImageFilter(0x7fe65c826630): Input Primary is required but not set.

--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/t1_seg.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-25_deepseg-sc_engep3oe)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-25_optic-detect-centerline_efzvx20g)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/polynomial/polynomial.py:1362: RankWarning: The fit may be poorly conditioned
  return pu._fit(polyvander, x, y, deg, rcond, full, w)
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-25_optic-detect-centerline_efzvx20g
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-25_deepseg-sc_engep3oe
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-29_create-mask_5atimr3v)

Orientation:
  RPI

Dimensions:
(40, 37, 4, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-29_create-mask_5atimr3v

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 40], y=[0, 37], z=[0, 4]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-33_smooth-spinalcord_m3q8e6ti)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-33_smooth-spinalcord_m3q8e6ti/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-33_smooth-spinalcord_m3q8e6ti/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-33_straighten-spinalcord_ktxlzv7e)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 288, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 217, in main
    sct_straighten_spinalcord.main([
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_straighten_spinalcord.py", line 261, in main
    fname_straight = sc_straight.straighten()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/straightening.py", line 155, in straighten
    _, arr_ctl_phys, arr_ctl_der_phys, _ = get_centerline(img_ctl, self.param_centerline,
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/centerline/core.py", line 168, in get_centerline
    z_centerline_deriv, error = b_spline_nurbs(x_mean_interp, y_mean_interp, z_ref, nbControl=None,
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/centerline/nurbs.py", line 991, in b_spline_nurbs
    nurbs = NURBS(degree, point_number, data, False, nbControl, verbose, all_slices=all_slices, twodim=twodim)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/centerline/nurbs.py", line 103, in __init__
    raise ArithmeticError('There are too few points to compute. The number of points of the curve must '
ArithmeticError: There are too few points to compute. The number of points of the curve must be strictly superior to degre + 2, in this case: 5. Either change degree to a lower value, or add points to the curve.

--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS3/ses-Trio2/anat/anat_flat.nii.gz: No such file or directory
Processing subject in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-37_deepseg-sc_x9fw1wmp)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-38_optic-detect-centerline_qutz_nq1)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-38_optic-detect-centerline_qutz_nq1
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-37_deepseg-sc_x9fw1wmp
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-43_create-mask_tv5tuqpy)

Orientation:
  AIL

Dimensions:
(36, 38, 75, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-43_create-mask_tv5tuqpy

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 38], y=[0, 75], z=[0, 36]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-47_smooth-spinalcord_pwmc6jtp)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-47_smooth-spinalcord_pwmc6jtp/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-47_smooth-spinalcord_pwmc6jtp/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Reusing existing warping field which seems to be valid
cp /Users/mathilde/warp_curve2straight.nii.gz warp_curve2straight.nii.gz
cp /Users/mathilde/warp_straight2curve.nii.gz warp_straight2curve.nii.gz
cp /Users/mathilde/straight_ref.nii.gz straight_ref.nii.gz
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-47_smooth-spinalcord_pwmc6jtp/anat_rpi.nii -o anat_rpi_straight.nii -t warp_curve2straight.nii.gz -r straight_ref.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-47_smooth-spinalcord_pwmc6jtp

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-47_smooth-spinalcord_pwmc6jtp

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-47-47_smooth-spinalcord_pwmc6jtp

Finished! Elapsed time: 2s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/sub-MS4_F1967_MPRAGE_Aera1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/sub-MS4_F1967_MPRAGE_Aera1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-48-00_deepseg-sc_inxrnqc6)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-02_optic-detect-centerline_x4cx8ggl)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-02_optic-detect-centerline_x4cx8ggl
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #41[0m
[33mRemoving small objects above slice #41[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-48-00_deepseg-sc_inxrnqc6
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/sub-MS4_F1967_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/sub-MS4_F1967_MPRAGE_Aera1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-26_create-mask_bfodoomt)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-26_create-mask_bfodoomt

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/sub-MS4_F1967_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/sub-MS4_F1967_MPRAGE_Aera1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_crop.nii.gz
--

Bounding box: x=[93, 131], y=[87, 125], z=[0, 42]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/sub-MS4_F1967_MPRAGE_Aera1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-39_smooth-spinalcord_1ai6x7ow)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-39_smooth-spinalcord_1ai6x7ow/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-39_smooth-spinalcord_1ai6x7ow/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-40_straighten-spinalcord_tt2aexv9)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.09 mm
Error on approximation = 0.06 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 61.85500602151771
Size of spinal cord in z direction: 61.476412702983325
Ratio length/size: 1.0061583508517895
Safe zone boundaries (curved space): [-116.00510378986328, -54.52869108687996]
Safe zone boundaries (straight space): [-116.19440044913047, -54.339394427612774]
Pad input volume to account for spinal cord length...
Time to generate centerline: 5.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-40_straighten-spinalcord_tt2aexv9
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-40_straighten-spinalcord_tt2aexv9/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-40_straighten-spinalcord_tt2aexv9/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-40_straighten-spinalcord_tt2aexv9/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-40_straighten-spinalcord_tt2aexv9
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-39_smooth-spinalcord_1ai6x7ow

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-49-39_smooth-spinalcord_1ai6x7ow

Finished! Elapsed time: 37s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/sub-MS4_F1967_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/sub-MS4_F1967_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-50-34_deepseg-sc_u9jyzi5p)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-51-54_optic-detect-centerline_ing6qzcg)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-51-54_optic-detect-centerline_ing6qzcg
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #38[0m
[33mRemoving small objects above slice #38[0m
[33mRemoving small objects above slice #38[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-50-34_deepseg-sc_u9jyzi5p
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/sub-MS4_F1967_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/sub-MS4_F1967_MPRAGE_Aera2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-11_create-mask_oxm66f6_)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-11_create-mask_oxm66f6_

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/sub-MS4_F1967_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/sub-MS4_F1967_MPRAGE_Aera2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_crop.nii.gz
--

Bounding box: x=[95, 132], y=[86, 124], z=[0, 38]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/sub-MS4_F1967_MPRAGE_Aera2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-16_smooth-spinalcord_n_w3mbv_)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-16_smooth-spinalcord_n_w3mbv_/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-16_smooth-spinalcord_n_w3mbv_/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-16_straighten-spinalcord_i5_bkzgy)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 55.632021007589415
Size of spinal cord in z direction: 55.438541238118056
Ratio length/size: 1.0034899866618123
Safe zone boundaries (curved space): [-116.00080643168656, -60.5622651935685]
Safe zone boundaries (straight space): [-116.09754631642224, -60.46552530883282]
Pad input volume to account for spinal cord length...
Time to generate centerline: 3.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-16_straighten-spinalcord_i5_bkzgy
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-16_straighten-spinalcord_i5_bkzgy/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-16_straighten-spinalcord_i5_bkzgy/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-16_straighten-spinalcord_i5_bkzgy/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-16_straighten-spinalcord_i5_bkzgy
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-16_smooth-spinalcord_n_w3mbv_

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-16_smooth-spinalcord_n_w3mbv_

Finished! Elapsed time: 34s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Aera2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/sub-MS4_F1967_FLAIR_Avanto.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/sub-MS4_F1967_FLAIR_Avanto.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-55_deepseg-sc_7mai1vxh)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-54-30_optic-detect-centerline_7kllg8mw)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-54-30_optic-detect-centerline_7kllg8mw
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #96[0m
[33mRemoving small objects above slice #96[0m
[33mRemoving small objects above slice #96[0m
[33mRemoving small objects above slice #96[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-52-55_deepseg-sc_7mai1vxh
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/sub-MS4_F1967_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/sub-MS4_F1967_FLAIR_Avanto.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-09_create-mask_cwsbf1uv)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-09_create-mask_cwsbf1uv

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/sub-MS4_F1967_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/sub-MS4_F1967_FLAIR_Avanto.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_crop.nii.gz
--

Bounding box: x=[118, 161], y=[0, 96], z=[68, 106]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/sub-MS4_F1967_FLAIR_Avanto.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-21_smooth-spinalcord_z884nk31)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-21_smooth-spinalcord_z884nk31/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-21_smooth-spinalcord_z884nk31/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-21_straighten-spinalcord_2ccjfl2c)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.08 mm
Error on approximation = 0.05 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 98.04160117181206
Size of spinal cord in z direction: 96.46232003947107
Ratio length/size: 1.0163720002970567
Safe zone boundaries (curved space): [-127.60506729182657, -31.142747252355505]
Safe zone boundaries (straight space): [-128.39470785799708, -30.353106686185008]
Pad input volume to account for spinal cord length...
Time to generate centerline: 15.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-21_straighten-spinalcord_2ccjfl2c
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-21_straighten-spinalcord_2ccjfl2c/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-21_straighten-spinalcord_2ccjfl2c/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-21_straighten-spinalcord_2ccjfl2c/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-21_straighten-spinalcord_2ccjfl2c
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-21_smooth-spinalcord_z884nk31

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-55-21_smooth-spinalcord_z884nk31

Finished! Elapsed time: 41s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/sub-MS4_F1967_MPRAGE_Avanto1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/sub-MS4_F1967_MPRAGE_Avanto1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-56-05_deepseg-sc_bof1jtuy)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-02_optic-detect-centerline_hhh2hwj5)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-02_optic-detect-centerline_hhh2hwj5
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-56-05_deepseg-sc_bof1jtuy
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/sub-MS4_F1967_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/sub-MS4_F1967_MPRAGE_Avanto1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-24_create-mask_6o9y6uhf)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.9726563, 0.9726563, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-24_create-mask_6o9y6uhf

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/sub-MS4_F1967_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/sub-MS4_F1967_MPRAGE_Avanto1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_crop.nii.gz
--

Bounding box: x=[110, 152], y=[88, 129], z=[1, 49]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/sub-MS4_F1967_MPRAGE_Avanto1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-30_smooth-spinalcord_b9fhj7yx)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-30_smooth-spinalcord_b9fhj7yx/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-30_smooth-spinalcord_b9fhj7yx/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-31_straighten-spinalcord_00u1_zb9)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.69 mm
Error on approximation = 0.27 mm
Error on approximation = 0.28 mm
Error on approximation = 0.26 mm
Error on approximation = 0.21 mm
Error on approximation = 0.13 mm
Error on approximation = 0.07 mm
Error on approximation = 0.06 mm
Error on approximation = 0.06 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.05 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Create the straight space and the safe zone
Length of spinal cord: 73.20967422558414
Size of spinal cord in z direction: 70.5
Ratio length/size: 1.0384350953983565
Safe zone boundaries (curved space): [-100.49568176269531, -29.995681762695312]
Safe zone boundaries (straight space): [-101.85051887548738, -28.640844649903244]
Pad input volume to account for spinal cord length...
Time to generate centerline: 5.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-31_straighten-spinalcord_00u1_zb9
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-31_straighten-spinalcord_00u1_zb9/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-31_straighten-spinalcord_00u1_zb9/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-31_straighten-spinalcord_00u1_zb9/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-31_straighten-spinalcord_00u1_zb9
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-30_smooth-spinalcord_b9fhj7yx

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-58-30_smooth-spinalcord_b9fhj7yx

Finished! Elapsed time: 43s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/sub-MS4_F1967_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/sub-MS4_F1967_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-59-17_deepseg-sc_dbmw32fz)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-00-57_optic-detect-centerline_cbjy3ns_)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-00-57_optic-detect-centerline_cbjy3ns_
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_13-59-17_deepseg-sc_dbmw32fz
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/sub-MS4_F1967_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/sub-MS4_F1967_MPRAGE_Avanto2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-16_create-mask_7beqzx9i)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.9726563, 0.9726563, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-16_create-mask_7beqzx9i

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/sub-MS4_F1967_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/sub-MS4_F1967_MPRAGE_Avanto2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_crop.nii.gz
--

Bounding box: x=[110, 152], y=[87, 128], z=[1, 48]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/sub-MS4_F1967_MPRAGE_Avanto2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-21_smooth-spinalcord_g6o_4xwa)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-21_smooth-spinalcord_g6o_4xwa/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-21_smooth-spinalcord_g6o_4xwa/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-22_straighten-spinalcord_hzvr7ow4)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.27 mm
Error on approximation = 0.09 mm
Error on approximation = 0.07 mm
Error on approximation = 0.06 mm
Error on approximation = 0.05 mm
Error on approximation = 0.05 mm
Create the straight space and the safe zone
Length of spinal cord: 69.94733664743198
Size of spinal cord in z direction: 69.0
Ratio length/size: 1.013729516629449
Safe zone boundaries (curved space): [-100.49568176269531, -31.495681762695312]
Safe zone boundaries (straight space): [-100.96935008641131, -31.02201343897932]
Pad input volume to account for spinal cord length...
Time to generate centerline: 4.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-22_straighten-spinalcord_hzvr7ow4
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-22_straighten-spinalcord_hzvr7ow4/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-22_straighten-spinalcord_hzvr7ow4/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-22_straighten-spinalcord_hzvr7ow4/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-22_straighten-spinalcord_hzvr7ow4
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-21_smooth-spinalcord_g6o_4xwa

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-01-21_smooth-spinalcord_g6o_4xwa

Finished! Elapsed time: 39s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Avanto2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/sub-MS4_F1967_FLAIR_Trio.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/sub-MS4_F1967_FLAIR_Trio.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-02-07_deepseg-sc_5hqakfuf)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-03-07_optic-detect-centerline_4mhcd0oc)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mTo avoid intensity overflow due to convertion to +uint16+, intensity will be rescaled to the maximum quantization scale[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-03-07_optic-detect-centerline_4mhcd0oc
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-02-07_deepseg-sc_5hqakfuf
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/sub-MS4_F1967_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/sub-MS4_F1967_FLAIR_Trio.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-13_create-mask_lnsvtpi2)

Orientation:
  AIL

Dimensions:
(160, 512, 512, 1, 1.0, 0.48828125, 0.48828125, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-13_create-mask_lnsvtpi2

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/sub-MS4_F1967_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/sub-MS4_F1967_FLAIR_Trio.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_crop.nii.gz
--

Bounding box: x=[242, 329], y=[0, 163], z=[62, 99]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/sub-MS4_F1967_FLAIR_Trio.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-34_smooth-spinalcord_gytbrxwb)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-34_smooth-spinalcord_gytbrxwb/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-34_smooth-spinalcord_gytbrxwb/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-37_straighten-spinalcord_vlx74arx)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 1.13 mm
Error on approximation = 0.64 mm
Error on approximation = 0.29 mm
Error on approximation = 0.14 mm
Error on approximation = 0.11 mm
Error on approximation = 0.09 mm
Error on approximation = 0.08 mm
Error on approximation = 0.07 mm
Error on approximation = 0.06 mm
Error on approximation = 0.06 mm
Error on approximation = 0.06 mm
Create the straight space and the safe zone
Length of spinal cord: 80.35215785234783
Size of spinal cord in z direction: 79.09918927453784
Ratio length/size: 1.0158404730731334
Safe zone boundaries (curved space): [-122.06102147581379, -42.96183220127595]
Safe zone boundaries (straight space): [-122.6875057647188, -42.335347912370956]
Pad input volume to account for spinal cord length...
Time to generate centerline: 16.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-37_straighten-spinalcord_vlx74arx
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-37_straighten-spinalcord_vlx74arx/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-37_straighten-spinalcord_vlx74arx/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-37_straighten-spinalcord_vlx74arx/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-37_straighten-spinalcord_vlx74arx
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-34_smooth-spinalcord_gytbrxwb

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-04-34_smooth-spinalcord_gytbrxwb

Finished! Elapsed time: 170s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_crop.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_crop.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_seg.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-07-43_deepseg-sc_xq9_8vx5)
Reorient the image to RPI, if necessary...
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/resampling.py", line 107, in resample_nib
    R[i, i] = img.shape[i] / float(shape_r[i])
ZeroDivisionError: float division by zero

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_deepseg_sc.py", line 211, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_deepseg_sc.py", line 190, in main
    deep_segmentation_spinalcord(im_image.copy(), contrast_type, ctr_algo=ctr_algo,
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/deepseg_/sc.py", line 442, in deep_segmentation_spinalcord
    resampling.resample_nib(im_image, new_size=[0.5, 0.5, im_image.dim[6]], new_size_type='mm',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/resampling.py", line 109, in resample_nib
    raise ZeroDivisionError("Destination size is zero for dimension {}. You are trying to resample to an "
ZeroDivisionError: Destination size is zero for dimension 0. You are trying to resample to an unrealistic dimension. Check your NIFTI pixdim values to make sure they are not corrupted.

--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_crop.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-07-59_create-mask_yus8b1cm)

Orientation:
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
  RPI
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m

Dimensions:
(0, 1, 1, 1, 0.97265625, 0.9726563, 1.5000001, 1)

Create mask...
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'float64', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-07-59_create-mask_yus8b1cm

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_crop.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_crop.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/cropping.py", line 116, in get_bbox_from_mask
    min(data_nonzero[0]), max(data_nonzero[0]),
ValueError: min() arg is an empty sequence
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-08-22_smooth-spinalcord_clrwnylp)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-08-22_smooth-spinalcord_clrwnylp/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-08-22_smooth-spinalcord_clrwnylp/centerline.nii.gz
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-08-23_straighten-spinalcord_m6db5m9u)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.07 mm
Create the straight space and the safe zone
Length of spinal cord: 11.023896260003879
Size of spinal cord in z direction: 7.825543317207405
Ratio length/size: 1.408706822408572
Safe zone boundaries (curved space): [-105.2542375837242, -97.4286942665168]
Safe zone boundaries (straight space): [-106.85341405512244, -95.82951779511856]
Pad input volume to account for spinal cord length...
Time to generate centerline: 20.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 2 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-08-23_straighten-spinalcord_m6db5m9u
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 288, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 217, in main
    sct_straighten_spinalcord.main([
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_straighten_spinalcord.py", line 261, in main
    fname_straight = sc_straight.straighten()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/straightening.py", line 523, in straighten
    sct_apply_transfo.main(['-i', 'data.nii',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_apply_transfo.py", line 353, in main
    transform.apply()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_apply_transfo.py", line 214, in apply
    run_proc(['isct_antsApplyTransforms',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/utils/sys.py", line 349, in run_proc
    raise RuntimeError(output)
RuntimeError: ** ERROR: nifti_convert_nhdr2nim: bad dim[1]
Exception caught during reference file reading

itk::ExceptionObject (0x7fe3fea04100)
Location: "unknown"
File: /Users/runner/work/build_ANTs/build_ANTs/antsbin/ITKv5/Modules/IO/NIFTI/src/itkNiftiImageIO.cxx
Line: 1025
Description: itk::ERROR: NiftiImageIO(0x7fe3fe905830): data.nii is not recognized as a NIFTI file

file data.nii
libc++abi: terminating with uncaught exception of type itk::ExceptionObject: /Users/runner/work/build_ANTs/build_ANTs/antsbin/ITKv5/Modules/Core/Common/src/itkProcessObject.cxx:1340:
itk::ERROR: ResampleImageFilter(0x7fe3fe806c50): Input Primary is required but not set.

--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/t1_seg.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/sub-MS4_F1967_MPRAGE_Trio2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/sub-MS4_F1967_MPRAGE_Trio2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-09-20_deepseg-sc_6osuvrh8)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-09-43_optic-detect-centerline__nf4fd9r)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-09-43_optic-detect-centerline__nf4fd9r
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:0[0m
[33mFilling a hole in the segmentation around z_slice #:5[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 1[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 6[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-09-20_deepseg-sc_6osuvrh8
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/sub-MS4_F1967_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/sub-MS4_F1967_MPRAGE_Trio2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-02_create-mask_l5wlf9tg)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5000001, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-02_create-mask_l5wlf9tg

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/sub-MS4_F1967_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/sub-MS4_F1967_MPRAGE_Trio2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_crop.nii.gz
--

Bounding box: x=[1, 42], y=[219, 256], z=[0, 10]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/sub-MS4_F1967_MPRAGE_Trio2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-08_smooth-spinalcord_j5ivtf08)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-08_smooth-spinalcord_j5ivtf08/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-08_smooth-spinalcord_j5ivtf08/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Reusing existing warping field which seems to be valid
cp /Users/mathilde/warp_curve2straight.nii.gz warp_curve2straight.nii.gz
cp /Users/mathilde/warp_straight2curve.nii.gz warp_straight2curve.nii.gz
cp /Users/mathilde/straight_ref.nii.gz straight_ref.nii.gz
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-08_smooth-spinalcord_j5ivtf08/anat_rpi.nii -o anat_rpi_straight.nii -t warp_curve2straight.nii.gz -r straight_ref.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-08_smooth-spinalcord_j5ivtf08

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-08_smooth-spinalcord_j5ivtf08

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-08_smooth-spinalcord_j5ivtf08

Finished! Elapsed time: 2s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS4/ses-Trio2/anat/anat_flat.nii.gz: No such file or directory
Processing subject in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-14_deepseg-sc_i549qnz0)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-16_optic-detect-centerline_tc9pee8n)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-16_optic-detect-centerline_tc9pee8n
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-14_deepseg-sc_i549qnz0
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-21_create-mask_ngnsrseb)

Orientation:
  AIL

Dimensions:
(41, 45, 92, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-21_create-mask_ngnsrseb

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 45], y=[0, 92], z=[0, 41]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-25_smooth-spinalcord_20nepp4z)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-25_smooth-spinalcord_20nepp4z/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-25_smooth-spinalcord_20nepp4z/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-25_straighten-spinalcord_d0w0vtu2)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.18 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 93.51711862639664
Size of spinal cord in z direction: 92.30367036783004
Ratio length/size: 1.0131462622637974
Safe zone boundaries (curved space): [-116.3324469274453, -24.028776559615267]
Safe zone boundaries (straight space): [-116.93917105672861, -23.422052430331966]
Pad input volume to account for spinal cord length...
Time to generate centerline: 55.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-25_straighten-spinalcord_d0w0vtu2
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-25_straighten-spinalcord_d0w0vtu2/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-25_straighten-spinalcord_d0w0vtu2/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-25_straighten-spinalcord_d0w0vtu2/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-25_straighten-spinalcord_d0w0vtu2
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-25_smooth-spinalcord_20nepp4z

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-25_smooth-spinalcord_20nepp4z

Finished! Elapsed time: 7s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/sub-MS5_M1981_MPRAGE_Aera1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/sub-MS5_M1981_MPRAGE_Aera1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-51_deepseg-sc_xzsf0d0l)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-27_optic-detect-centerline_n4wfk2cq)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mTo avoid intensity overflow due to convertion to +uint16+, intensity will be rescaled to the maximum quantization scale[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-27_optic-detect-centerline_n4wfk2cq
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-10-51_deepseg-sc_xzsf0d0l
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/sub-MS5_M1981_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/sub-MS5_M1981_MPRAGE_Aera1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-45_create-mask_v_rq4ykx)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.97656256, 1.5, 1)

Create mask...
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_create_mask.py", line 341, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_create_mask.py", line 145, in main
    create_mask(param)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_create_mask.py", line 232, in create_mask
    z_centerline_not_null = [iz for iz in range(0, nz, 1) if data_centerline[:, :, iz].any()]
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_create_mask.py", line 232, in <listcomp>
    z_centerline_not_null = [iz for iz in range(0, nz, 1) if data_centerline[:, :, iz].any()]
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/memmap.py", line 334, in __getitem__
    res = super().__getitem__(index)
IndexError: index 52 is out of bounds for axis 2 with size 52

--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/sub-MS5_M1981_MPRAGE_Aera1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 42], y=[0, 39], z=[0, 52]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/sub-MS5_M1981_MPRAGE_Aera1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-50_smooth-spinalcord_urqeyk2k)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-50_smooth-spinalcord_urqeyk2k/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-50_smooth-spinalcord_urqeyk2k/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-50_straighten-spinalcord_071mdxlc)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.05 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 76.83971347250554
Size of spinal cord in z direction: 75.8638498114085
Ratio length/size: 1.0128633553863
Safe zone boundaries (curved space): [-98.84908663579229, -22.98523682438379]
Safe zone boundaries (straight space): [-99.33701846634081, -22.49730499383527]
Pad input volume to account for spinal cord length...
Time to generate centerline: 8.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-50_straighten-spinalcord_071mdxlc
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-50_straighten-spinalcord_071mdxlc/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-50_straighten-spinalcord_071mdxlc/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-50_straighten-spinalcord_071mdxlc/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-50_straighten-spinalcord_071mdxlc
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-50_smooth-spinalcord_urqeyk2k

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-50_smooth-spinalcord_urqeyk2k

Finished! Elapsed time: 4s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/sub-MS5_M1981_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/sub-MS5_M1981_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-57_deepseg-sc_j_w07xqo)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-00_optic-detect-centerline_znlhspat)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-00_optic-detect-centerline_znlhspat
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-11-57_deepseg-sc_j_w07xqo
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/sub-MS5_M1981_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/sub-MS5_M1981_MPRAGE_Aera2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-33_create-mask_71di1wnu)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.97656244, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-33_create-mask_71di1wnu

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/sub-MS5_M1981_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/sub-MS5_M1981_MPRAGE_Aera2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_crop.nii.gz
--

Bounding box: x=[98, 140], y=[72, 112], z=[0, 53]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/sub-MS5_M1981_MPRAGE_Aera2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-39_smooth-spinalcord_xkxhrrdz)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-39_smooth-spinalcord_xkxhrrdz/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-39_smooth-spinalcord_xkxhrrdz/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-39_straighten-spinalcord_o8pwlfyq)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.45 mm
Error on approximation = 0.14 mm
Error on approximation = 0.08 mm
Error on approximation = 0.05 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Error on approximation = 0.01 mm
Create the straight space and the safe zone
Length of spinal cord: 78.85094066752961
Size of spinal cord in z direction: 77.23873843491597
Ratio length/size: 1.0208729746922542
Safe zone boundaries (curved space): [-98.6431335347556, -21.404395099839633]
Safe zone boundaries (straight space): [-99.44923465106243, -20.598293983532812]
Pad input volume to account for spinal cord length...
Time to generate centerline: 9.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-39_straighten-spinalcord_o8pwlfyq
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-39_straighten-spinalcord_o8pwlfyq/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-39_straighten-spinalcord_o8pwlfyq/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-39_straighten-spinalcord_o8pwlfyq/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-39_straighten-spinalcord_o8pwlfyq
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-39_smooth-spinalcord_xkxhrrdz

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-13-39_smooth-spinalcord_xkxhrrdz

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Aera2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/sub-MS5_M1981_FLAIR_Avanto.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/sub-MS5_M1981_FLAIR_Avanto.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-14-22_deepseg-sc_9xsm9uw9)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-13_optic-detect-centerline_pft2hvl6)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-13_optic-detect-centerline_pft2hvl6
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #98[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-14-22_deepseg-sc_9xsm9uw9
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/sub-MS5_M1981_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/sub-MS5_M1981_FLAIR_Avanto.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-49_create-mask_2s8j9m0p)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-49_create-mask_2s8j9m0p

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/sub-MS5_M1981_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/sub-MS5_M1981_FLAIR_Avanto.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_crop.nii.gz
--

Bounding box: x=[115, 160], y=[0, 98], z=[71, 110]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/sub-MS5_M1981_FLAIR_Avanto.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-57_smooth-spinalcord_3dtmyjle)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-57_smooth-spinalcord_3dtmyjle/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-57_smooth-spinalcord_3dtmyjle/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-57_straighten-spinalcord__anx70lv)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 1.12 mm
Error on approximation = 0.58 mm
Error on approximation = 0.3 mm
Error on approximation = 0.17 mm
Error on approximation = 0.11 mm
Error on approximation = 0.08 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 100.34414971132084
Size of spinal cord in z direction: 98.43361754675064
Ratio length/size: 1.0194093462394878
Safe zone boundaries (curved space): [-129.2979929971706, -30.86437545041997]
Safe zone boundaries (straight space): [-130.25325907945572, -29.90910936813487]
Pad input volume to account for spinal cord length...
Time to generate centerline: 9.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-57_straighten-spinalcord__anx70lv
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-57_straighten-spinalcord__anx70lv/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-57_straighten-spinalcord__anx70lv/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-57_straighten-spinalcord__anx70lv/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-57_straighten-spinalcord__anx70lv
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-57_smooth-spinalcord_3dtmyjle

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-15-57_smooth-spinalcord_3dtmyjle

Finished! Elapsed time: 42s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_seg.nii.gz
--


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/sub-MS5_M1981_MPRAGE_Avanto1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/sub-MS5_M1981_MPRAGE_Avanto1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-16-43_deepseg-sc_t_lmgths)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-11_optic-detect-centerline_f1fu62ko)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-11_optic-detect-centerline_f1fu62ko
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-16-43_deepseg-sc_t_lmgths
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/sub-MS5_M1981_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/sub-MS5_M1981_MPRAGE_Avanto1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-36_create-mask_lku5utwf)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726562, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-36_create-mask_lku5utwf

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/sub-MS5_M1981_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/sub-MS5_M1981_MPRAGE_Avanto1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_crop.nii.gz
--

Bounding box: x=[107, 145], y=[79, 126], z=[1, 55]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/sub-MS5_M1981_MPRAGE_Avanto1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-43_smooth-spinalcord_6unqfjl1)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-43_smooth-spinalcord_6unqfjl1/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-43_smooth-spinalcord_6unqfjl1/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-43_straighten-spinalcord_tz92sj0i)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.26 mm
Error on approximation = 0.13 mm
Error on approximation = 0.09 mm
Error on approximation = 0.06 mm
Error on approximation = 0.06 mm
Error on approximation = 0.05 mm
Error on approximation = 0.05 mm
Create the straight space and the safe zone
Length of spinal cord: 80.44012097287735
Size of spinal cord in z direction: 79.16123157078715
Ratio length/size: 1.0161555015847195
Safe zone boundaries (curved space): [-110.95097805145657, -31.78974648066942]
Safe zone boundaries (straight space): [-111.59042275250167, -31.15030177962432]
Pad input volume to account for spinal cord length...
Time to generate centerline: 5.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-43_straighten-spinalcord_tz92sj0i
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-43_straighten-spinalcord_tz92sj0i/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-43_straighten-spinalcord_tz92sj0i/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-43_straighten-spinalcord_tz92sj0i/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-43_straighten-spinalcord_tz92sj0i
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-43_smooth-spinalcord_6unqfjl1

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-18-43_smooth-spinalcord_6unqfjl1

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/sub-MS5_M1981_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/sub-MS5_M1981_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-19-27_deepseg-sc_1kfra4im)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-21-40_optic-detect-centerline_ouj1212j)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-21-40_optic-detect-centerline_ouj1212j
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #54[0m
[33mRemoving small objects above slice #54[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-19-27_deepseg-sc_1kfra4im
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/sub-MS5_M1981_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/sub-MS5_M1981_MPRAGE_Avanto2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-06_create-mask_4c8c04q0)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726562, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-06_create-mask_4c8c04q0

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/sub-MS5_M1981_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/sub-MS5_M1981_MPRAGE_Avanto2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_crop.nii.gz
--

Bounding box: x=[107, 145], y=[80, 127], z=[0, 55]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/sub-MS5_M1981_MPRAGE_Avanto2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-12_smooth-spinalcord_x3f_j8m8)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-12_smooth-spinalcord_x3f_j8m8/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-12_smooth-spinalcord_x3f_j8m8/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-13_straighten-spinalcord_jvmnuh2h)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.24 mm
Error on approximation = 0.12 mm
Error on approximation = 0.08 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 81.90976267920468
Size of spinal cord in z direction: 80.54496047549614
Ratio length/size: 1.0169446008248244
Safe zone boundaries (curved space): [-112.34855337048403, -31.803592894987887]
Safe zone boundaries (straight space): [-113.0309544723383, -31.12119179313362]
Pad input volume to account for spinal cord length...
Time to generate centerline: 5.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-13_straighten-spinalcord_jvmnuh2h
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-13_straighten-spinalcord_jvmnuh2h/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-13_straighten-spinalcord_jvmnuh2h/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-13_straighten-spinalcord_jvmnuh2h/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-13_straighten-spinalcord_jvmnuh2h
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-12_smooth-spinalcord_x3f_j8m8

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-12_smooth-spinalcord_x3f_j8m8

Finished! Elapsed time: 41s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Avanto2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/sub-MS5_M1981_FLAIR_Trio.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/sub-MS5_M1981_FLAIR_Trio.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-57_deepseg-sc_8q8r3zjc)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-25-43_optic-detect-centerline_0tdxtl20)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-25-43_optic-detect-centerline_0tdxtl20
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-22-57_deepseg-sc_8q8r3zjc
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/sub-MS5_M1981_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/sub-MS5_M1981_FLAIR_Trio.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-26-54_create-mask_x4sh59w5)

Orientation:
  AIL

Dimensions:
(160, 512, 512, 1, 1.0, 0.48828125, 0.48828125, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-26-54_create-mask_x4sh59w5

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/sub-MS5_M1981_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/sub-MS5_M1981_FLAIR_Trio.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_crop.nii.gz
--

Bounding box: x=[252, 367], y=[0, 180], z=[60, 97]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/sub-MS5_M1981_FLAIR_Trio.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-27-12_smooth-spinalcord_pf2blsr3)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-27-12_smooth-spinalcord_pf2blsr3/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-27-12_smooth-spinalcord_pf2blsr3/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-27-16_straighten-spinalcord_5jjpp0vj)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.36 mm
Error on approximation = 0.22 mm
Error on approximation = 0.22 mm
Error on approximation = 0.16 mm
Error on approximation = 0.15 mm
Error on approximation = 0.16 mm
Error on approximation = 0.16 mm
Error on approximation = 0.14 mm
Error on approximation = 0.13 mm
Error on approximation = 0.12 mm
Error on approximation = 0.11 mm
Error on approximation = 0.1 mm
Error on approximation = 0.08 mm
Error on approximation = 0.08 mm
Error on approximation = 0.07 mm
Error on approximation = 0.07 mm
Error on approximation = 0.06 mm
Error on approximation = 0.06 mm
Create the straight space and the safe zone
Length of spinal cord: 90.43371375487385
Size of spinal cord in z direction: 87.25192378735393
Ratio length/size: 1.0364667027316719
Safe zone boundaries (curved space): [-108.86943315388743, -21.617509366533497]
Safe zone boundaries (straight space): [-110.4603281376474, -20.026614382773538]
Pad input volume to account for spinal cord length...
Time to generate centerline: 52.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-27-16_straighten-spinalcord_5jjpp0vj
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-27-16_straighten-spinalcord_5jjpp0vj/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-27-16_straighten-spinalcord_5jjpp0vj/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-27-16_straighten-spinalcord_5jjpp0vj/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-27-16_straighten-spinalcord_5jjpp0vj
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-27-12_smooth-spinalcord_pf2blsr3

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-27-12_smooth-spinalcord_pf2blsr3

Finished! Elapsed time: 181s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/sub-MS5_M1981_MPRAGE_Trio1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/sub-MS5_M1981_MPRAGE_Trio1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-30-28_deepseg-sc_58mpp6_m)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-30-55_optic-detect-centerline_zgi2gsu2)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-30-55_optic-detect-centerline_zgi2gsu2
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #0[0m
[33mRemoving small objects above slice #0[0m
[33mRemoving small objects above slice #0[0m
[33mRemoving small objects above slice #0[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 4[0m
[33m
No properties for slice: 5[0m
[33m
No properties for slice: 6[0m
[33m
No properties for slice: 7[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-30-28_deepseg-sc_58mpp6_m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/sub-MS5_M1981_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/sub-MS5_M1981_MPRAGE_Trio1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-13_create-mask_kjx6dgva)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726562, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-13_create-mask_kjx6dgva

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/sub-MS5_M1981_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/sub-MS5_M1981_MPRAGE_Trio1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 36], y=[219, 256], z=[0, 9]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/sub-MS5_M1981_MPRAGE_Trio1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-19_smooth-spinalcord_c_sjtx6v)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-19_smooth-spinalcord_c_sjtx6v/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-19_smooth-spinalcord_c_sjtx6v/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-19_straighten-spinalcord_7nv0xntt)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 4.76 mm
Error on approximation = 6.9 mm
Error on approximation = 8.52 mm
Error on approximation = 9.23 mm
Create the straight space and the safe zone
Length of spinal cord: 15.01377847498372
Size of spinal cord in z direction: 12.195652289548491
Ratio length/size: 1.231076298219024
Safe zone boundaries (curved space): [-91.64891870156822, -79.45326641201973]
Safe zone boundaries (straight space): [-93.05798179428584, -78.04420331930211]
Pad input volume to account for spinal cord length...
Time to generate centerline: 2.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-19_straighten-spinalcord_7nv0xntt
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-19_straighten-spinalcord_7nv0xntt/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-19_straighten-spinalcord_7nv0xntt/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-19_straighten-spinalcord_7nv0xntt/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-19_straighten-spinalcord_7nv0xntt
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-19_smooth-spinalcord_c_sjtx6v

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-31-19_smooth-spinalcord_c_sjtx6v

Finished! Elapsed time: 36s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_crop.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_crop.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_seg.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-32-06_deepseg-sc_n6gfo_7k)
Reorient the image to RPI, if necessary...
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/resampling.py", line 107, in resample_nib
    R[i, i] = img.shape[i] / float(shape_r[i])
ZeroDivisionError: float division by zero

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_deepseg_sc.py", line 211, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_deepseg_sc.py", line 190, in main
    deep_segmentation_spinalcord(im_image.copy(), contrast_type, ctr_algo=ctr_algo,
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/deepseg_/sc.py", line 442, in deep_segmentation_spinalcord
    resampling.resample_nib(im_image, new_size=[0.5, 0.5, im_image.dim[6]], new_size_type='mm',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/resampling.py", line 109, in resample_nib
    raise ZeroDivisionError("Destination size is zero for dimension {}. You are trying to resample to an "
ZeroDivisionError: Destination size is zero for dimension 0. You are trying to resample to an unrealistic dimension. Check your NIFTI pixdim values to make sure they are not corrupted.

--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_crop.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-32-21_create-mask_34mwt_o5)

Orientation:
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
  RPI
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m

Dimensions:
(0, 1, 1, 1, 0.97265625, 0.9726562, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'float64', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-32-21_create-mask_34mwt_o5

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_crop.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_crop.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'int64', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/cropping.py", line 116, in get_bbox_from_mask
    min(data_nonzero[0]), max(data_nonzero[0]),
ValueError: min() arg is an empty sequence
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-32-26_smooth-spinalcord_9xo4q8l2)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-32-26_smooth-spinalcord_9xo4q8l2/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-32-26_smooth-spinalcord_9xo4q8l2/centerline.nii.gz
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-32-26_straighten-spinalcord_0c9kudwq)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 3.89 mm
Error on approximation = 2.14 mm
Error on approximation = 2.56 mm
Error on approximation = 0.68 mm
Error on approximation = 2.16 mm
Create the straight space and the safe zone
Length of spinal cord: 34.50209696977533
Size of spinal cord in z direction: 14.355565970665268
Ratio length/size: 2.403395104050811
Safe zone boundaries (curved space): [-84.52879516283365, -70.17322919216838]
Safe zone boundaries (straight space): [-94.60206066238867, -60.099963692613336]
Pad input volume to account for spinal cord length...
Time to generate centerline: 16.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 2 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-32-26_straighten-spinalcord_0c9kudwq
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 288, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 217, in main
    sct_straighten_spinalcord.main([
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_straighten_spinalcord.py", line 261, in main
    fname_straight = sc_straight.straighten()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/straightening.py", line 523, in straighten
    sct_apply_transfo.main(['-i', 'data.nii',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_apply_transfo.py", line 353, in main
    transform.apply()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_apply_transfo.py", line 214, in apply
    run_proc(['isct_antsApplyTransforms',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/utils/sys.py", line 349, in run_proc
    raise RuntimeError(output)
RuntimeError: ** ERROR: nifti_convert_nhdr2nim: bad dim[1]
Exception caught during reference file reading

itk::ExceptionObject (0x7f89ba904100)
Location: "unknown"
File: /Users/runner/work/build_ANTs/build_ANTs/antsbin/ITKv5/Modules/IO/NIFTI/src/itkNiftiImageIO.cxx
Line: 1025
Description: itk::ERROR: NiftiImageIO(0x7f89ba829ae0): data.nii is not recognized as a NIFTI file

file data.nii
libc++abi: terminating with uncaught exception of type itk::ExceptionObject: /Users/runner/work/build_ANTs/build_ANTs/antsbin/ITKv5/Modules/Core/Common/src/itkProcessObject.cxx:1340:
itk::ERROR: ResampleImageFilter(0x7f89b9704c40): Input Primary is required but not set.

--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/t1_seg.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS5/ses-Trio2/anat/anat_flat.nii.gz: No such file or directory
Processing subject in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-12_deepseg-sc_j7urut2u)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-15_optic-detect-centerline_taolbfmi)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-15_optic-detect-centerline_taolbfmi
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-12_deepseg-sc_j7urut2u
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-22_create-mask_kjp_yzhh)

Orientation:
  AIL

Dimensions:
(35, 41, 91, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-22_create-mask_kjp_yzhh

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 41], y=[0, 91], z=[0, 35]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-26_smooth-spinalcord_70vgu3co)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-26_smooth-spinalcord_70vgu3co/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-26_smooth-spinalcord_70vgu3co/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-26_straighten-spinalcord_mmwb3w95)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.08 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Error on approximation = 0.01 mm
Error on approximation = 0.01 mm
Create the straight space and the safe zone
Length of spinal cord: 91.9518587474156
Size of spinal cord in z direction: 91.36150367031128
Ratio length/size: 1.0064617486948846
Safe zone boundaries (curved space): [-155.52654957348352, -64.16504590317224]
Safe zone boundaries (straight space): [-155.8217271120357, -63.86986836462008]
Pad input volume to account for spinal cord length...
Time to generate centerline: 7.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-26_straighten-spinalcord_mmwb3w95
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-26_straighten-spinalcord_mmwb3w95/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-26_straighten-spinalcord_mmwb3w95/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-26_straighten-spinalcord_mmwb3w95/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-26_straighten-spinalcord_mmwb3w95
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-26_smooth-spinalcord_70vgu3co

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-26_smooth-spinalcord_70vgu3co

Finished! Elapsed time: 5s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-37_deepseg-sc_qk9svrpz)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-39_optic-detect-centerline_izfdgl0z)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-39_optic-detect-centerline_izfdgl0z
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-33-37_deepseg-sc_qk9svrpz
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-34-09_create-mask_cvy_vse7)

Orientation:
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_create_mask.py", line 341, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_create_mask.py", line 145, in main
    create_mask(param)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_create_mask.py", line 171, in create_mask
    orientation_input = Image(param.fname_data).orientation
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 428, in loadFromPath
    im_file = nib.load(self.absolutepath, mmap=mmap)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 55, in load
    raise ImageFileError(f'Cannot work out file type of "{filename}"')
nibabel.filebasedimages.ImageFileError: Cannot work out file type of "/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz"

--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 37], y=[0, 48], z=[0, 54]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-34-33_smooth-spinalcord_9_zmrh0n)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-34-33_smooth-spinalcord_9_zmrh0n/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-34-33_smooth-spinalcord_9_zmrh0n/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Reusing existing warping field which seems to be valid
cp /Users/mathilde/warp_curve2straight.nii.gz warp_curve2straight.nii.gz
cp /Users/mathilde/warp_straight2curve.nii.gz warp_straight2curve.nii.gz
cp /Users/mathilde/straight_ref.nii.gz straight_ref.nii.gz
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-34-33_smooth-spinalcord_9_zmrh0n/anat_rpi.nii -o anat_rpi_straight.nii -t warp_curve2straight.nii.gz -r straight_ref.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-34-33_smooth-spinalcord_9_zmrh0n

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-34-33_smooth-spinalcord_9_zmrh0n

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-34-33_smooth-spinalcord_9_zmrh0n

Finished! Elapsed time: 1s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/sub-MS6_F1994_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/sub-MS6_F1994_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-34-48_deepseg-sc_fhsnwj27)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-35-34_optic-detect-centerline_r4p_rrxh)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-35-34_optic-detect-centerline_r4p_rrxh
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #49[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-34-48_deepseg-sc_fhsnwj27
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/sub-MS6_F1994_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/sub-MS6_F1994_MPRAGE_Aera2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-35-52_create-mask_6wrt0780)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.97656256, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-35-52_create-mask_6wrt0780

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/sub-MS6_F1994_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/sub-MS6_F1994_MPRAGE_Aera2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_crop.nii.gz
--

Bounding box: x=[95, 133], y=[63, 113], z=[0, 50]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/sub-MS6_F1994_MPRAGE_Aera2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-35-58_smooth-spinalcord_2smc1k2o)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-35-58_smooth-spinalcord_2smc1k2o/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-35-58_smooth-spinalcord_2smc1k2o/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Reusing existing warping field which seems to be valid
cp /Users/mathilde/warp_curve2straight.nii.gz warp_curve2straight.nii.gz
cp /Users/mathilde/warp_straight2curve.nii.gz warp_straight2curve.nii.gz
cp /Users/mathilde/straight_ref.nii.gz straight_ref.nii.gz
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-35-58_smooth-spinalcord_2smc1k2o/anat_rpi.nii -o anat_rpi_straight.nii -t warp_curve2straight.nii.gz -r straight_ref.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-35-58_smooth-spinalcord_2smc1k2o

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-35-58_smooth-spinalcord_2smc1k2o

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-35-58_smooth-spinalcord_2smc1k2o

Finished! Elapsed time: 2s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Aera2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/sub-MS6_F1994_FLAIR_Avanto.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/sub-MS6_F1994_FLAIR_Avanto.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-36-10_deepseg-sc_0ml0pq0f)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-37-56_optic-detect-centerline_suuxzchw)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-37-56_optic-detect-centerline_suuxzchw
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #95[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-36-10_deepseg-sc_0ml0pq0f
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/sub-MS6_F1994_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/sub-MS6_F1994_FLAIR_Avanto.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-19_create-mask_asnwms3d)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-19_create-mask_asnwms3d

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/sub-MS6_F1994_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/sub-MS6_F1994_FLAIR_Avanto.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_crop.nii.gz
--

Bounding box: x=[122, 165], y=[0, 96], z=[71, 107]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/sub-MS6_F1994_FLAIR_Avanto.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-26_smooth-spinalcord_7wo4y2tw)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-26_smooth-spinalcord_7wo4y2tw/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-26_smooth-spinalcord_7wo4y2tw/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-26_straighten-spinalcord_i62aavob)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.22 mm
Error on approximation = 0.06 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 97.27676980975669
Size of spinal cord in z direction: 96.45616018957689
Ratio length/size: 1.0085075916205555
Safe zone boundaries (curved space): [-128.5426395386779, -32.086479349101]
Safe zone boundaries (straight space): [-128.9529443487678, -31.6761745390111]
Pad input volume to account for spinal cord length...
Time to generate centerline: 18.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-26_straighten-spinalcord_i62aavob
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-26_straighten-spinalcord_i62aavob/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-26_straighten-spinalcord_i62aavob/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-26_straighten-spinalcord_i62aavob/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-26_straighten-spinalcord_i62aavob
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-26_smooth-spinalcord_7wo4y2tw

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-38-26_smooth-spinalcord_7wo4y2tw

Finished! Elapsed time: 49s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_crop.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_crop.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_seg.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-39-19_deepseg-sc_g5bztbmw)
Reorient the image to RPI, if necessary...
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/resampling.py", line 107, in resample_nib
    R[i, i] = img.shape[i] / float(shape_r[i])
ZeroDivisionError: float division by zero

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_deepseg_sc.py", line 211, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_deepseg_sc.py", line 190, in main
    deep_segmentation_spinalcord(im_image.copy(), contrast_type, ctr_algo=ctr_algo,
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/deepseg_/sc.py", line 442, in deep_segmentation_spinalcord
    resampling.resample_nib(im_image, new_size=[0.5, 0.5, im_image.dim[6]], new_size_type='mm',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/resampling.py", line 109, in resample_nib
    raise ZeroDivisionError("Destination size is zero for dimension {}. You are trying to resample to an "
ZeroDivisionError: Destination size is zero for dimension 0. You are trying to resample to an unrealistic dimension. Check your NIFTI pixdim values to make sure they are not corrupted.

--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_crop.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-39-21_create-mask__7067mkd)

Orientation:
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
  RPI
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m

Dimensions:
(0, 1, 1, 1, 0.97265625, 0.9726563, 1.5000001, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'float64', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-39-21_create-mask__7067mkd

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_crop.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_crop.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'int64', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/cropping.py", line 116, in get_bbox_from_mask
    min(data_nonzero[0]), max(data_nonzero[0]),
ValueError: min() arg is an empty sequence
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-39-26_smooth-spinalcord_1kwv5ybr)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-39-26_smooth-spinalcord_1kwv5ybr/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-39-26_smooth-spinalcord_1kwv5ybr/centerline.nii.gz
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-39-26_straighten-spinalcord_r_04_dyv)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 18.13 mm
Error on approximation = 2.31 mm
Error on approximation = 3.55 mm
[33mNURBS instability -> wrong reconstruction[0m
Create the straight space and the safe zone
Length of spinal cord: 50.57700543067373
Size of spinal cord in z direction: 10.948867209153903
Ratio length/size: 4.61938248628939
Safe zone boundaries (curved space): [-87.46905818411746, -76.52019097496355]
Safe zone boundaries (straight space): [-107.2831272948774, -56.706121864203666]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 2 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-39-26_straighten-spinalcord_r_04_dyv
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 288, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 217, in main
    sct_straighten_spinalcord.main([
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_straighten_spinalcord.py", line 261, in main
    fname_straight = sc_straight.straighten()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/straightening.py", line 523, in straighten
    sct_apply_transfo.main(['-i', 'data.nii',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_apply_transfo.py", line 353, in main
    transform.apply()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_apply_transfo.py", line 214, in apply
    run_proc(['isct_antsApplyTransforms',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/utils/sys.py", line 349, in run_proc
    raise RuntimeError(output)
RuntimeError: ** ERROR: nifti_convert_nhdr2nim: bad dim[1]
Exception caught during reference file reading

itk::ExceptionObject (0x7fd614a04100)
Location: "unknown"
File: /Users/runner/work/build_ANTs/build_ANTs/antsbin/ITKv5/Modules/IO/NIFTI/src/itkNiftiImageIO.cxx
Line: 1025
Description: itk::ERROR: NiftiImageIO(0x7fd61490ee30): data.nii is not recognized as a NIFTI file

file data.nii
libc++abi: terminating with uncaught exception of type itk::ExceptionObject: /Users/runner/work/build_ANTs/build_ANTs/antsbin/ITKv5/Modules/Core/Common/src/itkProcessObject.cxx:1340:
itk::ERROR: ResampleImageFilter(0x7fd5e3704850): Input Primary is required but not set.

--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/t1_seg.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/sub-MS6_F1994_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/sub-MS6_F1994_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-40-25_deepseg-sc_5pvnybr1)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-41-34_optic-detect-centerline_fixfjjde)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-41-34_optic-detect-centerline_fixfjjde
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-40-25_deepseg-sc_5pvnybr1
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/sub-MS6_F1994_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/sub-MS6_F1994_MPRAGE_Avanto2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-41-54_create-mask_hq3hz1i3)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5000001, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-41-54_create-mask_hq3hz1i3

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/sub-MS6_F1994_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/sub-MS6_F1994_MPRAGE_Avanto2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_crop.nii.gz
--

Bounding box: x=[111, 148], y=[65, 109], z=[0, 38]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/sub-MS6_F1994_MPRAGE_Avanto2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-00_smooth-spinalcord_uuqecfkt)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-00_smooth-spinalcord_uuqecfkt/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-00_smooth-spinalcord_uuqecfkt/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-00_straighten-spinalcord_0h5s2eja)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.06 mm
Error on approximation = 0.05 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 56.13623150622325
Size of spinal cord in z direction: 55.97232933241158
Ratio length/size: 1.002928271447098
Safe zone boundaries (curved space): [-90.14190982301088, -34.169580490599294]
Safe zone boundaries (straight space): [-90.22386090991671, -34.08762940369346]
Pad input volume to account for spinal cord length...
Time to generate centerline: 4.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-00_straighten-spinalcord_0h5s2eja
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-00_straighten-spinalcord_0h5s2eja/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-00_straighten-spinalcord_0h5s2eja/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-00_straighten-spinalcord_0h5s2eja/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-00_straighten-spinalcord_0h5s2eja
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-00_smooth-spinalcord_uuqecfkt

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-00_smooth-spinalcord_uuqecfkt

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Avanto2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/sub-MS6_F1994_FLAIR_Trio.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/sub-MS6_F1994_FLAIR_Trio.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-46_deepseg-sc_y2bbp53v)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-45-02_optic-detect-centerline_fnk7hxlt)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-45-02_optic-detect-centerline_fnk7hxlt
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-42-46_deepseg-sc_y2bbp53v
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/sub-MS6_F1994_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/sub-MS6_F1994_FLAIR_Trio.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-15_create-mask_ghsgdk_k)

Orientation:
  AIL

Dimensions:
(160, 512, 512, 1, 1.0, 0.48828128, 0.48828125, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-15_create-mask_ghsgdk_k

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/sub-MS6_F1994_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/sub-MS6_F1994_FLAIR_Trio.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_crop.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 430, in loadFromPath
    self.data = np.asanyarray(im_file.dataobj)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/arrayproxy.py", line 391, in __array__
    arr = self._get_scaled(dtype=dtype, slicer=())
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/arrayproxy.py", line 358, in _get_scaled
    scaled = apply_read_scaling(self._get_unscaled(slicer=slicer), scl_slope, scl_inter)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/arrayproxy.py", line 332, in _get_unscaled
    return array_from_file(self._shape,
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/volumeutils.py", line 522, in array_from_file
    n_read = infile.readinto(data_bytes)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/gzip.py", line 300, in read
    return self._buffer.read(size)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/_compression.py", line 68, in readinto
    data = self.read(len(byte_view))
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/gzip.py", line 506, in read
    raise EOFError("Compressed file ended before the "
EOFError: Compressed file ended before the end-of-stream marker was reached
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-30_smooth-spinalcord_vy1u4_vl)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-30_smooth-spinalcord_vy1u4_vl/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-30_smooth-spinalcord_vy1u4_vl/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-33_straighten-spinalcord_bkxv7gfc)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.11 mm
Error on approximation = 0.08 mm
Error on approximation = 0.08 mm
Error on approximation = 0.07 mm
Error on approximation = 0.06 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 78.22569264845166
Size of spinal cord in z direction: 77.66612680669733
Ratio length/size: 1.0072047604890484
Safe zone boundaries (curved space): [-126.31438378898326, -48.64825698228593]
Safe zone boundaries (straight space): [-126.59416670986042, -48.36847406140877]
Pad input volume to account for spinal cord length...
Time to generate centerline: 12.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-33_straighten-spinalcord_bkxv7gfc
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-33_straighten-spinalcord_bkxv7gfc/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-33_straighten-spinalcord_bkxv7gfc/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-33_straighten-spinalcord_bkxv7gfc/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-33_straighten-spinalcord_bkxv7gfc
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-30_smooth-spinalcord_vy1u4_vl

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-46-30_smooth-spinalcord_vy1u4_vl

Finished! Elapsed time: 164s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_crop.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_crop.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_seg.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-49-19_deepseg-sc_vcrcgrdb)
Reorient the image to RPI, if necessary...
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/resampling.py", line 107, in resample_nib
    R[i, i] = img.shape[i] / float(shape_r[i])
ZeroDivisionError: float division by zero

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_deepseg_sc.py", line 211, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_deepseg_sc.py", line 190, in main
    deep_segmentation_spinalcord(im_image.copy(), contrast_type, ctr_algo=ctr_algo,
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/deepseg_/sc.py", line 442, in deep_segmentation_spinalcord
    resampling.resample_nib(im_image, new_size=[0.5, 0.5, im_image.dim[6]], new_size_type='mm',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/resampling.py", line 109, in resample_nib
    raise ZeroDivisionError("Destination size is zero for dimension {}. You are trying to resample to an "
ZeroDivisionError: Destination size is zero for dimension 0. You are trying to resample to an unrealistic dimension. Check your NIFTI pixdim values to make sure they are not corrupted.

--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_crop.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-49-22_create-mask_a7bxmici)

Orientation:
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
  RPI
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m

Dimensions:
(0, 1, 1, 1, 0.97265625, 0.9726562, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'float64', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-49-22_create-mask_a7bxmici

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_crop.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_crop.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'int64', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/cropping.py", line 116, in get_bbox_from_mask
    min(data_nonzero[0]), max(data_nonzero[0]),
ValueError: min() arg is an empty sequence
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-49-28_smooth-spinalcord_iel5qncp)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-49-28_smooth-spinalcord_iel5qncp/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-49-28_smooth-spinalcord_iel5qncp/centerline.nii.gz
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-49-29_straighten-spinalcord_jemm4i8z)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 22.82 mm
Error on approximation = 12.91 mm
Error on approximation = 9.23 mm
Error on approximation = 14.92 mm
Create the straight space and the safe zone
Length of spinal cord: 50.33027300993467
Size of spinal cord in z direction: 10.997168291613065
Ratio length/size: 4.5766575244937195
Safe zone boundaries (curved space): [-88.0806522901153, -77.08348399850223]
Safe zone boundaries (straight space): [-107.7472046492761, -57.41693163934143]
Pad input volume to account for spinal cord length...
Time to generate centerline: 4.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 2 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-49-29_straighten-spinalcord_jemm4i8z
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 288, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 217, in main
    sct_straighten_spinalcord.main([
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_straighten_spinalcord.py", line 261, in main
    fname_straight = sc_straight.straighten()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/straightening.py", line 523, in straighten
    sct_apply_transfo.main(['-i', 'data.nii',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_apply_transfo.py", line 353, in main
    transform.apply()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_apply_transfo.py", line 214, in apply
    run_proc(['isct_antsApplyTransforms',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/utils/sys.py", line 349, in run_proc
    raise RuntimeError(output)
RuntimeError: ** ERROR: nifti_convert_nhdr2nim: bad dim[1]
Exception caught during reference file reading

itk::ExceptionObject (0x7fc44e727360)
Location: "unknown"
File: /Users/runner/work/build_ANTs/build_ANTs/antsbin/ITKv5/Modules/IO/NIFTI/src/itkNiftiImageIO.cxx
Line: 1025
Description: itk::ERROR: NiftiImageIO(0x7fc44e729ed0): data.nii is not recognized as a NIFTI file

file data.nii
libc++abi: terminating with uncaught exception of type itk::ExceptionObject: /Users/runner/work/build_ANTs/build_ANTs/antsbin/ITKv5/Modules/Core/Common/src/itkProcessObject.cxx:1340:
itk::ERROR: ResampleImageFilter(0x7fc44f904850): Input Primary is required but not set.

--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/t1_seg.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_crop.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_crop.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_seg.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-50-19_deepseg-sc_jk4vsyr2)
Reorient the image to RPI, if necessary...
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/resampling.py", line 107, in resample_nib
    R[i, i] = img.shape[i] / float(shape_r[i])
ZeroDivisionError: float division by zero

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_deepseg_sc.py", line 211, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_deepseg_sc.py", line 190, in main
    deep_segmentation_spinalcord(im_image.copy(), contrast_type, ctr_algo=ctr_algo,
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/deepseg_/sc.py", line 442, in deep_segmentation_spinalcord
    resampling.resample_nib(im_image, new_size=[0.5, 0.5, im_image.dim[6]], new_size_type='mm',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/resampling.py", line 109, in resample_nib
    raise ZeroDivisionError("Destination size is zero for dimension {}. You are trying to resample to an "
ZeroDivisionError: Destination size is zero for dimension 0. You are trying to resample to an unrealistic dimension. Check your NIFTI pixdim values to make sure they are not corrupted.

--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_crop.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-50-22_create-mask_8ms0magl)

Orientation:
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
  RPI
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m

Dimensions:
(0, 1, 1, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'float64', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-50-22_create-mask_8ms0magl

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_crop.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_crop.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mImage header specifies datatype 'int64', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/cropping.py", line 116, in get_bbox_from_mask
    min(data_nonzero[0]), max(data_nonzero[0]),
ValueError: min() arg is an empty sequence
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-50-28_smooth-spinalcord_kq0004hq)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-50-28_smooth-spinalcord_kq0004hq/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-50-28_smooth-spinalcord_kq0004hq/centerline.nii.gz
[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-50-28_straighten-spinalcord_tb0f483z)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 15.18 mm
Error on approximation = 10.2 mm
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
Create the straight space and the safe zone
Length of spinal cord: 26.81154747199701
Size of spinal cord in z direction: 13.997675949708523
Ratio length/size: 1.9154285017260535
Safe zone boundaries (curved space): [-64.83921349515893, -50.84153754545041]
Safe zone boundaries (straight space): [-71.24614925630317, -44.43460178430617]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 2 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-50-28_straighten-spinalcord_tb0f483z
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 288, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 217, in main
    sct_straighten_spinalcord.main([
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_straighten_spinalcord.py", line 261, in main
    fname_straight = sc_straight.straighten()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/straightening.py", line 523, in straighten
    sct_apply_transfo.main(['-i', 'data.nii',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_apply_transfo.py", line 353, in main
    transform.apply()
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_apply_transfo.py", line 214, in apply
    run_proc(['isct_antsApplyTransforms',
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/utils/sys.py", line 349, in run_proc
    raise RuntimeError(output)
RuntimeError: ** ERROR: nifti_convert_nhdr2nim: bad dim[1]
Exception caught during reference file reading

itk::ExceptionObject (0x7fd900208e20)
Location: "unknown"
File: /Users/runner/work/build_ANTs/build_ANTs/antsbin/ITKv5/Modules/IO/NIFTI/src/itkNiftiImageIO.cxx
Line: 1025
Description: itk::ERROR: NiftiImageIO(0x7fd900208bf0): data.nii is not recognized as a NIFTI file

file data.nii
libc++abi: terminating with uncaught exception of type itk::ExceptionObject: /Users/runner/work/build_ANTs/build_ANTs/antsbin/ITKv5/Modules/Core/Common/src/itkProcessObject.cxx:1340:
itk::ERROR: ResampleImageFilter(0x7fd8fef04e70): Input Primary is required but not set.

--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/t1_seg.nii.gz
--

[33mImage header specifies datatype 'int16', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS6/ses-Trio2/anat/anat_flat.nii.gz: No such file or directory
Processing subject in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-09_deepseg-sc_l3g1rswe)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-11_optic-detect-centerline_bqxxiba9)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-11_optic-detect-centerline_bqxxiba9
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-09_deepseg-sc_l3g1rswe
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-18_create-mask_rr8n8t83)

Orientation:
  AIL

Dimensions:
(40, 42, 94, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-18_create-mask_rr8n8t83

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 42], y=[0, 94], z=[0, 40]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-23_smooth-spinalcord_vtd7ymj8)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-23_smooth-spinalcord_vtd7ymj8/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-23_smooth-spinalcord_vtd7ymj8/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-23_straighten-spinalcord_h6362e5j)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.49 mm
Error on approximation = 0.16 mm
Error on approximation = 0.17 mm
Error on approximation = 0.15 mm
Error on approximation = 0.14 mm
Error on approximation = 0.13 mm
Error on approximation = 0.13 mm
Create the straight space and the safe zone
Length of spinal cord: 95.66480845061388
Size of spinal cord in z direction: 94.453125
Ratio length/size: 1.0128284103952503
Safe zone boundaries (curved space): [-139.06346130371094, -44.61033630371094]
Safe zone boundaries (straight space): [-139.66930302901787, -44.004494578404]
Pad input volume to account for spinal cord length...
Time to generate centerline: 11.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-23_straighten-spinalcord_h6362e5j
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-23_straighten-spinalcord_h6362e5j/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-23_straighten-spinalcord_h6362e5j/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-23_straighten-spinalcord_h6362e5j/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-23_straighten-spinalcord_h6362e5j
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-23_smooth-spinalcord_vtd7ymj8

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-23_smooth-spinalcord_vtd7ymj8

Finished! Elapsed time: 5s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/sub-MS7_F1974_MPRAGE_Aera1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/sub-MS7_F1974_MPRAGE_Aera1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-37_deepseg-sc_r71k5tqc)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-19_optic-detect-centerline_3pq99h5l)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-19_optic-detect-centerline_3pq99h5l
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #54[0m
[33mFilling a hole in the segmentation around z_slice #:1[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 2[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-51-37_deepseg-sc_r71k5tqc
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/sub-MS7_F1974_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/sub-MS7_F1974_MPRAGE_Aera1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-38_create-mask__1v_tx5n)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.97656256, 0.9765625, 1.5000001, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-38_create-mask__1v_tx5n

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/sub-MS7_F1974_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/sub-MS7_F1974_MPRAGE_Aera1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_crop.nii.gz
--

Bounding box: x=[84, 126], y=[42, 109], z=[0, 54]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/sub-MS7_F1974_MPRAGE_Aera1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-44_smooth-spinalcord_x2w2unr2)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-44_smooth-spinalcord_x2w2unr2/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-44_smooth-spinalcord_x2w2unr2/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-44_straighten-spinalcord_yvpe5x6f)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.67 mm
Error on approximation = 0.23 mm
Error on approximation = 0.13 mm
Error on approximation = 0.14 mm
Error on approximation = 0.13 mm
Create the straight space and the safe zone
Length of spinal cord: 87.40345988906017
Size of spinal cord in z direction: 84.6436667935779
Ratio length/size: 1.0326048386137692
Safe zone boundaries (curved space): [-127.88864791624361, -43.244981122665706]
Safe zone boundaries (straight space): [-129.26854446398474, -41.86508457492457]
Pad input volume to account for spinal cord length...
Time to generate centerline: 4.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-44_straighten-spinalcord_yvpe5x6f
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-44_straighten-spinalcord_yvpe5x6f/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-44_straighten-spinalcord_yvpe5x6f/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-44_straighten-spinalcord_yvpe5x6f/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-44_straighten-spinalcord_yvpe5x6f
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-44_smooth-spinalcord_x2w2unr2

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-53-44_smooth-spinalcord_x2w2unr2

Finished! Elapsed time: 35s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/sub-MS7_F1974_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/sub-MS7_F1974_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-54-24_deepseg-sc_4lf0m4yp)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-02_optic-detect-centerline_h6d0b30p)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-02_optic-detect-centerline_h6d0b30p
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #54[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 3, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-54-24_deepseg-sc_4lf0m4yp
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/sub-MS7_F1974_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/sub-MS7_F1974_MPRAGE_Aera2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-20_create-mask_1rki21bo)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.97656256, 0.9765625, 1.5000001, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-20_create-mask_1rki21bo

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/sub-MS7_F1974_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/sub-MS7_F1974_MPRAGE_Aera2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_crop.nii.gz
--

Bounding box: x=[87, 126], y=[48, 109], z=[3, 54]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/sub-MS7_F1974_MPRAGE_Aera2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-30_smooth-spinalcord_8a8t7jv7)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-30_smooth-spinalcord_8a8t7jv7/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-30_smooth-spinalcord_8a8t7jv7/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-30_straighten-spinalcord_yl8lip9v)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.43 mm
Error on approximation = 0.18 mm
Error on approximation = 0.17 mm
Error on approximation = 0.14 mm
Error on approximation = 0.13 mm
Error on approximation = 0.12 mm
Error on approximation = 0.11 mm
Error on approximation = 0.09 mm
Error on approximation = 0.07 mm
Error on approximation = 0.07 mm
Error on approximation = 0.07 mm
Create the straight space and the safe zone
Length of spinal cord: 80.2038936561096
Size of spinal cord in z direction: 78.6497247546146
Ratio length/size: 1.0197606400574697
Safe zone boundaries (curved space): [-122.39878889391066, -43.74906413929607]
Safe zone boundaries (straight space): [-123.17587334465816, -42.971979688548565]
Pad input volume to account for spinal cord length...
Time to generate centerline: 5.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-30_straighten-spinalcord_yl8lip9v
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-30_straighten-spinalcord_yl8lip9v/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-30_straighten-spinalcord_yl8lip9v/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-30_straighten-spinalcord_yl8lip9v/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-30_straighten-spinalcord_yl8lip9v
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-30_smooth-spinalcord_8a8t7jv7

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-56-30_smooth-spinalcord_8a8t7jv7

Finished! Elapsed time: 38s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Aera2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/sub-MS7_F1974_FLAIR_Avanto.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/sub-MS7_F1974_FLAIR_Avanto.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-57-19_deepseg-sc_5iv2_26r)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-57-40_optic-detect-centerline_99rjvkec)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-57-40_optic-detect-centerline_99rjvkec
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Spinal cord could not be detected for /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/sub-MS7_F1974_FLAIR_Avanto.nii.gz
    EmptyArrayError: 'Spinal cord not detected. Please make sure that there is sufficient contrast between the spinal cord and CSF to ensure good results.'

--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/sub-MS7_F1974_FLAIR_Avanto.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/mask_t1.nii.gz
--


ERROR: The file /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_seg.nii.gz does not exist. Exit program.


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/sub-MS7_F1974_FLAIR_Avanto.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_crop.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 42, in load
    stat_result = os.stat(filename)
FileNotFoundError: [Errno 2] No such file or directory: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/mask_t1.nii.gz'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 285, in __init__
    raise e
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 428, in loadFromPath
    im_file = nib.load(self.absolutepath, mmap=mmap)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 44, in load
    raise FileNotFoundError(f"No such file or no access: '{filename}'")
FileNotFoundError: No such file or no access: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/mask_t1.nii.gz'
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 42, in load
    stat_result = os.stat(filename)
FileNotFoundError: [Errno 2] No such file or directory: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_crop.nii.gz'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 288, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 151, in main
    nx, ny, nz, nt, px, py, pz, pt = Image(fname_anat).dim
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 285, in __init__
    raise e
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 428, in loadFromPath
    im_file = nib.load(self.absolutepath, mmap=mmap)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 44, in load
    raise FileNotFoundError(f"No such file or no access: '{filename}'")
FileNotFoundError: No such file or no access: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_crop.nii.gz'

--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 42, in load
    stat_result = os.stat(filename)
FileNotFoundError: [Errno 2] No such file or directory: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_crop.nii.gz'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 46, in main
    im_anat = Image(fname_anat)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 285, in __init__
    raise e
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 428, in loadFromPath
    im_file = nib.load(self.absolutepath, mmap=mmap)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 44, in load
    raise FileNotFoundError(f"No such file or no access: '{filename}'")
FileNotFoundError: No such file or no access: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/t1_crop.nii.gz'
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/sub-MS7_F1974_MPRAGE_Avanto1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/sub-MS7_F1974_MPRAGE_Avanto1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-58-25_deepseg-sc_42z_j1q4)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-58-47_optic-detect-centerline_so9l0bxy)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-58-47_optic-detect-centerline_so9l0bxy
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:3[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 4[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-58-25_deepseg-sc_42z_j1q4
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/sub-MS7_F1974_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/sub-MS7_F1974_MPRAGE_Avanto1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-08_create-mask_3vmn5kxm)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.4999999, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-08_create-mask_3vmn5kxm

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/sub-MS7_F1974_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/sub-MS7_F1974_MPRAGE_Avanto1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 37], y=[220, 256], z=[2, 9]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/sub-MS7_F1974_MPRAGE_Avanto1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-14_smooth-spinalcord_lnc887wh)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-14_smooth-spinalcord_lnc887wh/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-14_smooth-spinalcord_lnc887wh/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-15_straighten-spinalcord_v17et7ei)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 1.79 mm
Error on approximation = 0.85 mm
Create the straight space and the safe zone
Length of spinal cord: 31.947513924261724
Size of spinal cord in z direction: 9.468180056040481
Ratio length/size: 3.37419796995516
Safe zone boundaries (curved space): [-90.98153539343426, -81.51335533739378]
Safe zone boundaries (straight space): [-102.22120232754486, -70.27368840328313]
Pad input volume to account for spinal cord length...
Time to generate centerline: 2.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-15_straighten-spinalcord_v17et7ei
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-15_straighten-spinalcord_v17et7ei/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-15_straighten-spinalcord_v17et7ei/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-15_straighten-spinalcord_v17et7ei/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-15_straighten-spinalcord_v17et7ei
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-14_smooth-spinalcord_lnc887wh

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_14-59-14_smooth-spinalcord_lnc887wh

Finished! Elapsed time: 47s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/sub-MS7_F1974_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/sub-MS7_F1974_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-09_deepseg-sc_95jwpp6b)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-32_optic-detect-centerline_jevfqx6f)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-32_optic-detect-centerline_jevfqx6f
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:2[0m
[33mFilling a hole in the segmentation around z_slice #:7[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 4[0m
[33m
No properties for slice: 5[0m
[33m
No properties for slice: 8[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-09_deepseg-sc_95jwpp6b
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/sub-MS7_F1974_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/sub-MS7_F1974_MPRAGE_Avanto2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-51_create-mask_m_t9y9jp)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.4999999, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-51_create-mask_m_t9y9jp

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/sub-MS7_F1974_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/sub-MS7_F1974_MPRAGE_Avanto2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_crop.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 428, in loadFromPath
    im_file = nib.load(self.absolutepath, mmap=mmap)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 46, in load
    raise ImageFileError(f"Empty file: '{filename}'")
nibabel.filebasedimages.ImageFileError: Empty file: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/mask_t1.nii.gz'
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-57_smooth-spinalcord_qebbumyj)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-57_smooth-spinalcord_qebbumyj/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-57_smooth-spinalcord_qebbumyj/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-57_straighten-spinalcord_q850kmz2)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 1.66 mm
Error on approximation = 1.29 mm
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
Create the straight space and the safe zone
Length of spinal cord: 20.298817156967036
Size of spinal cord in z direction: 12.596547468539086
Ratio length/size: 1.6114587912017164
Safe zone boundaries (curved space): [-92.19574218848557, -79.59919471994648]
Safe zone boundaries (straight space): [-96.04687703269954, -75.74805987573251]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-57_straighten-spinalcord_q850kmz2
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-57_straighten-spinalcord_q850kmz2/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-57_straighten-spinalcord_q850kmz2/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-57_straighten-spinalcord_q850kmz2/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-57_straighten-spinalcord_q850kmz2
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-57_smooth-spinalcord_qebbumyj

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-00-57_smooth-spinalcord_qebbumyj

Finished! Elapsed time: 37s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Avanto2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/sub-MS7_F1974_FLAIR_Trio.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/sub-MS7_F1974_FLAIR_Trio.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-01-39_deepseg-sc_5qydljxz)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-02-09_optic-detect-centerline_drx5wbyu)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-02-09_optic-detect-centerline_drx5wbyu
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Spinal cord could not be detected for /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/sub-MS7_F1974_FLAIR_Trio.nii.gz
    EmptyArrayError: 'Spinal cord not detected. Please make sure that there is sufficient contrast between the spinal cord and CSF to ensure good results.'

--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/sub-MS7_F1974_FLAIR_Trio.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/mask_t1.nii.gz
--


ERROR: The file /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_seg.nii.gz does not exist. Exit program.


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/sub-MS7_F1974_FLAIR_Trio.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_crop.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 42, in load
    stat_result = os.stat(filename)
FileNotFoundError: [Errno 2] No such file or directory: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/mask_t1.nii.gz'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 285, in __init__
    raise e
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 428, in loadFromPath
    im_file = nib.load(self.absolutepath, mmap=mmap)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 44, in load
    raise FileNotFoundError(f"No such file or no access: '{filename}'")
FileNotFoundError: No such file or no access: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/mask_t1.nii.gz'
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 42, in load
    stat_result = os.stat(filename)
FileNotFoundError: [Errno 2] No such file or directory: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_crop.nii.gz'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 288, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 151, in main
    nx, ny, nz, nt, px, py, pz, pt = Image(fname_anat).dim
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 285, in __init__
    raise e
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 428, in loadFromPath
    im_file = nib.load(self.absolutepath, mmap=mmap)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 44, in load
    raise FileNotFoundError(f"No such file or no access: '{filename}'")
FileNotFoundError: No such file or no access: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_crop.nii.gz'

--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 42, in load
    stat_result = os.stat(filename)
FileNotFoundError: [Errno 2] No such file or directory: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_crop.nii.gz'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 46, in main
    im_anat = Image(fname_anat)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 285, in __init__
    raise e
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 428, in loadFromPath
    im_file = nib.load(self.absolutepath, mmap=mmap)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 44, in load
    raise FileNotFoundError(f"No such file or no access: '{filename}'")
FileNotFoundError: No such file or no access: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/t1_crop.nii.gz'
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/sub-MS7_F1974_MPRAGE_Trio1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/sub-MS7_F1974_MPRAGE_Trio1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-03-14_deepseg-sc_b7tjw6zk)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-03-52_optic-detect-centerline_1_jtao_7)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-03-52_optic-detect-centerline_1_jtao_7
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:0[0m
[33mFilling a hole in the segmentation around z_slice #:5[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 1[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 4[0m
[33m
No properties for slice: 6[0m
[33m
No properties for slice: 7[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-03-14_deepseg-sc_b7tjw6zk
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/sub-MS7_F1974_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/sub-MS7_F1974_MPRAGE_Trio1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-14_create-mask_r8ed5x0u)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.9726562, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-14_create-mask_r8ed5x0u

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/sub-MS7_F1974_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/sub-MS7_F1974_MPRAGE_Trio1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 34], y=[224, 256], z=[0, 9]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/sub-MS7_F1974_MPRAGE_Trio1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-20_smooth-spinalcord_85tpg8ni)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-20_smooth-spinalcord_85tpg8ni/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-20_smooth-spinalcord_85tpg8ni/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-21_straighten-spinalcord_hvmjeuzk)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.35 mm
Error on approximation = 0.12 mm
Error on approximation = 0.25 mm
Error on approximation = 0.5 mm
Create the straight space and the safe zone
Length of spinal cord: 13.883738120981132
Size of spinal cord in z direction: 11.809006458179525
Ratio length/size: 1.1756906197103942
Safe zone boundaries (curved space): [-87.88257280600362, -76.0735663478241]
Safe zone boundaries (straight space): [-88.91993863740443, -75.03620051642329]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-21_straighten-spinalcord_hvmjeuzk
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-21_straighten-spinalcord_hvmjeuzk/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-21_straighten-spinalcord_hvmjeuzk/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-21_straighten-spinalcord_hvmjeuzk/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-21_straighten-spinalcord_hvmjeuzk
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-20_smooth-spinalcord_85tpg8ni

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-04-20_smooth-spinalcord_85tpg8ni

Finished! Elapsed time: 36s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/sub-MS7_F1974_MPRAGE_Trio2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/sub-MS7_F1974_MPRAGE_Trio2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-05-00_deepseg-sc_cei95ghg)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-05-32_optic-detect-centerline_45f2ssih)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-05-32_optic-detect-centerline_45f2ssih
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:4[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 5[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-05-00_deepseg-sc_cei95ghg
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/sub-MS7_F1974_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/sub-MS7_F1974_MPRAGE_Trio2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-05-55_create-mask_bwv5cik2)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.9726562, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-05-55_create-mask_bwv5cik2

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/sub-MS7_F1974_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/sub-MS7_F1974_MPRAGE_Trio2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 40], y=[213, 256], z=[1, 10]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/sub-MS7_F1974_MPRAGE_Trio2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-01_smooth-spinalcord_1t7ny5de)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-01_smooth-spinalcord_1t7ny5de/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-01_smooth-spinalcord_1t7ny5de/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-02_straighten-spinalcord_8405u5dq)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 13.89 mm
Error on approximation = 9.77 mm
Error on approximation = 12.47 mm
Error on approximation = 18.79 mm
Create the straight space and the safe zone
Length of spinal cord: 30.469254723587383
Size of spinal cord in z direction: 12.072251163865474
Ratio length/size: 2.5239082843792726
Safe zone boundaries (curved space): [-86.64288802857503, -74.57063686470956]
Safe zone boundaries (straight space): [-95.84138980843599, -65.3721350848486]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-02_straighten-spinalcord_8405u5dq
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-02_straighten-spinalcord_8405u5dq/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-02_straighten-spinalcord_8405u5dq/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-02_straighten-spinalcord_8405u5dq/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-02_straighten-spinalcord_8405u5dq
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-01_smooth-spinalcord_1t7ny5de

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-01_smooth-spinalcord_1t7ny5de

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS7/ses-Trio2/anat/anat_flat.nii.gz: No such file or directory
Processing subject in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/sub-MS8_M1962_FLAIR_Aera.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/sub-MS8_M1962_FLAIR_Aera.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-45_deepseg-sc_dmu2aypk)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-09-54_optic-detect-centerline_m4c5azto)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-09-54_optic-detect-centerline_m4c5azto
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-06-45_deepseg-sc_dmu2aypk
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/sub-MS8_M1962_FLAIR_Aera.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/sub-MS8_M1962_FLAIR_Aera.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-25_create-mask_31an6b7j)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 0.99999994, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-25_create-mask_31an6b7j

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/sub-MS8_M1962_FLAIR_Aera.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/sub-MS8_M1962_FLAIR_Aera.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_crop.nii.gz
--

Bounding box: x=[109, 154], y=[1, 87], z=[67, 104]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/sub-MS8_M1962_FLAIR_Aera.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-31_smooth-spinalcord_0ru__0vl)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-31_smooth-spinalcord_0ru__0vl/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-31_smooth-spinalcord_0ru__0vl/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-31_straighten-spinalcord_6ap18bf_)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.38 mm
Error on approximation = 0.21 mm
Error on approximation = 0.17 mm
Error on approximation = 0.13 mm
Error on approximation = 0.09 mm
Error on approximation = 0.07 mm
Error on approximation = 0.06 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Create the straight space and the safe zone
Length of spinal cord: 88.04091771229243
Size of spinal cord in z direction: 86.29341617284038
Ratio length/size: 1.0202506937024247
Safe zone boundaries (curved space): [-112.71367441832389, -26.42025824548351]
Safe zone boundaries (straight space): [-113.58742518804992, -25.54650747575748]
Pad input volume to account for spinal cord length...
Time to generate centerline: 7.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-31_straighten-spinalcord_6ap18bf_
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-31_straighten-spinalcord_6ap18bf_/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-31_straighten-spinalcord_6ap18bf_/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-31_straighten-spinalcord_6ap18bf_/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-31_straighten-spinalcord_6ap18bf_
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-31_smooth-spinalcord_0ru__0vl

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-10-31_smooth-spinalcord_0ru__0vl

Finished! Elapsed time: 41s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/sub-MS8_M1962_MPRAGE_Aera1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/sub-MS8_M1962_MPRAGE_Aera1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-11-15_deepseg-sc_skooyg07)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-07_optic-detect-centerline_18w7gpik)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mTo avoid intensity overflow due to convertion to +uint16+, intensity will be rescaled to the maximum quantization scale[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-07_optic-detect-centerline_18w7gpik
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-11-15_deepseg-sc_skooyg07
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/sub-MS8_M1962_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/sub-MS8_M1962_MPRAGE_Aera1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-41_create-mask_gxj0ry66)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-41_create-mask_gxj0ry66

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/sub-MS8_M1962_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/sub-MS8_M1962_MPRAGE_Aera1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_crop.nii.gz
--

Bounding box: x=[100, 137], y=[76, 118], z=[1, 55]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/sub-MS8_M1962_MPRAGE_Aera1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-48_smooth-spinalcord_lcgsbzjc)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-48_smooth-spinalcord_lcgsbzjc/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-48_smooth-spinalcord_lcgsbzjc/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-49_straighten-spinalcord_hu454539)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.17 mm
Error on approximation = 0.09 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 80.16015291467814
Size of spinal cord in z direction: 79.12706990369863
Ratio length/size: 1.0130559998270734
Safe zone boundaries (curved space): [-104.35105297282706, -25.223983069128437]
Safe zone boundaries (straight space): [-104.86759447831682, -24.70744156363868]
Pad input volume to account for spinal cord length...
Time to generate centerline: 7.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-49_straighten-spinalcord_hu454539
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-49_straighten-spinalcord_hu454539/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-49_straighten-spinalcord_hu454539/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-49_straighten-spinalcord_hu454539/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-49_straighten-spinalcord_hu454539
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-48_smooth-spinalcord_lcgsbzjc

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-12-48_smooth-spinalcord_lcgsbzjc

Finished! Elapsed time: 38s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/sub-MS8_M1962_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/sub-MS8_M1962_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-13-30_deepseg-sc_e24gdvxh)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-14-33_optic-detect-centerline_dl3yg26n)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-14-33_optic-detect-centerline_dl3yg26n
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #55[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-13-30_deepseg-sc_e24gdvxh
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/sub-MS8_M1962_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/sub-MS8_M1962_MPRAGE_Aera2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-07_create-mask_t55vdsb6)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-07_create-mask_t55vdsb6

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/sub-MS8_M1962_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/sub-MS8_M1962_MPRAGE_Aera2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_crop.nii.gz
--

Bounding box: x=[99, 139], y=[77, 119], z=[0, 55]
Cropping the image...

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/sub-MS8_M1962_MPRAGE_Aera2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-13_smooth-spinalcord_zoztpj_0)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-13_smooth-spinalcord_zoztpj_0/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-13_smooth-spinalcord_zoztpj_0/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-13_straighten-spinalcord_5pyd7e4j)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.52 mm
Error on approximation = 0.38 mm
Error on approximation = 0.41 mm
Error on approximation = 0.35 mm
Error on approximation = 0.3 mm
Error on approximation = 0.25 mm
Error on approximation = 0.18 mm
Error on approximation = 0.14 mm
Error on approximation = 0.1 mm
Error on approximation = 0.08 mm
Error on approximation = 0.07 mm
Error on approximation = 0.05 mm
Error on approximation = 0.1 mm
Error on approximation = 0.16 mm
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
Error on approximation = 44.5 mm
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
Create the straight space and the safe zone
Length of spinal cord: 86.97648977640672
Size of spinal cord in z direction: 80.30559608597132
Ratio length/size: 1.083068852179291
Safe zone boundaries (curved space): [-105.63197639835818, -25.32638031238686]
Safe zone boundaries (straight space): [-108.96742324357588, -21.990933467169157]
Pad input volume to account for spinal cord length...
Time to generate centerline: 6.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-13_straighten-spinalcord_5pyd7e4j
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-13_straighten-spinalcord_5pyd7e4j/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-13_straighten-spinalcord_5pyd7e4j/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-13_straighten-spinalcord_5pyd7e4j/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-13_straighten-spinalcord_5pyd7e4j
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-13_smooth-spinalcord_zoztpj_0

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-13_smooth-spinalcord_zoztpj_0

Finished! Elapsed time: 41s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_seg.nii.gz
--


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Aera2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/sub-MS8_M1962_FLAIR_Avanto.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/sub-MS8_M1962_FLAIR_Avanto.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-58_deepseg-sc_xt3s3m3a)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-16-24_optic-detect-centerline_6j_9ft0s)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-16-24_optic-detect-centerline_6j_9ft0s
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-15-58_deepseg-sc_xt3s3m3a

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/sub-MS8_M1962_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/sub-MS8_M1962_FLAIR_Avanto.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-16-58_create-mask_t145hbtg)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-16-58_create-mask_t145hbtg

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/sub-MS8_M1962_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/sub-MS8_M1962_FLAIR_Avanto.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_crop.nii.gz
--

Bounding box: x=[110, 151], y=[0, 89], z=[69, 107]
Cropping the image...

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/sub-MS8_M1962_FLAIR_Avanto.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-04_smooth-spinalcord_cl0wcy6j)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-04_smooth-spinalcord_cl0wcy6j/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-04_smooth-spinalcord_cl0wcy6j/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-04_straighten-spinalcord_0lvft_a8)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.32 mm
Error on approximation = 0.14 mm
Error on approximation = 0.16 mm
Error on approximation = 0.14 mm
Error on approximation = 0.14 mm
Error on approximation = 0.14 mm
Error on approximation = 0.14 mm
Create the straight space and the safe zone
Length of spinal cord: 90.13237524969676
Size of spinal cord in z direction: 89.39151501615875
Ratio length/size: 1.0082878138199594
Safe zone boundaries (curved space): [-130.4220867763885, -41.03057176022976]
Safe zone boundaries (straight space): [-130.79251689315754, -40.66014164346075]
Pad input volume to account for spinal cord length...
Time to generate centerline: 31.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-04_straighten-spinalcord_0lvft_a8
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-04_straighten-spinalcord_0lvft_a8/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-04_straighten-spinalcord_0lvft_a8/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-04_straighten-spinalcord_0lvft_a8/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-04_straighten-spinalcord_0lvft_a8
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-04_smooth-spinalcord_cl0wcy6j

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-04_smooth-spinalcord_cl0wcy6j

Finished! Elapsed time: 41s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_seg.nii.gz
--


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/sub-MS8_M1962_MPRAGE_Avanto1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/sub-MS8_M1962_MPRAGE_Avanto1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-49_deepseg-sc_5jb9370b)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-18-58_optic-detect-centerline_t13akoly)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-18-58_optic-detect-centerline_t13akoly
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-17-49_deepseg-sc_5jb9370b
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/sub-MS8_M1962_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/sub-MS8_M1962_MPRAGE_Avanto1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-32_create-mask_7q4qgsxk)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-32_create-mask_7q4qgsxk

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/sub-MS8_M1962_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/sub-MS8_M1962_MPRAGE_Avanto1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_crop.nii.gz
--

Bounding box: x=[105, 144], y=[64, 111], z=[0, 54]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/sub-MS8_M1962_MPRAGE_Avanto1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-38_smooth-spinalcord_zc_zfup0)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-38_smooth-spinalcord_zc_zfup0/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-38_smooth-spinalcord_zc_zfup0/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-39_straighten-spinalcord_3_yz58n2)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.36 mm
Error on approximation = 0.15 mm
Error on approximation = 0.13 mm
Error on approximation = 0.12 mm
Error on approximation = 0.11 mm
Error on approximation = 0.12 mm
Error on approximation = 0.1 mm
Error on approximation = 0.1 mm
Error on approximation = 0.1 mm
Create the straight space and the safe zone
Length of spinal cord: 80.76831666216566
Size of spinal cord in z direction: 79.99665229668399
Ratio length/size: 1.0096462082265616
Safe zone boundaries (curved space): [-119.43369617592762, -39.43704387924363]
Safe zone boundaries (straight space): [-119.81952835866845, -39.051211696502804]
Pad input volume to account for spinal cord length...
Time to generate centerline: 11.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-39_straighten-spinalcord_3_yz58n2
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-39_straighten-spinalcord_3_yz58n2/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-39_straighten-spinalcord_3_yz58n2/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-39_straighten-spinalcord_3_yz58n2/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-39_straighten-spinalcord_3_yz58n2
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-38_smooth-spinalcord_zc_zfup0

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-19-38_smooth-spinalcord_zc_zfup0

Finished! Elapsed time: 43s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_seg.nii.gz
--


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/sub-MS8_M1962_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/sub-MS8_M1962_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-20-25_deepseg-sc_wa5m2qes)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-21-31_optic-detect-centerline_y479u3to)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-21-31_optic-detect-centerline_y479u3to
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 2, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-20-25_deepseg-sc_wa5m2qes
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/sub-MS8_M1962_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/sub-MS8_M1962_MPRAGE_Avanto2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-06_create-mask_umlv4s22)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-06_create-mask_umlv4s22

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/sub-MS8_M1962_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/sub-MS8_M1962_MPRAGE_Avanto2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_crop.nii.gz
--

Bounding box: x=[109, 148], y=[67, 109], z=[2, 55]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/sub-MS8_M1962_MPRAGE_Avanto2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-12_smooth-spinalcord_rhyr1y3y)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-12_smooth-spinalcord_rhyr1y3y/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-12_smooth-spinalcord_rhyr1y3y/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-13_straighten-spinalcord_1kkd_x81)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.49 mm
Error on approximation = 0.25 mm
Error on approximation = 0.14 mm
Error on approximation = 0.1 mm
Error on approximation = 0.09 mm
Error on approximation = 0.07 mm
Error on approximation = 0.07 mm
Error on approximation = 0.06 mm
Create the straight space and the safe zone
Length of spinal cord: 79.45608837730592
Size of spinal cord in z direction: 77.66334338688561
Ratio length/size: 1.0230835412466035
Safe zone boundaries (curved space): [-118.06073019394887, -40.397386807063256]
Safe zone boundaries (straight space): [-118.95710268915903, -39.501014311853105]
Pad input volume to account for spinal cord length...
Time to generate centerline: 68.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-13_straighten-spinalcord_1kkd_x81
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-13_straighten-spinalcord_1kkd_x81/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-13_straighten-spinalcord_1kkd_x81/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-13_straighten-spinalcord_1kkd_x81/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-13_straighten-spinalcord_1kkd_x81
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-12_smooth-spinalcord_rhyr1y3y

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-12_smooth-spinalcord_rhyr1y3y

Finished! Elapsed time: 42s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Avanto2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/sub-MS8_M1962_FLAIR_Trio.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/sub-MS8_M1962_FLAIR_Trio.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-58_deepseg-sc_phhkpvte)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-24-08_optic-detect-centerline_0x0m6740)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-24-08_optic-detect-centerline_0x0m6740
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-22-58_deepseg-sc_phhkpvte
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/sub-MS8_M1962_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/sub-MS8_M1962_FLAIR_Trio.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-24_create-mask_bc4ijqzx)

Orientation:
  AIL

Dimensions:
(160, 512, 512, 1, 1.0, 0.48828125, 0.48828125, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-24_create-mask_bc4ijqzx

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/sub-MS8_M1962_FLAIR_Trio.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/sub-MS8_M1962_FLAIR_Trio.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_crop.nii.gz
--

Bounding box: x=[237, 338], y=[0, 166], z=[63, 102]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/sub-MS8_M1962_FLAIR_Trio.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-37_smooth-spinalcord_jeozu0ah)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-37_smooth-spinalcord_jeozu0ah/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-37_smooth-spinalcord_jeozu0ah/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-40_straighten-spinalcord__tr6ycld)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.32 mm
Error on approximation = 0.2 mm
Error on approximation = 0.16 mm
Error on approximation = 0.15 mm
Error on approximation = 0.13 mm
Error on approximation = 0.13 mm
Error on approximation = 0.12 mm
Error on approximation = 0.11 mm
Error on approximation = 0.11 mm
Error on approximation = 0.1 mm
Error on approximation = 0.1 mm
Create the straight space and the safe zone
Length of spinal cord: 82.23225511033499
Size of spinal cord in z direction: 80.6243306312588
Ratio length/size: 1.0199434149280586
Safe zone boundaries (curved space): [-147.19421094950596, -66.56988031824716]
Safe zone boundaries (straight space): [-147.99817318904405, -65.76591807870906]
Pad input volume to account for spinal cord length...
Time to generate centerline: 13.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-40_straighten-spinalcord__tr6ycld
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-40_straighten-spinalcord__tr6ycld/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-40_straighten-spinalcord__tr6ycld/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-40_straighten-spinalcord__tr6ycld/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-40_straighten-spinalcord__tr6ycld
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-37_smooth-spinalcord_jeozu0ah

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-25-37_smooth-spinalcord_jeozu0ah

Finished! Elapsed time: 162s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/sub-MS8_M1962_MPRAGE_Trio1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/sub-MS8_M1962_MPRAGE_Trio1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-28-23_deepseg-sc_amtx3d14)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-28-47_optic-detect-centerline_mm3oiwna)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-28-47_optic-detect-centerline_mm3oiwna
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:0[0m
[33mFilling a hole in the segmentation around z_slice #:4[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 1[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 5[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-28-23_deepseg-sc_amtx3d14
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/sub-MS8_M1962_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/sub-MS8_M1962_MPRAGE_Trio1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-16_create-mask_y_rh7nb7)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-16_create-mask_y_rh7nb7

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/sub-MS8_M1962_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/sub-MS8_M1962_MPRAGE_Trio1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_crop.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 430, in loadFromPath
    self.data = np.asanyarray(im_file.dataobj)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/arrayproxy.py", line 391, in __array__
    arr = self._get_scaled(dtype=dtype, slicer=())
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/arrayproxy.py", line 358, in _get_scaled
    scaled = apply_read_scaling(self._get_unscaled(slicer=slicer), scl_slope, scl_inter)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/arrayproxy.py", line 332, in _get_unscaled
    return array_from_file(self._shape,
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/volumeutils.py", line 522, in array_from_file
    n_read = infile.readinto(data_bytes)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/gzip.py", line 300, in read
    return self._buffer.read(size)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/_compression.py", line 68, in readinto
    data = self.read(len(byte_view))
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/gzip.py", line 506, in read
    raise EOFError("Compressed file ended before the "
EOFError: Compressed file ended before the end-of-stream marker was reached
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-22_smooth-spinalcord_44unuca0)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-22_smooth-spinalcord_44unuca0/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-22_smooth-spinalcord_44unuca0/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-23_straighten-spinalcord_shwsth6_)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 3.13 mm
Error on approximation = 1.55 mm
Error on approximation = 13.33 mm
Error on approximation = 9.93 mm
Create the straight space and the safe zone
Length of spinal cord: 26.813944555311696
Size of spinal cord in z direction: 11.304334433193233
Ratio length/size: 2.37200559783309
Safe zone boundaries (curved space): [-104.7650077283417, -93.46067329514847]
Safe zone boundaries (straight space): [-112.51981278940094, -85.70586823408925]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-23_straighten-spinalcord_shwsth6_
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-23_straighten-spinalcord_shwsth6_/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-23_straighten-spinalcord_shwsth6_/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-23_straighten-spinalcord_shwsth6_/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-23_straighten-spinalcord_shwsth6_
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-22_smooth-spinalcord_44unuca0

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_smooth.nii.gz already exists. Will overwrite it.[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-29-22_smooth-spinalcord_44unuca0

Finished! Elapsed time: 41s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/sub-MS8_M1962_MPRAGE_Trio2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/sub-MS8_M1962_MPRAGE_Trio2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-30-07_deepseg-sc_mot3pn_p)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-30-32_optic-detect-centerline_wmef2isy)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-30-32_optic-detect-centerline_wmef2isy
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:6[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 7[0m
[33m
No properties for slice: 8[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-30-07_deepseg-sc_mot3pn_p
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/sub-MS8_M1962_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/sub-MS8_M1962_MPRAGE_Trio2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-02_create-mask_lazjmqf7)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.9726563, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-02_create-mask_lazjmqf7

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/sub-MS8_M1962_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/sub-MS8_M1962_MPRAGE_Trio2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 36], y=[217, 256], z=[1, 10]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/sub-MS8_M1962_MPRAGE_Trio2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-09_smooth-spinalcord_av33ylv2)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-09_smooth-spinalcord_av33ylv2/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-09_smooth-spinalcord_av33ylv2/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-10_straighten-spinalcord_4uj_fzbs)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 7.38 mm
Error on approximation = 9.47 mm
Error on approximation = 2.12 mm
Error on approximation = 7.52 mm
Create the straight space and the safe zone
Length of spinal cord: 28.481254923209253
Size of spinal cord in z direction: 9.914197991445803
Ratio length/size: 2.872774474322939
Safe zone boundaries (curved space): [-102.41502603481725, -92.50082804337144]
Safe zone boundaries (straight space): [-111.69855450069898, -83.21729957748971]
Pad input volume to account for spinal cord length...
Time to generate centerline: 2.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-10_straighten-spinalcord_4uj_fzbs
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-10_straighten-spinalcord_4uj_fzbs/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-10_straighten-spinalcord_4uj_fzbs/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-10_straighten-spinalcord_4uj_fzbs/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-10_straighten-spinalcord_4uj_fzbs
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-09_smooth-spinalcord_av33ylv2

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-09_smooth-spinalcord_av33ylv2

Finished! Elapsed time: 42s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS8/ses-Trio2/anat/anat_flat.nii.gz: No such file or directory
Processing subject in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/sub-MS9_M1996_FLAIR_Aera.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/sub-MS9_M1996_FLAIR_Aera.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-55_deepseg-sc_1b120o86)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-33-19_optic-detect-centerline_44arxkug)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-33-19_optic-detect-centerline_44arxkug
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-31-55_deepseg-sc_1b120o86
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/sub-MS9_M1996_FLAIR_Aera.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/sub-MS9_M1996_FLAIR_Aera.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-05_create-mask_7rleefia)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-05_create-mask_7rleefia

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/sub-MS9_M1996_FLAIR_Aera.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/sub-MS9_M1996_FLAIR_Aera.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_crop.nii.gz
--

Bounding box: x=[124, 160], y=[0, 89], z=[74, 110]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/sub-MS9_M1996_FLAIR_Aera.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-12_smooth-spinalcord_s0j45obr)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-12_smooth-spinalcord_s0j45obr/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-12_smooth-spinalcord_s0j45obr/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-12_straighten-spinalcord_bryklfwl)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.47 mm
Error on approximation = 0.22 mm
Error on approximation = 0.11 mm
Error on approximation = 0.08 mm
Error on approximation = 0.06 mm
Error on approximation = 0.05 mm
Error on approximation = 0.05 mm
Create the straight space and the safe zone
Length of spinal cord: 89.64189940373988
Size of spinal cord in z direction: 89.375
Ratio length/size: 1.0029862870348518
Safe zone boundaries (curved space): [-160.47108459472656, -71.09608459472656]
Safe zone boundaries (straight space): [-160.6045342965965, -70.96263489285661]
Pad input volume to account for spinal cord length...
Time to generate centerline: 43.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-12_straighten-spinalcord_bryklfwl
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-12_straighten-spinalcord_bryklfwl/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-12_straighten-spinalcord_bryklfwl/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-12_straighten-spinalcord_bryklfwl/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-12_straighten-spinalcord_bryklfwl
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-12_smooth-spinalcord_s0j45obr

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-12_smooth-spinalcord_s0j45obr

Finished! Elapsed time: 43s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/sub-MS9_M1996_MPRAGE_Aera1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/sub-MS9_M1996_MPRAGE_Aera1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-58_deepseg-sc_hsaa6z_v)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-01_optic-detect-centerline_ntgu8hj6)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-01_optic-detect-centerline_ntgu8hj6
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-34-58_deepseg-sc_hsaa6z_v
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/sub-MS9_M1996_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/sub-MS9_M1996_MPRAGE_Aera1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-29_create-mask_sto40ac8)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.97656244, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-29_create-mask_sto40ac8

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/sub-MS9_M1996_MPRAGE_Aera1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/sub-MS9_M1996_MPRAGE_Aera1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_crop.nii.gz
--

Bounding box: x=[96, 133], y=[60, 107], z=[0, 52]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/sub-MS9_M1996_MPRAGE_Aera1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-36_smooth-spinalcord_uw4meo3a)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-36_smooth-spinalcord_uw4meo3a/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-36_smooth-spinalcord_uw4meo3a/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-36_straighten-spinalcord_3xwiib4f)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.05 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 77.38878410424724
Size of spinal cord in z direction: 77.27784024966085
Ratio length/size: 1.001435649006597
Safe zone boundaries (curved space): [-148.19330418975727, -70.91546394009642]
Safe zone boundaries (straight space): [-148.24877611705045, -70.85999201280322]
Pad input volume to account for spinal cord length...
Time to generate centerline: 64.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-36_straighten-spinalcord_3xwiib4f
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-36_straighten-spinalcord_3xwiib4f/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-36_straighten-spinalcord_3xwiib4f/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-36_straighten-spinalcord_3xwiib4f/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-36_straighten-spinalcord_3xwiib4f
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-36_smooth-spinalcord_uw4meo3a

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-36-36_smooth-spinalcord_uw4meo3a

Finished! Elapsed time: 36s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/sub-MS9_M1996_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/sub-MS9_M1996_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-37-15_deepseg-sc_lxy9ptc9)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-10_optic-detect-centerline_k7vkfl4j)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-10_optic-detect-centerline_k7vkfl4j
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #50[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-37-15_deepseg-sc_lxy9ptc9
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/sub-MS9_M1996_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/sub-MS9_M1996_MPRAGE_Aera2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-52_create-mask_37uidpie)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.97656244, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-52_create-mask_37uidpie

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/sub-MS9_M1996_MPRAGE_Aera2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/sub-MS9_M1996_MPRAGE_Aera2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_crop.nii.gz
--

Bounding box: x=[96, 133], y=[60, 107], z=[0, 51]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/sub-MS9_M1996_MPRAGE_Aera2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-58_smooth-spinalcord_sft4vojh)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-58_smooth-spinalcord_sft4vojh/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-58_smooth-spinalcord_sft4vojh/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-59_straighten-spinalcord_ugj09rxn)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.07 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 75.78769595681165
Size of spinal cord in z direction: 75.69806268940124
Ratio length/size: 1.0011840893178228
Safe zone boundaries (curved space): [-148.14957337008386, -72.45151068068262]
Safe zone boundaries (straight space): [-148.19439000378907, -72.40669404697742]
Pad input volume to account for spinal cord length...
Time to generate centerline: 257.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-59_straighten-spinalcord_ugj09rxn
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-59_straighten-spinalcord_ugj09rxn/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-59_straighten-spinalcord_ugj09rxn/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-59_straighten-spinalcord_ugj09rxn/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-59_straighten-spinalcord_ugj09rxn
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-58_smooth-spinalcord_sft4vojh

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-38-58_smooth-spinalcord_sft4vojh

Finished! Elapsed time: 37s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Aera2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/sub-MS9_M1996_FLAIR_Avanto.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/sub-MS9_M1996_FLAIR_Avanto.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-39-38_deepseg-sc_u90u7otv)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-40-44_optic-detect-centerline_vi9ieufm)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-40-44_optic-detect-centerline_vi9ieufm
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-39-38_deepseg-sc_u90u7otv

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/sub-MS9_M1996_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/sub-MS9_M1996_FLAIR_Avanto.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-37_create-mask_8eciuuib)

Orientation:
  AIL

Dimensions:
(176, 224, 256, 1, 1.0, 1.015625, 1.015625, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-37_create-mask_8eciuuib

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/sub-MS9_M1996_FLAIR_Avanto.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/sub-MS9_M1996_FLAIR_Avanto.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_crop.nii.gz
--

Bounding box: x=[128, 163], y=[0, 88], z=[66, 105]
Cropping the image...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/sub-MS9_M1996_FLAIR_Avanto.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-43_smooth-spinalcord_uw5i_hmh)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-43_smooth-spinalcord_uw5i_hmh/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-43_smooth-spinalcord_uw5i_hmh/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-44_straighten-spinalcord_ltnfcksd)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.15 mm
Error on approximation = 0.11 mm
Error on approximation = 0.08 mm
Error on approximation = 0.06 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 88.70057892616272
Size of spinal cord in z direction: 88.2129138758249
Ratio length/size: 1.0055282727767536
Safe zone boundaries (curved space): [-115.06231370530752, -26.84939982948262]
Safe zone boundaries (straight space): [-115.30614623047643, -26.605567304313702]
Pad input volume to account for spinal cord length...
Time to generate centerline: 26.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-44_straighten-spinalcord_ltnfcksd
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-44_straighten-spinalcord_ltnfcksd/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-44_straighten-spinalcord_ltnfcksd/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-44_straighten-spinalcord_ltnfcksd/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-44_straighten-spinalcord_ltnfcksd
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-43_smooth-spinalcord_uw5i_hmh

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-41-43_smooth-spinalcord_uw5i_hmh

Finished! Elapsed time: 42s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_seg.nii.gz
--


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/sub-MS9_M1996_MPRAGE_Avanto1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/sub-MS9_M1996_MPRAGE_Avanto1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-42-29_deepseg-sc_yr4crwu5)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-07_optic-detect-centerline_46y_wq3d)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
[33mTo avoid intensity overflow due to convertion to +uint16+, intensity will be rescaled to the maximum quantization scale[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-07_optic-detect-centerline_46y_wq3d
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 2, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-42-29_deepseg-sc_yr4crwu5
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/sub-MS9_M1996_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/sub-MS9_M1996_MPRAGE_Avanto1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-43_create-mask_bf0o4mpu)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726563, 1.5000001, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-43_create-mask_bf0o4mpu

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/sub-MS9_M1996_MPRAGE_Avanto1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/sub-MS9_M1996_MPRAGE_Avanto1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_crop.nii.gz
--

Bounding box: x=[111, 153], y=[60, 106], z=[2, 55]
Cropping the image...

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/sub-MS9_M1996_MPRAGE_Avanto1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-51_smooth-spinalcord_k225z25n)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-51_smooth-spinalcord_k225z25n/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-51_smooth-spinalcord_k225z25n/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-52_straighten-spinalcord_an59m9jv)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.08 mm
Error on approximation = 0.05 mm
Error on approximation = 0.04 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 78.90263053205456
Size of spinal cord in z direction: 78.63348072324682
Ratio length/size: 1.003422839817495
Safe zone boundaries (curved space): [-107.36950069202892, -28.736019968782102]
Safe zone boundaries (straight space): [-107.5040755964328, -28.601445064378225]
Pad input volume to account for spinal cord length...
Time to generate centerline: 19.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-52_straighten-spinalcord_an59m9jv
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-52_straighten-spinalcord_an59m9jv/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-52_straighten-spinalcord_an59m9jv/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-52_straighten-spinalcord_an59m9jv/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-52_straighten-spinalcord_an59m9jv
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-51_smooth-spinalcord_k225z25n

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-43-51_smooth-spinalcord_k225z25n

Finished! Elapsed time: 42s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 204, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/sub-MS9_M1996_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/sub-MS9_M1996_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-44-37_deepseg-sc_5g6875yw)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-14_optic-detect-centerline_d3tl_pyj)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-14_optic-detect-centerline_d3tl_pyj
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:1[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 2[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-44-37_deepseg-sc_5g6875yw
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_seg.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/sub-MS9_M1996_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/sub-MS9_M1996_MPRAGE_Avanto2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-52_create-mask_39pcqans)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726563, 1.5000001, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/mask_t1.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-52_create-mask_39pcqans

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/sub-MS9_M1996_MPRAGE_Avanto2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/sub-MS9_M1996_MPRAGE_Avanto2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_crop.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 428, in loadFromPath
    im_file = nib.load(self.absolutepath, mmap=mmap)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 46, in load
    raise ImageFileError(f"Empty file: '{filename}'")
nibabel.filebasedimages.ImageFileError: Empty file: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/mask_t1.nii.gz'
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-59_smooth-spinalcord_2dor54i8)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-59_smooth-spinalcord_2dor54i8/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-59_smooth-spinalcord_2dor54i8/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-59_straighten-spinalcord_vi11_tjb)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.78 mm
Error on approximation = 0.58 mm
Error on approximation = 0.56 mm
Error on approximation = 0.58 mm
Error on approximation = 0.64 mm
Error on approximation = 0.53 mm
Error on approximation = 0.31 mm
Error on approximation = 0.21 mm
Error on approximation = 0.24 mm
Error on approximation = 0.31 mm
Error on approximation = 0.25 mm
Error on approximation = 0.24 mm
Error on approximation = 0.16 mm
Error on approximation = 0.24 mm
Error on approximation = 0.39 mm
[33mNURBS instability -> wrong reconstruction[0m
Error on approximation = 3.59 mm
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
Error on approximation = 2.4 mm
Error on approximation = 0.52 mm
Error on approximation = 1.86 mm
Error on approximation = 7.97 mm
Error on approximation = 1.13 mm
Error on approximation = 3.92 mm
Error on approximation = 9.99 mm
Error on approximation = 2.15 mm
Error on approximation = 8.35 mm
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
Error on approximation = 0.52 mm
Error on approximation = 0.56 mm
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
Error on approximation = 0.67 mm
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
[33mNURBS instability -> wrong reconstruction[0m
Create the straight space and the safe zone
Length of spinal cord: 87.01511137569322
Size of spinal cord in z direction: 82.93858889195344
Ratio length/size: 1.0491510952645986
Safe zone boundaries (curved space): [-110.18866298721593, -27.25007409526249]
Safe zone boundaries (straight space): [-112.22692422908582, -25.2118128533926]
Pad input volume to account for spinal cord length...
Time to generate centerline: 16.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-59_straighten-spinalcord_vi11_tjb
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-59_straighten-spinalcord_vi11_tjb/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-59_straighten-spinalcord_vi11_tjb/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-59_straighten-spinalcord_vi11_tjb/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-59_straighten-spinalcord_vi11_tjb
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-59_smooth-spinalcord_2dor54i8

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-45-59_smooth-spinalcord_2dor54i8

Finished! Elapsed time: 49s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Avanto2/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/sub-MS9_M1996_FLAIR_Trio.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/sub-MS9_M1996_FLAIR_Trio.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-46-52_deepseg-sc_ot4utp8n)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-47-16_optic-detect-centerline_vy1nxdnm)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-47-16_optic-detect-centerline_vy1nxdnm
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Spinal cord could not be detected for /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/sub-MS9_M1996_FLAIR_Trio.nii.gz
    EmptyArrayError: 'Spinal cord not detected. Please make sure that there is sufficient contrast between the spinal cord and CSF to ensure good results.'

--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/sub-MS9_M1996_FLAIR_Trio.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/mask_t1.nii.gz
--


ERROR: The file /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_seg.nii.gz does not exist. Exit program.


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/sub-MS9_M1996_FLAIR_Trio.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_crop.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 42, in load
    stat_result = os.stat(filename)
FileNotFoundError: [Errno 2] No such file or directory: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/mask_t1.nii.gz'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 202, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_crop_image.py", line 178, in main
    cropper.get_bbox_from_mask(Image(arguments.m))
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 285, in __init__
    raise e
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 428, in loadFromPath
    im_file = nib.load(self.absolutepath, mmap=mmap)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 44, in load
    raise FileNotFoundError(f"No such file or no access: '{filename}'")
FileNotFoundError: No such file or no access: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/mask_t1.nii.gz'
Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 42, in load
    stat_result = os.stat(filename)
FileNotFoundError: [Errno 2] No such file or directory: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_crop.nii.gz'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 288, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_smooth_spinalcord.py", line 151, in main
    nx, ny, nz, nt, px, py, pz, pt = Image(fname_anat).dim
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 285, in __init__
    raise e
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 428, in loadFromPath
    im_file = nib.load(self.absolutepath, mmap=mmap)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 44, in load
    raise FileNotFoundError(f"No such file or no access: '{filename}'")
FileNotFoundError: No such file or no access: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_crop.nii.gz'

--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 42, in load
    stat_result = os.stat(filename)
FileNotFoundError: [Errno 2] No such file or directory: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_crop.nii.gz'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 46, in main
    im_anat = Image(fname_anat)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 285, in __init__
    raise e
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 280, in __init__
    self.loadFromPath(param, mmap, verbose)
  File "/Users/mathilde/sct_6.2/spinalcordtoolbox/image.py", line 428, in loadFromPath
    im_file = nib.load(self.absolutepath, mmap=mmap)
  File "/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/nibabel/loadsave.py", line 44, in load
    raise FileNotFoundError(f"No such file or no access: '{filename}'")
FileNotFoundError: No such file or no access: '/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/t1_crop.nii.gz'
mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/sub-MS9_M1996_MPRAGE_Trio1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/sub-MS9_M1996_MPRAGE_Trio1.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-48-14_deepseg-sc_cht1b6hb)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-48-43_optic-detect-centerline_bezz04oz)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-48-43_optic-detect-centerline_bezz04oz
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:4[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 5[0m
[33m
No properties for slice: 6[0m
[33m
No properties for slice: 7[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-48-14_deepseg-sc_cht1b6hb

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/sub-MS9_M1996_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/sub-MS9_M1996_MPRAGE_Trio1.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-03_create-mask_vfvipldn)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726562, 1.4999999, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-03_create-mask_vfvipldn

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/sub-MS9_M1996_MPRAGE_Trio1.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/sub-MS9_M1996_MPRAGE_Trio1.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 42], y=[215, 256], z=[1, 9]
Cropping the image...

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/sub-MS9_M1996_MPRAGE_Trio1.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-09_smooth-spinalcord_at3oaqhi)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-09_smooth-spinalcord_at3oaqhi/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-09_smooth-spinalcord_at3oaqhi/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-09_straighten-spinalcord_spz8y3bv)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.7 mm
Error on approximation = 2.53 mm
Error on approximation = 7.72 mm
Create the straight space and the safe zone
Length of spinal cord: 23.06105800054094
Size of spinal cord in z direction: 8.855598502384154
Ratio length/size: 2.6041219003246714
Safe zone boundaries (curved space): [-89.82076900026652, -80.96517049788237]
Safe zone boundaries (straight space): [-96.92349874934493, -73.86244074880399]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-09_straighten-spinalcord_spz8y3bv
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-09_straighten-spinalcord_spz8y3bv/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-09_straighten-spinalcord_spz8y3bv/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-09_straighten-spinalcord_spz8y3bv/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-09_straighten-spinalcord_spz8y3bv
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-09_smooth-spinalcord_at3oaqhi

Replace zeroed voxels by original image...

Generate output file...
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-49-09_smooth-spinalcord_at3oaqhi

Finished! Elapsed time: 50s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_seg.nii.gz
--


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio1/anat/anat_flat.nii.gz: No such file or directory
Processing session in directory: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2
Processing T1-weighted image: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/sub-MS9_M1996_MPRAGE_Trio2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/sub-MS9_M1996_MPRAGE_Trio2.nii.gz -c t1 -centerline cnn -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_seg.nii.gz
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-50-03_deepseg-sc_1yb41xuw)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-50-27_optic-detect-centerline_g7497u9h)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-50-27_optic-detect-centerline_g7497u9h
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:2[0m
[33mFilling a hole in the segmentation around z_slice #:7[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 3[0m
[33m
No properties for slice: 8[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-50-03_deepseg-sc_1yb41xuw

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/sub-MS9_M1996_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/sub-MS9_M1996_MPRAGE_Trio2.nii.gz -p centerline,/Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_seg.nii.gz -size 35mm -f cylinder -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/mask_t1.nii.gz
--

  OK: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-50-59_create-mask_h933tyst)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726562, 1.4999999, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-50-59_create-mask_h933tyst

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/sub-MS9_M1996_MPRAGE_Trio2.nii.gz -cm greyscale Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/mask_t1.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/sub-MS9_M1996_MPRAGE_Trio2.nii.gz -m /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/mask_t1.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_crop.nii.gz
--

Bounding box: x=[0, 41], y=[220, 256], z=[0, 10]
Cropping the image...

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/sub-MS9_M1996_MPRAGE_Trio2.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_crop.nii.gz &

Template image not found in /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_seg.nii.gz -o /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_crop.nii.gz
  Centerline ........................ /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-51-06_smooth-spinalcord_0dz1fcy4)

Copying input data to tmp folder and convert to nii...
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-51-06_smooth-spinalcord_0dz1fcy4/anat.nii.gz
cp /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-51-06_smooth-spinalcord_0dz1fcy4/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-51-06_straighten-spinalcord_297a7r98)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 4.77 mm
Error on approximation = 2.72 mm
Error on approximation = 3.31 mm
Error on approximation = 2.3 mm
Error on approximation = 3.0 mm
Create the straight space and the safe zone
Length of spinal cord: 27.242875503611444
Size of spinal cord in z direction: 13.012595365786389
Ratio length/size: 2.093577394655665
Safe zone boundaries (curved space): [-69.91818120663584, -56.90558584084945]
Safe zone boundaries (straight space): [-77.03332127554836, -49.790445771936916]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-51-06_straighten-spinalcord_297a7r98
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-51-06_straighten-spinalcord_297a7r98/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-51-06_straighten-spinalcord_297a7r98/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-51-06_straighten-spinalcord_297a7r98/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-51-06_straighten-spinalcord_297a7r98
cp straight_ref.nii.gz /Users/mathilde/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-51-06_smooth-spinalcord_0dz1fcy4

Replace zeroed voxels by original image...

Generate output file...
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_smooth.nii.gz already exists. Deleting it..[0m
File created: /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-02_15-51-06_smooth-spinalcord_0dz1fcy4

Finished! Elapsed time: 41s


Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_crop.nii.gz -s /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_seg.nii.gz
--

[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_crop.nii.gz Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/t1_crop_flatten.nii.gz &

mv: rename /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/anat_crop_flat.nii.gz to /Users/mathilde/Desktop/Precision_stopms_sct_COPY/data/sub-MS9/ses-Trio2/anat/anat_flat.nii.gz: No such file or directory
Processing completed for all subjects.
