building file list ... done
ses-Aera1/
ses-Aera1/sub-Control1_M1982_MPRAGE_Aera1.nii.gz

sent 8.34M bytes  received 48 bytes  5.56M bytes/sec
total size is 8.34M  speedup is 1.00
/Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/Script_batch_processing.sh: line 21: cd: sub-Control1/ses-Aera1: No such file or directory
Processing session: ses-Aera1
Processing T1-weighted image: ./sub-Control1_M1982_MPRAGE_Aera1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i ./sub-Control1_M1982_MPRAGE_Aera1.nii.gz -c t1 -centerline cnn -o ./sub-Control1_M1982_MPRAGE_Aera1.nii_seg.nii.gz -qc /Users/mathilde/qc
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-27-14_deepseg-sc_yvijwffs)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-28-21_optic-detect-centerline_k1v7ksg4)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-28-21_optic-detect-centerline_k1v7ksg4
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-27-14_deepseg-sc_yvijwffs

*** Generate Quality Control (QC) html report ***
Resample images to 0.6x0.6 mm
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mImage header specifies datatype 'float64', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
QcImage: layout with Axial slice
Compute center of mass at each slice
/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/scipy/ndimage/_measurements.py:1541: RuntimeWarning: invalid value encountered in double_scalars
  results = [sum(input * grids[dir].astype(float), labels, index) / normalizer
/Users/mathilde/qc/Precision_stopms_sct_COPY_3/output/ses-Aera1/sct_deepseg_sc/2024_05_08_202851.167980/background_img.png
Successfully generated the QC results in /Users/mathilde/qc/_json/qc_2024_05_08_202851.167980.json

To see the results in a browser, type:
open /Users/mathilde/qc/index.html


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Aera1.nii.gz -cm greyscale sub-Control1_M1982_MPRAGE_Aera1.nii_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i ./sub-Control1_M1982_MPRAGE_Aera1.nii.gz -p centerline,./sub-Control1_M1982_MPRAGE_Aera1.nii_seg.nii.gz -size 35mm -f cylinder -o ./sub-Control1_M1982_MPRAGE_Aera1.nii_mask.nii.gz
--

  OK: ./sub-Control1_M1982_MPRAGE_Aera1.nii_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-28-56_create-mask_iescjjhj)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.97656244, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-28-56_create-mask_iescjjhj

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Aera1.nii.gz -cm greyscale sub-Control1_M1982_MPRAGE_Aera1.nii_mask.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i ./sub-Control1_M1982_MPRAGE_Aera1.nii.gz -m ./sub-Control1_M1982_MPRAGE_Aera1.nii_mask.nii.gz -o ./sub-Control1_M1982_MPRAGE_Aera1.nii_crop.nii.gz
--

Bounding box: x=[99, 139], y=[70, 115], z=[0, 43]
Cropping the image...

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Aera1.nii.gz sub-Control1_M1982_MPRAGE_Aera1.nii_crop.nii.gz &

Template image not found at ../template.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i ./sub-Control1_M1982_MPRAGE_Aera1.nii_crop.nii.gz -s ./sub-Control1_M1982_MPRAGE_Aera1.nii_seg.nii.gz -o ./sub-Control1_M1982_MPRAGE_Aera1.nii_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. ./sub-Control1_M1982_MPRAGE_Aera1.nii_crop.nii.gz
  Centerline ........................ ./sub-Control1_M1982_MPRAGE_Aera1.nii_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-03_smooth-spinalcord_3l3qzm26)

Copying input data to tmp folder and convert to nii...
cp ./sub-Control1_M1982_MPRAGE_Aera1.nii_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-03_smooth-spinalcord_3l3qzm26/anat.nii.gz
cp ./sub-Control1_M1982_MPRAGE_Aera1.nii_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-03_smooth-spinalcord_3l3qzm26/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-03_straighten-spinalcord_en8_0o_b)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Create the straight space and the safe zone
Length of spinal cord: 63.98430240086004
Size of spinal cord in z direction: 63.69568485830537
Ratio length/size: 1.0045311945887185
Safe zone boundaries (curved space): [-100.9789748333806, -37.283289975075235]
Safe zone boundaries (straight space): [-101.12328360465794, -37.1389812037979]
Pad input volume to account for spinal cord length...
Time to generate centerline: 3.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-03_straighten-spinalcord_en8_0o_b
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-03_straighten-spinalcord_en8_0o_b/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-03_straighten-spinalcord_en8_0o_b/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-03_straighten-spinalcord_en8_0o_b/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-03_straighten-spinalcord_en8_0o_b
cp straight_ref.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Aera1/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Aera1/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Aera1/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-03_smooth-spinalcord_3l3qzm26

Replace zeroed voxels by original image...

Generate output file...
File created: ./sub-Control1_M1982_MPRAGE_Aera1.nii_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-03_smooth-spinalcord_3l3qzm26

Finished! Elapsed time: 36s


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Aera1.nii_crop.nii.gz sub-Control1_M1982_MPRAGE_Aera1.nii_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i ./sub-Control1_M1982_MPRAGE_Aera1.nii_crop.nii.gz -s ./sub-Control1_M1982_MPRAGE_Aera1.nii_seg.nii.gz
--


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Aera1.nii_crop.nii.gz sub-Control1_M1982_MPRAGE_Aera1.nii_crop_flatten.nii.gz &

mv: rename ./sub-Control1_M1982_MPRAGE_Aera1.nii_crop_flat.nii.gz to ./sub-Control1_M1982_MPRAGE_Aera1.nii_flat.nii.gz: No such file or directory
Processing session: ses-Aera2
Processing T1-weighted image: ./sub-Control1_M1982_MPRAGE_Aera2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i ./sub-Control1_M1982_MPRAGE_Aera2.nii.gz -c t1 -centerline cnn -o ./sub-Control1_M1982_MPRAGE_Aera2.nii_seg.nii.gz -qc /Users/mathilde/qc
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-42_deepseg-sc_w1r86lmh)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-30-58_optic-detect-centerline_5ibd8jhq)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-30-58_optic-detect-centerline_5ibd8jhq
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #43[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-29-42_deepseg-sc_w1r86lmh
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Aera2/sub-Control1_M1982_MPRAGE_Aera2.nii_seg.nii.gz already exists. Will overwrite it.[0m

*** Generate Quality Control (QC) html report ***
Resample images to 0.6x0.6 mm
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mImage header specifies datatype 'float64', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
QcImage: layout with Axial slice
Compute center of mass at each slice
/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/scipy/ndimage/_measurements.py:1541: RuntimeWarning: invalid value encountered in double_scalars
  results = [sum(input * grids[dir].astype(float), labels, index) / normalizer
/Users/mathilde/qc/Precision_stopms_sct_COPY_3/output/ses-Aera2/sct_deepseg_sc/2024_05_08_203123.518402/background_img.png
Successfully generated the QC results in /Users/mathilde/qc/_json/qc_2024_05_08_203123.518402.json

To see the results in a browser, type:
open /Users/mathilde/qc/index.html


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Aera2.nii.gz -cm greyscale sub-Control1_M1982_MPRAGE_Aera2.nii_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i ./sub-Control1_M1982_MPRAGE_Aera2.nii.gz -p centerline,./sub-Control1_M1982_MPRAGE_Aera2.nii_seg.nii.gz -size 35mm -f cylinder -o ./sub-Control1_M1982_MPRAGE_Aera2.nii_mask.nii.gz
--

  OK: ./sub-Control1_M1982_MPRAGE_Aera2.nii_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-26_create-mask_azb0s64c)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.97656244, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Aera2/sub-Control1_M1982_MPRAGE_Aera2.nii_mask.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-26_create-mask_azb0s64c

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Aera2.nii.gz -cm greyscale sub-Control1_M1982_MPRAGE_Aera2.nii_mask.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i ./sub-Control1_M1982_MPRAGE_Aera2.nii.gz -m ./sub-Control1_M1982_MPRAGE_Aera2.nii_mask.nii.gz -o ./sub-Control1_M1982_MPRAGE_Aera2.nii_crop.nii.gz
--

Bounding box: x=[99, 139], y=[69, 115], z=[0, 43]
Cropping the image...
[33mFile ./sub-Control1_M1982_MPRAGE_Aera2.nii_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Aera2.nii.gz sub-Control1_M1982_MPRAGE_Aera2.nii_crop.nii.gz &

Template image not found at ../template.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i ./sub-Control1_M1982_MPRAGE_Aera2.nii_crop.nii.gz -s ./sub-Control1_M1982_MPRAGE_Aera2.nii_seg.nii.gz -o ./sub-Control1_M1982_MPRAGE_Aera2.nii_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. ./sub-Control1_M1982_MPRAGE_Aera2.nii_crop.nii.gz
  Centerline ........................ ./sub-Control1_M1982_MPRAGE_Aera2.nii_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-32_smooth-spinalcord_nrxfsd8i)

Copying input data to tmp folder and convert to nii...
cp ./sub-Control1_M1982_MPRAGE_Aera2.nii_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-32_smooth-spinalcord_nrxfsd8i/anat.nii.gz
cp ./sub-Control1_M1982_MPRAGE_Aera2.nii_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-32_smooth-spinalcord_nrxfsd8i/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-32_straighten-spinalcord_q5p_cimu)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.04 mm
Error on approximation = 0.02 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 64.11035198030041
Size of spinal cord in z direction: 63.74505616497912
Ratio length/size: 1.005730574844516
Safe zone boundaries (curved space): [-101.02230711183026, -37.27725094685114]
Safe zone boundaries (straight space): [-101.20495501949091, -37.094603039190496]
Pad input volume to account for spinal cord length...
Time to generate centerline: 4.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-32_straighten-spinalcord_q5p_cimu
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-32_straighten-spinalcord_q5p_cimu/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-32_straighten-spinalcord_q5p_cimu/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-32_straighten-spinalcord_q5p_cimu/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-32_straighten-spinalcord_q5p_cimu
cp straight_ref.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Aera2/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Aera2/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Aera2/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-32_smooth-spinalcord_nrxfsd8i

Replace zeroed voxels by original image...

Generate output file...
[33mFile ./sub-Control1_M1982_MPRAGE_Aera2.nii_smooth.nii.gz already exists. Deleting it..[0m
File created: ./sub-Control1_M1982_MPRAGE_Aera2.nii_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-31-32_smooth-spinalcord_nrxfsd8i

Finished! Elapsed time: 35s


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Aera2.nii_crop.nii.gz sub-Control1_M1982_MPRAGE_Aera2.nii_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i ./sub-Control1_M1982_MPRAGE_Aera2.nii_crop.nii.gz -s ./sub-Control1_M1982_MPRAGE_Aera2.nii_seg.nii.gz
--

[33mFile ./sub-Control1_M1982_MPRAGE_Aera2.nii_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Aera2.nii_crop.nii.gz sub-Control1_M1982_MPRAGE_Aera2.nii_crop_flatten.nii.gz &

mv: rename ./sub-Control1_M1982_MPRAGE_Aera2.nii_crop_flat.nii.gz to ./sub-Control1_M1982_MPRAGE_Aera2.nii_flat.nii.gz: No such file or directory
Processing session: ses-Avanto1
Processing T1-weighted image: ./sub-Control1_M1982_MPRAGE_Avanto1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i ./sub-Control1_M1982_MPRAGE_Avanto1.nii.gz -c t1 -centerline cnn -o ./sub-Control1_M1982_MPRAGE_Avanto1.nii_seg.nii.gz -qc /Users/mathilde/qc
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-32-11_deepseg-sc_pn6djlxy)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-32-40_optic-detect-centerline_o28l31l8)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-32-40_optic-detect-centerline_o28l31l8
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:4[0m
[33mFilling a hole in the segmentation around z_slice #:7[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 5[0m
[33m
No properties for slice: 6[0m
[33m
No properties for slice: 8[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-32-11_deepseg-sc_pn6djlxy
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Avanto1/sub-Control1_M1982_MPRAGE_Avanto1.nii_seg.nii.gz already exists. Will overwrite it.[0m

*** Generate Quality Control (QC) html report ***
Resample images to 0.6x0.6 mm
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mImage header specifies datatype 'float64', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
QcImage: layout with Axial slice
Compute center of mass at each slice
/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/scipy/ndimage/_measurements.py:1541: RuntimeWarning: invalid value encountered in double_scalars
  results = [sum(input * grids[dir].astype(float), labels, index) / normalizer
/Users/mathilde/qc/Precision_stopms_sct_COPY_3/output/ses-Avanto1/sct_deepseg_sc/2024_05_08_203307.739600/background_img.png
Successfully generated the QC results in /Users/mathilde/qc/_json/qc_2024_05_08_203307.739600.json

To see the results in a browser, type:
open /Users/mathilde/qc/index.html


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Avanto1.nii.gz -cm greyscale sub-Control1_M1982_MPRAGE_Avanto1.nii_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i ./sub-Control1_M1982_MPRAGE_Avanto1.nii.gz -p centerline,./sub-Control1_M1982_MPRAGE_Avanto1.nii_seg.nii.gz -size 35mm -f cylinder -o ./sub-Control1_M1982_MPRAGE_Avanto1.nii_mask.nii.gz
--

  OK: ./sub-Control1_M1982_MPRAGE_Avanto1.nii_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-11_create-mask_dq4aq3i5)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Avanto1/sub-Control1_M1982_MPRAGE_Avanto1.nii_mask.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-11_create-mask_dq4aq3i5

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Avanto1.nii.gz -cm greyscale sub-Control1_M1982_MPRAGE_Avanto1.nii_mask.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i ./sub-Control1_M1982_MPRAGE_Avanto1.nii.gz -m ./sub-Control1_M1982_MPRAGE_Avanto1.nii_mask.nii.gz -o ./sub-Control1_M1982_MPRAGE_Avanto1.nii_crop.nii.gz
--

Bounding box: x=[0, 39], y=[217, 256], z=[1, 10]
Cropping the image...
[33mFile ./sub-Control1_M1982_MPRAGE_Avanto1.nii_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Avanto1.nii.gz sub-Control1_M1982_MPRAGE_Avanto1.nii_crop.nii.gz &

Template image not found at ../template.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i ./sub-Control1_M1982_MPRAGE_Avanto1.nii_crop.nii.gz -s ./sub-Control1_M1982_MPRAGE_Avanto1.nii_seg.nii.gz -o ./sub-Control1_M1982_MPRAGE_Avanto1.nii_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. ./sub-Control1_M1982_MPRAGE_Avanto1.nii_crop.nii.gz
  Centerline ........................ ./sub-Control1_M1982_MPRAGE_Avanto1.nii_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-18_smooth-spinalcord_gw_u1dhl)

Copying input data to tmp folder and convert to nii...
cp ./sub-Control1_M1982_MPRAGE_Avanto1.nii_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-18_smooth-spinalcord_gw_u1dhl/anat.nii.gz
cp ./sub-Control1_M1982_MPRAGE_Avanto1.nii_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-18_smooth-spinalcord_gw_u1dhl/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-19_straighten-spinalcord_lbj1ou_z)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 2.05 mm
Error on approximation = 2.0 mm
Error on approximation = 1.24 mm
[33mNURBS instability -> wrong reconstruction[0m
Create the straight space and the safe zone
Length of spinal cord: 25.180375931805322
Size of spinal cord in z direction: 14.027707530188351
Ratio length/size: 1.7950456892272564
Safe zone boundaries (curved space): [-80.27280623718119, -66.24509870699283]
Safe zone boundaries (straight space): [-85.84914043798967, -60.66876450618435]
Pad input volume to account for spinal cord length...
Time to generate centerline: 1.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-19_straighten-spinalcord_lbj1ou_z
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-19_straighten-spinalcord_lbj1ou_z/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-19_straighten-spinalcord_lbj1ou_z/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-19_straighten-spinalcord_lbj1ou_z/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-19_straighten-spinalcord_lbj1ou_z
cp straight_ref.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Avanto1/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Avanto1/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Avanto1/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-18_smooth-spinalcord_gw_u1dhl

Replace zeroed voxels by original image...

Generate output file...
[33mFile ./sub-Control1_M1982_MPRAGE_Avanto1.nii_smooth.nii.gz already exists. Deleting it..[0m
File created: ./sub-Control1_M1982_MPRAGE_Avanto1.nii_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-18_smooth-spinalcord_gw_u1dhl

Finished! Elapsed time: 37s


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Avanto1.nii_crop.nii.gz sub-Control1_M1982_MPRAGE_Avanto1.nii_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i ./sub-Control1_M1982_MPRAGE_Avanto1.nii_crop.nii.gz -s ./sub-Control1_M1982_MPRAGE_Avanto1.nii_seg.nii.gz
--

[33mFile ./sub-Control1_M1982_MPRAGE_Avanto1.nii_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Avanto1.nii_crop.nii.gz sub-Control1_M1982_MPRAGE_Avanto1.nii_crop_flatten.nii.gz &

mv: rename ./sub-Control1_M1982_MPRAGE_Avanto1.nii_crop_flat.nii.gz to ./sub-Control1_M1982_MPRAGE_Avanto1.nii_flat.nii.gz: No such file or directory
Processing session: ses-Avanto2
Processing T1-weighted image: ./sub-Control1_M1982_MPRAGE_Avanto2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i ./sub-Control1_M1982_MPRAGE_Avanto2.nii.gz -c t1 -centerline cnn -o ./sub-Control1_M1982_MPRAGE_Avanto2.nii_seg.nii.gz -qc /Users/mathilde/qc
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-59_deepseg-sc_z4r01hx3)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-35-45_optic-detect-centerline_0_a1rzd8)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-35-45_optic-detect-centerline_0_a1rzd8
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-33-59_deepseg-sc_z4r01hx3
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Avanto2/sub-Control1_M1982_MPRAGE_Avanto2.nii_seg.nii.gz already exists. Will overwrite it.[0m

*** Generate Quality Control (QC) html report ***
Resample images to 0.6x0.6 mm
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mImage header specifies datatype 'float64', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
QcImage: layout with Axial slice
Compute center of mass at each slice
/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/scipy/ndimage/_measurements.py:1541: RuntimeWarning: invalid value encountered in double_scalars
  results = [sum(input * grids[dir].astype(float), labels, index) / normalizer
/Users/mathilde/qc/Precision_stopms_sct_COPY_3/output/ses-Avanto2/sct_deepseg_sc/2024_05_08_203620.655190/background_img.png
Successfully generated the QC results in /Users/mathilde/qc/_json/qc_2024_05_08_203620.655190.json

To see the results in a browser, type:
open /Users/mathilde/qc/index.html


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Avanto2.nii.gz -cm greyscale sub-Control1_M1982_MPRAGE_Avanto2.nii_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i ./sub-Control1_M1982_MPRAGE_Avanto2.nii.gz -p centerline,./sub-Control1_M1982_MPRAGE_Avanto2.nii_seg.nii.gz -size 35mm -f cylinder -o ./sub-Control1_M1982_MPRAGE_Avanto2.nii_mask.nii.gz
--

  OK: ./sub-Control1_M1982_MPRAGE_Avanto2.nii_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-24_create-mask_1ytz0iul)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.97265625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Avanto2/sub-Control1_M1982_MPRAGE_Avanto2.nii_mask.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-24_create-mask_1ytz0iul

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Avanto2.nii.gz -cm greyscale sub-Control1_M1982_MPRAGE_Avanto2.nii_mask.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i ./sub-Control1_M1982_MPRAGE_Avanto2.nii.gz -m ./sub-Control1_M1982_MPRAGE_Avanto2.nii_mask.nii.gz -o ./sub-Control1_M1982_MPRAGE_Avanto2.nii_crop.nii.gz
--

Bounding box: x=[108, 151], y=[66, 116], z=[0, 50]
Cropping the image...
[33mFile ./sub-Control1_M1982_MPRAGE_Avanto2.nii_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Avanto2.nii.gz sub-Control1_M1982_MPRAGE_Avanto2.nii_crop.nii.gz &

Template image not found at ../template.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i ./sub-Control1_M1982_MPRAGE_Avanto2.nii_crop.nii.gz -s ./sub-Control1_M1982_MPRAGE_Avanto2.nii_seg.nii.gz -o ./sub-Control1_M1982_MPRAGE_Avanto2.nii_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. ./sub-Control1_M1982_MPRAGE_Avanto2.nii_crop.nii.gz
  Centerline ........................ ./sub-Control1_M1982_MPRAGE_Avanto2.nii_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-30_smooth-spinalcord_16ky0u4u)

Copying input data to tmp folder and convert to nii...
cp ./sub-Control1_M1982_MPRAGE_Avanto2.nii_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-30_smooth-spinalcord_16ky0u4u/anat.nii.gz
cp ./sub-Control1_M1982_MPRAGE_Avanto2.nii_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-30_smooth-spinalcord_16ky0u4u/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-31_straighten-spinalcord_nr2pv_iw)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 0.07 mm
Error on approximation = 0.03 mm
Error on approximation = 0.04 mm
Error on approximation = 0.03 mm
Error on approximation = 0.03 mm
Error on approximation = 0.02 mm
Create the straight space and the safe zone
Length of spinal cord: 75.49672595436446
Size of spinal cord in z direction: 74.08407819891255
Ratio length/size: 1.01906816943391
Safe zone boundaries (curved space): [-111.39241027362688, -37.30833207471433]
Safe zone boundaries (straight space): [-112.09873415135283, -36.60200819698837]
Pad input volume to account for spinal cord length...
Time to generate centerline: 7.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-31_straighten-spinalcord_nr2pv_iw
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-31_straighten-spinalcord_nr2pv_iw/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-31_straighten-spinalcord_nr2pv_iw/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-31_straighten-spinalcord_nr2pv_iw/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-31_straighten-spinalcord_nr2pv_iw
cp straight_ref.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Avanto2/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Avanto2/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Avanto2/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-30_smooth-spinalcord_16ky0u4u

Replace zeroed voxels by original image...

Generate output file...
[33mFile ./sub-Control1_M1982_MPRAGE_Avanto2.nii_smooth.nii.gz already exists. Deleting it..[0m
File created: ./sub-Control1_M1982_MPRAGE_Avanto2.nii_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-36-30_smooth-spinalcord_16ky0u4u

Finished! Elapsed time: 41s


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Avanto2.nii_crop.nii.gz sub-Control1_M1982_MPRAGE_Avanto2.nii_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i ./sub-Control1_M1982_MPRAGE_Avanto2.nii_crop.nii.gz -s ./sub-Control1_M1982_MPRAGE_Avanto2.nii_seg.nii.gz
--

[33mFile ./sub-Control1_M1982_MPRAGE_Avanto2.nii_crop_flatten.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Avanto2.nii_crop.nii.gz sub-Control1_M1982_MPRAGE_Avanto2.nii_crop_flatten.nii.gz &

mv: rename ./sub-Control1_M1982_MPRAGE_Avanto2.nii_crop_flat.nii.gz to ./sub-Control1_M1982_MPRAGE_Avanto2.nii_flat.nii.gz: No such file or directory
Processing session: ses-Trio1
Processing T1-weighted image: ./sub-Control1_M1982_MPRAGE_Trio1.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i ./sub-Control1_M1982_MPRAGE_Trio1.nii.gz -c t1 -centerline cnn -o ./sub-Control1_M1982_MPRAGE_Trio1.nii_seg.nii.gz -qc /Users/mathilde/qc
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-37-15_deepseg-sc_nn2orb2z)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-37-41_optic-detect-centerline_klhxsjbn)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-37-41_optic-detect-centerline_klhxsjbn
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mRemoving small objects above slice #5[0m
[33mFilling a hole in the segmentation around z_slice #:5[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 2[0m
[33m
No properties for slice: 6[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-37-15_deepseg-sc_nn2orb2z
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Trio1/sub-Control1_M1982_MPRAGE_Trio1.nii_seg.nii.gz already exists. Will overwrite it.[0m

*** Generate Quality Control (QC) html report ***
Resample images to 0.6x0.6 mm
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mImage header specifies datatype 'float64', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
QcImage: layout with Axial slice
Compute center of mass at each slice
/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/scipy/ndimage/_measurements.py:1541: RuntimeWarning: invalid value encountered in double_scalars
  results = [sum(input * grids[dir].astype(float), labels, index) / normalizer
/Users/mathilde/qc/Precision_stopms_sct_COPY_3/output/ses-Trio1/sct_deepseg_sc/2024_05_08_203809.431111/background_img.png
Successfully generated the QC results in /Users/mathilde/qc/_json/qc_2024_05_08_203809.431111.json

To see the results in a browser, type:
open /Users/mathilde/qc/index.html


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Trio1.nii.gz -cm greyscale sub-Control1_M1982_MPRAGE_Trio1.nii_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i ./sub-Control1_M1982_MPRAGE_Trio1.nii.gz -p centerline,./sub-Control1_M1982_MPRAGE_Trio1.nii_seg.nii.gz -size 35mm -f cylinder -o ./sub-Control1_M1982_MPRAGE_Trio1.nii_mask.nii.gz
--

  OK: ./sub-Control1_M1982_MPRAGE_Trio1.nii_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-14_create-mask_jltbjpw8)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726563, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mFile /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Trio1/sub-Control1_M1982_MPRAGE_Trio1.nii_mask.nii.gz already exists. Will overwrite it.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-14_create-mask_jltbjpw8

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Trio1.nii.gz -cm greyscale sub-Control1_M1982_MPRAGE_Trio1.nii_mask.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i ./sub-Control1_M1982_MPRAGE_Trio1.nii.gz -m ./sub-Control1_M1982_MPRAGE_Trio1.nii_mask.nii.gz -o ./sub-Control1_M1982_MPRAGE_Trio1.nii_crop.nii.gz
--

Bounding box: x=[0, 37], y=[219, 256], z=[1, 8]
Cropping the image...
[33mFile ./sub-Control1_M1982_MPRAGE_Trio1.nii_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Trio1.nii.gz sub-Control1_M1982_MPRAGE_Trio1.nii_crop.nii.gz &

Template image not found at ../template.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i ./sub-Control1_M1982_MPRAGE_Trio1.nii_crop.nii.gz -s ./sub-Control1_M1982_MPRAGE_Trio1.nii_seg.nii.gz -o ./sub-Control1_M1982_MPRAGE_Trio1.nii_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. ./sub-Control1_M1982_MPRAGE_Trio1.nii_crop.nii.gz
  Centerline ........................ ./sub-Control1_M1982_MPRAGE_Trio1.nii_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-20_smooth-spinalcord_wxkug3ft)

Copying input data to tmp folder and convert to nii...
cp ./sub-Control1_M1982_MPRAGE_Trio1.nii_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-20_smooth-spinalcord_wxkug3ft/anat.nii.gz
cp ./sub-Control1_M1982_MPRAGE_Trio1.nii_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-20_smooth-spinalcord_wxkug3ft/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-20_straighten-spinalcord__we_1jm0)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 3.81 mm
Error on approximation = 2.18 mm
Create the straight space and the safe zone
Length of spinal cord: 22.920916189597712
Size of spinal cord in z direction: 10.515063443068328
Ratio length/size: 2.1798172035478767
Safe zone boundaries (curved space): [-66.17973649346297, -55.66467305039464]
Safe zone boundaries (straight space): [-72.38266286672766, -49.46174667712995]
Pad input volume to account for spinal cord length...
Time to generate centerline: 2.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-20_straighten-spinalcord__we_1jm0
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-20_straighten-spinalcord__we_1jm0/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-20_straighten-spinalcord__we_1jm0/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-20_straighten-spinalcord__we_1jm0/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-20_straighten-spinalcord__we_1jm0
cp straight_ref.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Trio1/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Trio1/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Trio1/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-20_smooth-spinalcord_wxkug3ft

Replace zeroed voxels by original image...

Generate output file...
[33mFile ./sub-Control1_M1982_MPRAGE_Trio1.nii_smooth.nii.gz already exists. Deleting it..[0m
File created: ./sub-Control1_M1982_MPRAGE_Trio1.nii_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-38-20_smooth-spinalcord_wxkug3ft

Finished! Elapsed time: 38s


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Trio1.nii_crop.nii.gz sub-Control1_M1982_MPRAGE_Trio1.nii_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i ./sub-Control1_M1982_MPRAGE_Trio1.nii_crop.nii.gz -s ./sub-Control1_M1982_MPRAGE_Trio1.nii_seg.nii.gz
--


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Trio1.nii_crop.nii.gz sub-Control1_M1982_MPRAGE_Trio1.nii_crop_flatten.nii.gz &

mv: rename ./sub-Control1_M1982_MPRAGE_Trio1.nii_crop_flat.nii.gz to ./sub-Control1_M1982_MPRAGE_Trio1.nii_flat.nii.gz: No such file or directory
Processing session: ses-Trio2
Processing T1-weighted image: ./sub-Control1_M1982_MPRAGE_Trio2.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_deepseg_sc -i ./sub-Control1_M1982_MPRAGE_Trio2.nii.gz -c t1 -centerline cnn -o ./sub-Control1_M1982_MPRAGE_Trio2.nii_seg.nii.gz -qc /Users/mathilde/qc
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-39-01_deepseg-sc_6hb2tcuw)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-39-26_optic-detect-centerline_wf8nf4gn)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-39-26_optic-detect-centerline_wf8nf4gn
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 3[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-39-01_deepseg-sc_6hb2tcuw

*** Generate Quality Control (QC) html report ***
Resample images to 0.6x0.6 mm
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mImage header specifies datatype 'float64', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
QcImage: layout with Axial slice
Compute center of mass at each slice
/Users/mathilde/sct_6.2/python/envs/venv_sct/lib/python3.9/site-packages/scipy/ndimage/_measurements.py:1541: RuntimeWarning: invalid value encountered in double_scalars
  results = [sum(input * grids[dir].astype(float), labels, index) / normalizer
/Users/mathilde/qc/Precision_stopms_sct_COPY_3/output/ses-Trio2/sct_deepseg_sc/2024_05_08_203955.081164/background_img.png
Successfully generated the QC results in /Users/mathilde/qc/_json/qc_2024_05_08_203955.081164.json

To see the results in a browser, type:
open /Users/mathilde/qc/index.html


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Trio2.nii.gz -cm greyscale sub-Control1_M1982_MPRAGE_Trio2.nii_seg.nii.gz -cm red -a 70.0 &


--
Spinal Cord Toolbox (6.2)

sct_create_mask -i ./sub-Control1_M1982_MPRAGE_Trio2.nii.gz -p centerline,./sub-Control1_M1982_MPRAGE_Trio2.nii_seg.nii.gz -size 35mm -f cylinder -o ./sub-Control1_M1982_MPRAGE_Trio2.nii_mask.nii.gz
--

  OK: ./sub-Control1_M1982_MPRAGE_Trio2.nii_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-01_create-mask_nd5bcs1m)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.97265625, 0.9726563, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-01_create-mask_nd5bcs1m

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Trio2.nii.gz -cm greyscale sub-Control1_M1982_MPRAGE_Trio2.nii_mask.nii.gz -cm red -a 50.0 &


--
Spinal Cord Toolbox (6.2)

sct_crop_image -i ./sub-Control1_M1982_MPRAGE_Trio2.nii.gz -m ./sub-Control1_M1982_MPRAGE_Trio2.nii_mask.nii.gz -o ./sub-Control1_M1982_MPRAGE_Trio2.nii_crop.nii.gz
--

Bounding box: x=[0, 42], y=[221, 256], z=[1, 9]
Cropping the image...
[33mFile ./sub-Control1_M1982_MPRAGE_Trio2.nii_crop.nii.gz already exists. Will overwrite it.[0m

Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Trio2.nii.gz sub-Control1_M1982_MPRAGE_Trio2.nii_crop.nii.gz &

Template image not found at ../template.nii.gz

--
Spinal Cord Toolbox (6.2)

sct_smooth_spinalcord -i ./sub-Control1_M1982_MPRAGE_Trio2.nii_crop.nii.gz -s ./sub-Control1_M1982_MPRAGE_Trio2.nii_seg.nii.gz -o ./sub-Control1_M1982_MPRAGE_Trio2.nii_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. ./sub-Control1_M1982_MPRAGE_Trio2.nii_crop.nii.gz
  Centerline ........................ ./sub-Control1_M1982_MPRAGE_Trio2.nii_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-07_smooth-spinalcord_so19vi8f)

Copying input data to tmp folder and convert to nii...
cp ./sub-Control1_M1982_MPRAGE_Trio2.nii_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-07_smooth-spinalcord_so19vi8f/anat.nii.gz
cp ./sub-Control1_M1982_MPRAGE_Trio2.nii_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-07_smooth-spinalcord_so19vi8f/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-08_straighten-spinalcord_edsagewb)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 12.95 mm
Error on approximation = 3.09 mm
Error on approximation = 4.58 mm
Create the straight space and the safe zone
Length of spinal cord: 26.80274555725618
Size of spinal cord in z direction: 10.608505923850728
Ratio length/size: 2.526533495823999
Safe zone boundaries (curved space): [-64.30368333212849, -53.69517740827776]
Safe zone boundaries (straight space): [-72.40080314883122, -45.59805759157503]
Pad input volume to account for spinal cord length...
Time to generate centerline: 2.0 ms
Warping field generated: tmp.curve2straight.nii.gz
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-08_straighten-spinalcord_edsagewb
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-08_straighten-spinalcord_edsagewb/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-08_straighten-spinalcord_edsagewb/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-08_straighten-spinalcord_edsagewb/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-08_straighten-spinalcord_edsagewb
cp straight_ref.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Trio2/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Trio2/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/Desktop/Precision_stopms_sct_COPY_3/output/ses-Trio2/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.2/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-07_smooth-spinalcord_so19vi8f

Replace zeroed voxels by original image...

Generate output file...
File created: ./sub-Control1_M1982_MPRAGE_Trio2.nii_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-08_20-40-07_smooth-spinalcord_so19vi8f

Finished! Elapsed time: 40s


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Trio2.nii_crop.nii.gz sub-Control1_M1982_MPRAGE_Trio2.nii_smooth.nii.gz &


--
Spinal Cord Toolbox (6.2)

sct_flatten_sagittal -i ./sub-Control1_M1982_MPRAGE_Trio2.nii_crop.nii.gz -s ./sub-Control1_M1982_MPRAGE_Trio2.nii_seg.nii.gz
--


Done! To view results, type:
fsleyes sub-Control1_M1982_MPRAGE_Trio2.nii_crop.nii.gz sub-Control1_M1982_MPRAGE_Trio2.nii_crop_flatten.nii.gz &

mv: rename ./sub-Control1_M1982_MPRAGE_Trio2.nii_crop_flat.nii.gz to ./sub-Control1_M1982_MPRAGE_Trio2.nii_flat.nii.gz: No such file or directory
Processing completed for subject: sub-Control1/ses-Aera1.
