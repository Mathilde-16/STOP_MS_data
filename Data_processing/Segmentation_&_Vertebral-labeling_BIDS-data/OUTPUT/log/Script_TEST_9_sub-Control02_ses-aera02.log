+ SUBJECT_SESSION=sub-Control02/ses-aera02
++ date +%s
+ start=1716389512
+ sct_check_dependencies -short

--
Spinal Cord Toolbox (6.3)

sct_check_dependencies -short
--


SYSTEM INFORMATION
------------------
SCT info:
- version: 6.3
- path: /Users/mathilde/sct_6.3
OS: osx (macOS-10.16-x86_64-i386-64bit)
CPU cores: Available: 10, Used by ITK functions: 1
RAM: Total: 65536MB, Used: 3512MB, Available: 11729MB
++ cut -d / -f1
+ SUBJECT=sub-Control02
++ cut -d / -f2
+ SESSION=ses-aera02
+ cd /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/data_processed
+ [[ ! -f participants.tsv ]]
+ rsync -avzh /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/DATA/participants.tsv .
building file list ... rsync: link_stat "/Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/DATA/participants.tsv" failed: No such file or directory (2)
done

sent 29 bytes  received 20 bytes  98.00 bytes/sec
total size is 0  speedup is 0.00
rsync error: some files could not be transferred (code 23) at /AppleInternal/Library/BuildRoots/a0876c02-1788-11ed-b9c4-96898e02b808/Library/Caches/com.apple.xbs/Sources/rsync/rsync/main.c(996) [sender=2.6.9]
+ mkdir -p sub-Control02
+ rsync -avzh --copy-links /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/DATA/sub-Control02/ses-aera02 sub-Control02/
building file list ... done
ses-aera02/
ses-aera02/.DS_Store
ses-aera02/anat/
ses-aera02/anat/.DS_Store
ses-aera02/anat/sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz

sent 8.16M bytes  received 98 bytes  5.44M bytes/sec
total size is 8.16M  speedup is 1.00
+ cd sub-Control02/ses-aera02/anat/
+ SUBJECT=sub-Control02_ses-aera02
++ find . -type f -name '*_T1w.nii.gz' -print
++ head -n 1
+ T1_image=./sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz
+ sct_deepseg_sc -i ./sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz -c t1 -centerline cnn -o ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz -qc /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc -qc-subject sub-Control02_ses-aera02

--
Spinal Cord Toolbox (6.3)

sct_deepseg_sc -i ./sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz -c t1 -centerline cnn -o ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz -qc /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc -qc-subject sub-Control02_ses-aera02
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-51-59_deepseg-sc_yrbtyqex)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-53-23_optic-detect-centerline_8mm7w3s8)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-53-23_optic-detect-centerline_8mm7w3s8
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mFilling a hole in the segmentation around z_slice #:16[0m
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33m
No properties for slice: 17[0m
[33mFound isolated voxels on slice 0, Removing them[0m
[33mFound isolated voxels on slice 0, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-51-59_deepseg-sc_yrbtyqex

*** Generate Quality Control (QC) html report ***
Resample images to 0.6x0.6 mm
[33mConverting image from type 'int16' to type 'float64' for spline interpolation[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mImage header specifies datatype 'float64', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
QcImage: layout with Axial slice
Compute center of mass at each slice
/Users/mathilde/sct_6.3/python/envs/venv_sct/lib/python3.9/site-packages/scipy/ndimage/_measurements.py:1542: RuntimeWarning: invalid value encountered in scalar divide
  results = [sum(input * grids[dir].astype(float), labels, index) / normalizer
/Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc/sub-Control02/sub-Control02_ses-aera02/anat/sct_deepseg_sc/2024_05_22_165400.510257/background_img.png
Successfully generated the QC results in /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc/_json/qc_2024_05_22_165400.510257.json

To see the results in a browser, type:
open /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc/index.html


Done! To view results, type:
fsleyes sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz -cm greyscale sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz -cm red -a 70.0 &

+ sct_create_mask -i ./sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz -p centerline,./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz -size 35mm -f cylinder -o ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_mask.nii.gz

--
Spinal Cord Toolbox (6.3)

sct_create_mask -i ./sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz -p centerline,./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz -size 35mm -f cylinder -o ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_mask.nii.gz
--

  OK: ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-05_create-mask_849m0siw)

Orientation:
  RPI

Dimensions:
(232, 256, 160, 1, 0.9765625, 0.9765625, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-05_create-mask_849m0siw

Done! To view results, type:
fsleyes sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz -cm greyscale sub-Control02_ses-aera02_acq-mprage_T1w.nii_mask.nii.gz -cm red -a 50.0 &

+ sct_crop_image -i ./sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz -m ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_mask.nii.gz -o ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop.nii.gz

--
Spinal Cord Toolbox (6.3)

sct_crop_image -i ./sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz -m ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_mask.nii.gz -o ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop.nii.gz
--

Bounding box: x=[93, 137], y=[47, 118], z=[1, 53]
Cropping the image...

Done! To view results, type:
fsleyes sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop.nii.gz &

+ TEMPLATE_IMAGE=../template.nii.gz
+ '[' -f ../template.nii.gz ']'
+ echo 'Template image not found at ../template.nii.gz'
Template image not found at ../template.nii.gz
+ sct_smooth_spinalcord -i ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop.nii.gz -s ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz -o ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_smooth.nii.gz

--
Spinal Cord Toolbox (6.3)

sct_smooth_spinalcord -i ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop.nii.gz -s ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz -o ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop.nii.gz
  Centerline ........................ ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-11_smooth-spinalcord_f6dn8231)

Copying input data to tmp folder and convert to nii...
cp ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-11_smooth-spinalcord_f6dn8231/anat.nii.gz
cp ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-11_smooth-spinalcord_f6dn8231/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-12_straighten-spinalcord_00bp_bgc)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 1.21 mm
Error on approximation = 0.31 mm
Error on approximation = 0.29 mm
Error on approximation = 0.18 mm
Error on approximation = 0.13 mm
Error on approximation = 0.13 mm
Error on approximation = 0.11 mm
Error on approximation = 0.1 mm
Error on approximation = 0.1 mm
Create the straight space and the safe zone
Length of spinal cord: 88.47555231241152
Size of spinal cord in z direction: 81.95480575887815
Ratio length/size: 1.0795651517095686
Safe zone boundaries (curved space): [-145.67134489639528, -63.71653913751713]
Safe zone boundaries (straight space): [-148.93171817316195, -60.456165860750446]
Pad input volume to account for spinal cord length...
Time to generate centerline: 9.0 ms
[33mImage header specifies datatype 'float32', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Warping field generated: tmp.curve2straight.nii.gz
[33mImage header specifies datatype 'float32', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.3/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-12_straighten-spinalcord_00bp_bgc
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-12_straighten-spinalcord_00bp_bgc/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-12_straighten-spinalcord_00bp_bgc/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-12_straighten-spinalcord_00bp_bgc/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-12_straighten-spinalcord_00bp_bgc
cp straight_ref.nii.gz /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/data_processed/sub-Control02/ses-aera02/anat/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/data_processed/sub-Control02/ses-aera02/anat/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/data_processed/sub-Control02/ses-aera02/anat/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.3/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-11_smooth-spinalcord_f6dn8231

Replace zeroed voxels by original image...

Generate output file...
File created: ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-11_smooth-spinalcord_f6dn8231

Finished! Elapsed time: 42s


Done! To view results, type:
fsleyes sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop.nii.gz sub-Control02_ses-aera02_acq-mprage_T1w.nii_smooth.nii.gz &

+ sct_flatten_sagittal -i ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop.nii.gz -s ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz

--
Spinal Cord Toolbox (6.3)

sct_flatten_sagittal -i ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop.nii.gz -s ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz
--


Done! To view results, type:
fsleyes sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop.nii.gz sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop_flatten.nii.gz &

+ mv ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop_flat.nii.gz ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_flat.nii.gz
mv: rename ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop_flat.nii.gz to ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_flat.nii.gz: No such file or directory
+ sct_label_vertebrae -i ./sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz -s ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz -ofolder label_vertebrae -c t1 -qc /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc -qc-subject sub-Control02_ses-aera02

--
Spinal Cord Toolbox (6.3)

sct_label_vertebrae -i ./sub-Control02_ses-aera02_acq-mprage_T1w.nii.gz -s ./sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz -ofolder label_vertebrae -c t1 -qc /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc -qc-subject sub-Control02_ses-aera02
--

Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-59_label-vertebrae_04j_kdiw)

Copying input data to tmp folder...

Straighten spinal cord...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-59_straighten-spinalcord_qwrmqyd_)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 1.21 mm
Error on approximation = 0.31 mm
Error on approximation = 0.29 mm
Error on approximation = 0.18 mm
Error on approximation = 0.13 mm
Error on approximation = 0.13 mm
Error on approximation = 0.11 mm
Error on approximation = 0.1 mm
Error on approximation = 0.1 mm
Create the straight space and the safe zone
Length of spinal cord: 88.47555231241152
Size of spinal cord in z direction: 81.95480575887815
Ratio length/size: 1.0795651517095686
Safe zone boundaries (curved space): [-145.67134489639528, -63.71653913751713]
Safe zone boundaries (straight space): [-148.93171817316195, -60.456165860750446]
Pad input volume to account for spinal cord length...
Time to generate centerline: 5.0 ms
[33mImage header specifies datatype 'float32', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Warping field generated: tmp.curve2straight.nii.gz
[33mImage header specifies datatype 'float32', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.3/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-59_straighten-spinalcord_qwrmqyd_
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-59_straighten-spinalcord_qwrmqyd_/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-59_straighten-spinalcord_qwrmqyd_/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-59_straighten-spinalcord_qwrmqyd_/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./data_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-59_straighten-spinalcord_qwrmqyd_

Resample to 0.5mm isotropic...
load data...

Apply straightening to segmentation...
/Users/mathilde/sct_6.3/bin/isct_antsApplyTransforms -d 3 -i segmentation.nii -o segmentation_straight.nii -t warp_curve2straight.nii.gz -r data_straightr.nii -n Linear # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-59_label-vertebrae_04j_kdiw
[33mFile /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-54-59_label-vertebrae_04j_kdiw/segmentation_straight.nii already exists. Will overwrite it.[0m

Create label to identify disc...
Creating temporary folder...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-55-41_detect-c2c3_nka0ze2u)
Run C2-C3 detector...
[33mC2-C3 not detected...[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-55-41_detect-c2c3_nka0ze2u
Automatic C2-C3 detection failed. Please provide manual label with sct_label_utils
+ cd ..
+ FILES_TO_CHECK=("anat/${SUBJECT}_acq-mprage_T1w.nii_seg.nii.gz" "anat/${SUBJECT}_acq-mprage_T1w.nii_mask.nii.gz" "anat/${SUBJECT}_acq-mprage_T1w.nii_crop.nii.gz" "anat/${SUBJECT}_acq-mprage_T1w.nii_smooth.nii.gz" "anat/${SUBJECT}_acq-mprage_T1w.nii_crop_flatten.nii.gz")
+ for file in '${FILES_TO_CHECK[@]}'
+ [[ ! -e anat/sub-Control02_ses-aera02_acq-mprage_T1w.nii_seg.nii.gz ]]
+ for file in '${FILES_TO_CHECK[@]}'
+ [[ ! -e anat/sub-Control02_ses-aera02_acq-mprage_T1w.nii_mask.nii.gz ]]
+ for file in '${FILES_TO_CHECK[@]}'
+ [[ ! -e anat/sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop.nii.gz ]]
+ for file in '${FILES_TO_CHECK[@]}'
+ [[ ! -e anat/sub-Control02_ses-aera02_acq-mprage_T1w.nii_smooth.nii.gz ]]
+ for file in '${FILES_TO_CHECK[@]}'
+ [[ ! -e anat/sub-Control02_ses-aera02_acq-mprage_T1w.nii_crop_flatten.nii.gz ]]
++ date +%s
+ end=1716389741
+ runtime=229
+ echo

+ echo '~~~'
~~~
++ sct_version
+ echo 'SCT version: 6.3'
SCT version: 6.3
++ uname -nsr
+ echo 'Ran on:      Darwin MacBookProKI.local 21.6.0'
Ran on:      Darwin MacBookProKI.local 21.6.0
+ echo 'Duration:    0hrs 3min 49sec'
Duration:    0hrs 3min 49sec
+ echo '~~~'
~~~
