+ SUBJECT_SESSION=sub-Control02/ses-avanto02
++ date +%s
+ start=1716389737
+ sct_check_dependencies -short

--
Spinal Cord Toolbox (6.3)

sct_check_dependencies -short
--


SYSTEM INFORMATION
------------------
SCT info:
- version: 6.3
- path: /Users/mathilde/sct_6.3
OS: osx (macOS-10.16-x86_64-i386-64bit)
CPU cores: Available: 10, Used by ITK functions: 1
RAM: Total: 65536MB, Used: 4739MB, Available: 10504MB
++ cut -d / -f1
+ SUBJECT=sub-Control02
++ cut -d / -f2
+ SESSION=ses-avanto02
+ cd /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/data_processed
+ [[ ! -f participants.tsv ]]
+ rsync -avzh /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/DATA/participants.tsv .
building file list ... rsync: link_stat "/Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/DATA/participants.tsv" failed: No such file or directory (2)
done

sent 29 bytes  received 20 bytes  98.00 bytes/sec
total size is 0  speedup is 0.00
rsync error: some files could not be transferred (code 23) at /AppleInternal/Library/BuildRoots/a0876c02-1788-11ed-b9c4-96898e02b808/Library/Caches/com.apple.xbs/Sources/rsync/rsync/main.c(996) [sender=2.6.9]
+ mkdir -p sub-Control02
+ rsync -avzh --copy-links /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/DATA/sub-Control02/ses-avanto02 sub-Control02/
building file list ... done
ses-avanto02/
ses-avanto02/.DS_Store
ses-avanto02/anat/
ses-avanto02/anat/.DS_Store
ses-avanto02/anat/sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz

sent 10.03M bytes  received 98 bytes  6.68M bytes/sec
total size is 10.03M  speedup is 1.00
+ cd sub-Control02/ses-avanto02/anat/
+ SUBJECT=sub-Control02_ses-avanto02
++ find . -type f -name '*_T1w.nii.gz' -print
++ head -n 1
+ T1_image=./sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz
+ sct_deepseg_sc -i ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz -c t1 -centerline cnn -o ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz -qc /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc -qc-subject sub-Control02_ses-avanto02

--
Spinal Cord Toolbox (6.3)

sct_deepseg_sc -i ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz -c t1 -centerline cnn -o ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz -qc /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc -qc-subject sub-Control02_ses-avanto02
--

Config deepseg_sc:
  Centerline algorithm: cnn
  Brain in image: True
  Kernel dimension: 2d
  Contrast: t1
  Threshold: 0.15
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-55-42_deepseg-sc_toczl2mt)
Reorient the image to RPI, if necessary...
[33mConverting image from type 'int16' to type 'float64' for linear interpolation[0m
Finding the spinal cord centerline...
[33mTo avoid intensity overflow due to convertion to +uint8+, intensity will be rescaled to the maximum quantization scale[0m
Brain section detected.
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-56-48_optic-detect-centerline_8lmznqig)
[33mImage header specifies datatype 'uint8', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-56-48_optic-detect-centerline_8lmznqig
Cropping brain section.
Cropping the image around the spinal cord...
Normalizing the intensity...
Segmenting the spinal cord using deep learning on 2D patches...
Reassembling the image...
Resampling the segmentation to the native image resolution using linear interpolation...
Binarizing the resampled segmentation...
[33mImage header specifies datatype 'float32', but array is of type 'uint8'. Header metadata will be overwritten to use 'uint8'.[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mFound isolated voxels on slice 1, Removing them[0m
[33mFound isolated voxels on slice 1, Removing them[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-55-42_deepseg-sc_toczl2mt

*** Generate Quality Control (QC) html report ***
Resample images to 0.6x0.6 mm
[33mConverting image from type 'int16' to type 'float64' for spline interpolation[0m
[33mConverting image from type 'uint8' to type 'float64' for linear interpolation[0m
[33mImage header specifies datatype 'float64', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
QcImage: layout with Axial slice
Compute center of mass at each slice
/Users/mathilde/sct_6.3/python/envs/venv_sct/lib/python3.9/site-packages/scipy/ndimage/_measurements.py:1542: RuntimeWarning: invalid value encountered in scalar divide
  results = [sum(input * grids[dir].astype(float), labels, index) / normalizer
/Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc/sub-Control02/sub-Control02_ses-avanto02/anat/sct_deepseg_sc/2024_05_22_165735.255436/background_img.png
Successfully generated the QC results in /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc/_json/qc_2024_05_22_165735.255436.json

To see the results in a browser, type:
open /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc/index.html


Done! To view results, type:
fsleyes sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz -cm greyscale sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz -cm red -a 70.0 &

+ sct_create_mask -i ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz -p centerline,./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz -size 35mm -f cylinder -o ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_mask.nii.gz

--
Spinal Cord Toolbox (6.3)

sct_create_mask -i ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz -p centerline,./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz -size 35mm -f cylinder -o ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_mask.nii.gz
--

  OK: ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-48_create-mask_6f178tzz)

Orientation:
  RPI

Dimensions:
(256, 256, 160, 1, 0.9726562, 0.9726562, 1.5, 1)

Create mask...
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'uint8', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m
[33mImage header specifies datatype 'int16', but array is of type 'int64'. Header metadata will be overwritten to use 'int64'.[0m

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-48_create-mask_6f178tzz

Done! To view results, type:
fsleyes sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz -cm greyscale sub-Control02_ses-avanto02_acq-mprage_T1w.nii_mask.nii.gz -cm red -a 50.0 &

+ sct_crop_image -i ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz -m ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_mask.nii.gz -o ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop.nii.gz

--
Spinal Cord Toolbox (6.3)

sct_crop_image -i ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz -m ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_mask.nii.gz -o ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop.nii.gz
--

Bounding box: x=[106, 149], y=[47, 112], z=[2, 55]
Cropping the image...

Done! To view results, type:
fsleyes sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop.nii.gz &

+ TEMPLATE_IMAGE=../template.nii.gz
+ '[' -f ../template.nii.gz ']'
+ echo 'Template image not found at ../template.nii.gz'
Template image not found at ../template.nii.gz
+ sct_smooth_spinalcord -i ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop.nii.gz -s ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz -o ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_smooth.nii.gz

--
Spinal Cord Toolbox (6.3)

sct_smooth_spinalcord -i ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop.nii.gz -s ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz -o ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_smooth.nii.gz
--


Check input arguments...
  Volume to smooth .................. ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop.nii.gz
  Centerline ........................ ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz
  Sigma (mm) ........................ [0, 0, 3]
  Verbose ........................... 1
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-58_smooth-spinalcord_s85hwuov)

Copying input data to tmp folder and convert to nii...
cp ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-58_smooth-spinalcord_s85hwuov/anat.nii.gz
cp ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-58_smooth-spinalcord_s85hwuov/centerline.nii.gz

Orient input volume to RPI orientation...

Orient centerline to RPI orientation...

Straighten the spinal cord using centerline/segmentation...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-59_straighten-spinalcord_x69rvg6k)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 3.43 mm
Error on approximation = 1.07 mm
Error on approximation = 0.62 mm
Error on approximation = 0.36 mm
Error on approximation = 0.28 mm
Error on approximation = 0.23 mm
Error on approximation = 0.2 mm
Error on approximation = 0.18 mm
Error on approximation = 0.17 mm
Error on approximation = 0.17 mm
Error on approximation = 0.17 mm
Error on approximation = 0.17 mm
Error on approximation = 0.19 mm
Error on approximation = 0.19 mm
Error on approximation = 0.2 mm
Error on approximation = 0.2 mm
Error on approximation = 0.18 mm
Error on approximation = 0.18 mm
Error on approximation = 0.18 mm
Create the straight space and the safe zone
Length of spinal cord: 86.45681298389377
Size of spinal cord in z direction: 81.64255944712144
Ratio length/size: 1.0589674499351094
Safe zone boundaries (curved space): [-128.5919076319378, -46.94934818481636]
Safe zone boundaries (straight space): [-130.99903440032398, -44.542221416430195]
Pad input volume to account for spinal cord length...
Time to generate centerline: 40.0 ms
[33mImage header specifies datatype 'float32', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Warping field generated: tmp.curve2straight.nii.gz
[33mImage header specifies datatype 'float32', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.3/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-59_straighten-spinalcord_x69rvg6k
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-59_straighten-spinalcord_x69rvg6k/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-59_straighten-spinalcord_x69rvg6k/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-59_straighten-spinalcord_x69rvg6k/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./anat_rpi_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-59_straighten-spinalcord_x69rvg6k
cp straight_ref.nii.gz /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/data_processed/sub-Control02/ses-avanto02/anat/straight_ref.nii.gz
cp warp_curve2straight.nii.gz /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/data_processed/sub-Control02/ses-avanto02/anat/warp_curve2straight.nii.gz
cp warp_straight2curve.nii.gz /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/data_processed/sub-Control02/ses-avanto02/anat/warp_straight2curve.nii.gz

Smooth the straightened image...

Apply the reversed warping field to get back the curved spinal cord...
/Users/mathilde/sct_6.3/bin/isct_antsApplyTransforms -d 3 -i anat_rpi_straight_smooth.nii -o anat_rpi_straight_smooth_curved.nii -t warp_straight2curve.nii.gz -r anat.nii -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-58_smooth-spinalcord_s85hwuov

Replace zeroed voxels by original image...

Generate output file...
File created: ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_smooth.nii.gz

Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-57-58_smooth-spinalcord_s85hwuov

Finished! Elapsed time: 53s


Done! To view results, type:
fsleyes sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop.nii.gz sub-Control02_ses-avanto02_acq-mprage_T1w.nii_smooth.nii.gz &

+ sct_flatten_sagittal -i ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop.nii.gz -s ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz

--
Spinal Cord Toolbox (6.3)

sct_flatten_sagittal -i ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop.nii.gz -s ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz
--

Traceback (most recent call last):
  File "/Users/mathilde/sct_6.3/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 100, in <module>
    main(sys.argv[1:])
  File "/Users/mathilde/sct_6.3/spinalcordtoolbox/scripts/sct_flatten_sagittal.py", line 50, in main
    im_anat_flattened = flatten_sagittal(im_anat, im_centerline, verbose)
  File "/Users/mathilde/sct_6.3/spinalcordtoolbox/flattening.py", line 42, in flatten_sagittal
    np.ones(nz - zmax) * x_centerline_fit[-1]])
  File "/Users/mathilde/sct_6.3/python/envs/venv_sct/lib/python3.9/site-packages/numpy/core/numeric.py", line 191, in ones
    a = empty(shape, dtype, order)
ValueError: negative dimensions are not allowed
+ mv ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop_flat.nii.gz ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_flat.nii.gz
mv: rename ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop_flat.nii.gz to ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_flat.nii.gz: No such file or directory
+ sct_label_vertebrae -i ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz -s ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz -ofolder label_vertebrae -c t1 -qc /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc -qc-subject sub-Control02_ses-avanto02

--
Spinal Cord Toolbox (6.3)

sct_label_vertebrae -i ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii.gz -s ./sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz -ofolder label_vertebrae -c t1 -qc /Users/mathilde/Desktop/BIDS_DATASET_seg_copy_3_seg+label/OUTPUT/qc -qc-subject sub-Control02_ses-avanto02
--

Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-58-58_label-vertebrae_dwedsxp2)

Copying input data to tmp folder...

Straighten spinal cord...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-58-59_straighten-spinalcord_ob7g_5r_)
Copy files to tmp folder...
Fitting centerline using B-spline approximation
Error on approximation = 3.43 mm
Error on approximation = 1.07 mm
Error on approximation = 0.62 mm
Error on approximation = 0.36 mm
Error on approximation = 0.28 mm
Error on approximation = 0.23 mm
Error on approximation = 0.2 mm
Error on approximation = 0.18 mm
Error on approximation = 0.17 mm
Error on approximation = 0.17 mm
Error on approximation = 0.17 mm
Error on approximation = 0.17 mm
Error on approximation = 0.19 mm
Error on approximation = 0.19 mm
Error on approximation = 0.2 mm
Error on approximation = 0.2 mm
Error on approximation = 0.18 mm
Error on approximation = 0.18 mm
Error on approximation = 0.18 mm
Create the straight space and the safe zone
Length of spinal cord: 86.45681298389377
Size of spinal cord in z direction: 81.64255944712144
Ratio length/size: 1.0589674499351094
Safe zone boundaries (curved space): [-128.5919076319378, -46.94934818481636]
Safe zone boundaries (straight space): [-130.99903440032398, -44.542221416430195]
Pad input volume to account for spinal cord length...
Time to generate centerline: 19.0 ms
[33mImage header specifies datatype 'float32', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Warping field generated: tmp.curve2straight.nii.gz
[33mImage header specifies datatype 'float32', but array is of type 'float64'. Header metadata will be overwritten to use 'float64'.[0m
Warping field generated: tmp.straight2curve.nii.gz
Apply transformation to input image...
/Users/mathilde/sct_6.3/bin/isct_antsApplyTransforms -d 3 -i data.nii -o tmp.anat_rigid_warp.nii.gz -t tmp.curve2straight.nii.gz -r tmp.centerline_pad_crop.nii.gz -n 'BSpline[3]' # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-58-59_straighten-spinalcord_ob7g_5r_
Generate output files...
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-58-59_straighten-spinalcord_ob7g_5r_/tmp.curve2straight.nii.gz ./warp_curve2straight.nii.gz
File created: ./warp_curve2straight.nii.gz
mv /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-58-59_straighten-spinalcord_ob7g_5r_/tmp.straight2curve.nii.gz ./warp_straight2curve.nii.gz
File created: ./warp_straight2curve.nii.gz
cp /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-58-59_straighten-spinalcord_ob7g_5r_/tmp.anat_rigid_warp.nii.gz ./straight_ref.nii.gz
File created: ./data_straight.nii
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-58-59_straighten-spinalcord_ob7g_5r_

Resample to 0.5mm isotropic...
load data...

Apply straightening to segmentation...
/Users/mathilde/sct_6.3/bin/isct_antsApplyTransforms -d 3 -i segmentation.nii -o segmentation_straight.nii -t warp_curve2straight.nii.gz -r data_straightr.nii -n Linear # in /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-58-58_label-vertebrae_dwedsxp2
[33mFile /private/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-58-58_label-vertebrae_dwedsxp2/segmentation_straight.nii already exists. Will overwrite it.[0m

Create label to identify disc...
Creating temporary folder...
Creating temporary folder (/var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-59-47_detect-c2c3_cr4mlbtf)
Run C2-C3 detector...
[33mC2-C3 not detected...[0m
Remove temporary files...
rm -rf /var/folders/1q/6vxfb5k57tjdzgdv6zv49t6m0000gn/T/sct_2024-05-22_16-59-47_detect-c2c3_cr4mlbtf
Automatic C2-C3 detection failed. Please provide manual label with sct_label_utils
+ cd ..
+ FILES_TO_CHECK=("anat/${SUBJECT}_acq-mprage_T1w.nii_seg.nii.gz" "anat/${SUBJECT}_acq-mprage_T1w.nii_mask.nii.gz" "anat/${SUBJECT}_acq-mprage_T1w.nii_crop.nii.gz" "anat/${SUBJECT}_acq-mprage_T1w.nii_smooth.nii.gz" "anat/${SUBJECT}_acq-mprage_T1w.nii_crop_flatten.nii.gz")
+ for file in '${FILES_TO_CHECK[@]}'
+ [[ ! -e anat/sub-Control02_ses-avanto02_acq-mprage_T1w.nii_seg.nii.gz ]]
+ for file in '${FILES_TO_CHECK[@]}'
+ [[ ! -e anat/sub-Control02_ses-avanto02_acq-mprage_T1w.nii_mask.nii.gz ]]
+ for file in '${FILES_TO_CHECK[@]}'
+ [[ ! -e anat/sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop.nii.gz ]]
+ for file in '${FILES_TO_CHECK[@]}'
+ [[ ! -e anat/sub-Control02_ses-avanto02_acq-mprage_T1w.nii_smooth.nii.gz ]]
+ for file in '${FILES_TO_CHECK[@]}'
+ [[ ! -e anat/sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop_flatten.nii.gz ]]
+ echo 'sub-Control02_ses-avanto02/anat/sub-Control02_ses-avanto02_acq-mprage_T1w.nii_crop_flatten.nii.gz does not exist'
++ date +%s
+ end=1716389988
+ runtime=251
+ echo

+ echo '~~~'
~~~
++ sct_version
+ echo 'SCT version: 6.3'
SCT version: 6.3
++ uname -nsr
+ echo 'Ran on:      Darwin MacBookProKI.local 21.6.0'
Ran on:      Darwin MacBookProKI.local 21.6.0
+ echo 'Duration:    0hrs 4min 11sec'
Duration:    0hrs 4min 11sec
+ echo '~~~'
~~~
